{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.PrivateRoute = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _sessionReducer = require(\"@onaio/session-reducer\");\n\nvar _querystring = _interopRequireDefault(require(\"querystring\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar defaultPrivateRouteProps = {\n  authenticated: false,\n  disableLoginProtection: false,\n  redirectPath: '/login'\n};\n\nvar PrivateRoute = function PrivateRoute(props) {\n  var Component = props.component,\n      authenticated = props.authenticated,\n      disableLoginProtection = props.disableLoginProtection,\n      redirectPath = props.redirectPath,\n      location = props.location,\n      theOtherProps = (0, _objectWithoutProperties2[\"default\"])(props, [\"component\", \"authenticated\", \"disableLoginProtection\", \"redirectPath\", \"location\"]);\n  var currentPath = \"\".concat(location && location.pathname || '').concat(location && location.search || '').concat(location && location.hash || '');\n  var fullRedirectPath = \"\".concat(redirectPath, \"?\").concat(_querystring[\"default\"].stringify({\n    next: currentPath\n  }));\n  return _react[\"default\"].createElement(_reactRouterDom.Route, (0, _extends2[\"default\"])({}, theOtherProps, {\n    render: function render(routeProps) {\n      return (authenticated === true || disableLoginProtection === true) && Component ? _react[\"default\"].createElement(Component, (0, _extends2[\"default\"])({}, routeProps, theOtherProps)) : _react[\"default\"].createElement(_reactRouterDom.Redirect, {\n        to: fullRedirectPath\n      });\n    }\n  }));\n};\n\nexports.PrivateRoute = PrivateRoute;\nPrivateRoute.defaultProps = defaultPrivateRouteProps;\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  var result = {\n    authenticated: (0, _sessionReducer.isAuthenticated)(state)\n  };\n  Object.assign(result, ownProps);\n  return result;\n};\n\nvar ConnectedPrivateRoute = (0, _reactRedux.connect)(mapStateToProps, null)(PrivateRoute);\nvar _default = ConnectedPrivateRoute;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}