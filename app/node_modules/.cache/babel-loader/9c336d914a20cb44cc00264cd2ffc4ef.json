{"ast":null,"code":"/*\n * aria hidden\n * ----------------\n * Traverse dom upwards and set aria-hidden on all siblings.\n * Used on modals to hide all other content from screen readers when modal\n * is placed within wrappers in dom, and we are unable to set aria-hidden on the rest\n * of the page.\n *\n * Example:\n * <article>\n *   <header>\n *     <h1>Page title</h1>\n *   </header>\n *   <div role=\"dialog\" id=\"modal\">\n *\n *   </div>\n * </article>\n *\n * Here we are unable to set aria-hidden on article as it would also hide the modal.\n * The script then traverses the dom upwards and set aria-hidden on all siblings of parent element\n * until it reaches the body element.\n *\n */\nexport default {\n  setAriaHidden(domEl) {\n    // Set aria hidden on siblings\n    const siblings = this._getSiblings(domEl);\n\n    for (let i = 0; i < siblings.allSiblings.length; i++) {\n      siblings.allSiblings[i].setAttribute('aria-hidden', 'true');\n    } // Return siblings so aria-hiddens can be restored later\n\n\n    return siblings;\n  },\n\n  resetAriaHidden(siblings) {\n    if (siblings) {\n      siblings.allSiblings.forEach(sibling => {\n        sibling.removeAttribute('aria-hidden');\n      });\n      siblings.ariaHiddens.forEach(sibling => {\n        siblings.allSiblings[sibling.elIndex].setAttribute('aria-hidden', sibling.val);\n      });\n      return siblings;\n    }\n  },\n\n  _getSiblings(domEl) {\n    // Get siblings\n    const siblings = {\n      allSiblings: [],\n      ariaHiddens: []\n    };\n    let x = 0;\n\n    while (domEl && domEl !== document.body) {\n      if (domEl.parentElement) {\n        for (let i = 0; i < domEl.parentElement.children.length; i++) {\n          const child = domEl.parentElement.children[i];\n\n          if (child.nodeType === 1 && child !== domEl) {\n            // If element already has aria set, store it for later\n            if (child.hasAttribute('aria-hidden')) {\n              const value = child.getAttribute('aria-hidden');\n\n              if (value) {\n                siblings.ariaHiddens.push({\n                  elIndex: x,\n                  val: value.toString()\n                });\n              }\n            }\n\n            siblings.allSiblings.push(child);\n            x++;\n          }\n        }\n      }\n\n      domEl = domEl.parentElement;\n    }\n\n    return siblings;\n  }\n\n};","map":null,"metadata":{},"sourceType":"module"}