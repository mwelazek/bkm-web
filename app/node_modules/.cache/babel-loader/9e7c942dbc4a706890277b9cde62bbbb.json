{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/home/teboho/opensrp-fhir-web-source/fhir-web/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/home/teboho/opensrp-fhir-web-source/fhir-web/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ucumJsonDefs = exports.UcumJsonDefs = void 0;\n/**\n * This class handles opening, reading and loading the JSON file of ucum\n * definitions (prefixes, base units, and unit atoms).\n *\n * @author Lee Mericle\n *\n */\n\nvar Pfx = require(\"./prefix.js\");\n\nvar PfxT = require(\"./prefixTables.js\");\n\nvar Un = require(\"./unit.js\");\n\nvar Utab = require('./unitTables.js');\n\nvar unpackArray = require('./jsonArrayPack.js').unpackArray;\n\nvar UcumJsonDefs = /*#__PURE__*/function () {\n  function UcumJsonDefs() {\n    _classCallCheck(this, UcumJsonDefs);\n  }\n\n  _createClass(UcumJsonDefs, [{\n    key: \"loadJsonDefs\",\n    value:\n    /**\n     * This method loads the JSON prefix and unit objects into the prefix and\n     * unit tables.\n     *\n     * @returns nothing\n     */\n    function loadJsonDefs() {\n      // requiring the file will take care of opening it for use\n      var jsonDefs = require('../data/ucumDefs.min.json');\n\n      jsonDefs.prefixes = unpackArray(jsonDefs.prefixes);\n      jsonDefs.units = unpackArray(jsonDefs.units);\n\n      if (Utab.UnitTables.getInstance().unitsCount() === 0) {\n        var pTab = PfxT.PrefixTables.getInstance();\n        var prefixes = jsonDefs[\"prefixes\"];\n        var plen = prefixes.length;\n\n        for (var p = 0; p < plen; p++) {\n          var newPref = new Pfx.Prefix(prefixes[p]);\n          pTab.add(newPref);\n        }\n\n        var uTab = Utab.UnitTables.getInstance();\n        var units = jsonDefs[\"units\"];\n        var ulen = units.length;\n\n        for (var u = 0; u < ulen; u++) {\n          var newUnit = new Un.Unit(units[u]);\n          uTab.addUnit(newUnit);\n        }\n      } // end if the data has not already been loaded\n\n    } // end loadJsonDefs\n\n  }]);\n\n  return UcumJsonDefs;\n}(); // end UcumJsonDefs class\n\n\nexports.UcumJsonDefs = UcumJsonDefs;\nvar ucumJsonDefs = new UcumJsonDefs();\nexports.ucumJsonDefs = ucumJsonDefs;","map":null,"metadata":{},"sourceType":"script"}