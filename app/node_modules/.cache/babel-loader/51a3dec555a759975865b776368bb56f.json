{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseHealthCare = exports.ViewDetailsWrapper = exports.ViewDetails = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _icons = require(\"@ant-design/icons\");\n\nvar _antd = require(\"antd\");\n\nvar _lodash = require(\"lodash\");\n\nvar _reactQuery = require(\"react-query\");\n\nvar _constants = require(\"../../constants\");\n\nvar _reactUtils = require(\"@opensrp/react-utils\");\n\nvar _mls = require(\"../../mls\");\n\nvar parseHealthCare = function parseHealthCare(obj) {\n  var comment = obj.comment,\n      meta = obj.meta,\n      name = obj.name,\n      active = obj.active,\n      id = obj.id,\n      providedBy = obj.providedBy;\n  return {\n    id: id,\n    name: name,\n    comment: comment,\n    active: active,\n    providedBy: providedBy,\n    lastUpdated: (0, _lodash.get)(meta, 'lastUpdated')\n  };\n};\n\nexports.parseHealthCare = parseHealthCare;\n\nvar ViewDetails = function ViewDetails(props) {\n  var _keyValues;\n\n  var resourceId = props.resourceId,\n      fhirBaseURL = props.fhirBaseURL;\n\n  var _useTranslation = (0, _mls.useTranslation)(),\n      t = _useTranslation.t;\n\n  var _useQuery = (0, _reactQuery.useQuery)([_constants.healthCareServiceResourceType, resourceId], function () {\n    return new _reactUtils.FHIRServiceClass(fhirBaseURL, _constants.healthCareServiceResourceType).read(resourceId);\n  }),\n      organization = _useQuery.data,\n      orgIsLoading = _useQuery.isLoading,\n      orgError = _useQuery.error;\n\n  if (orgIsLoading) {\n    return _react[\"default\"].createElement(_antd.Spin, {\n      size: \"large\",\n      className: \"custom-spinner\"\n    });\n  }\n\n  if (orgError && !organization) {\n    return _react[\"default\"].createElement(_antd.Alert, {\n      type: \"error\",\n      message: \"\".concat(orgError)\n    });\n  }\n\n  var org = organization;\n\n  var _parseHealthCare = parseHealthCare(org),\n      id = _parseHealthCare.id,\n      name = _parseHealthCare.name,\n      comment = _parseHealthCare.comment,\n      active = _parseHealthCare.active,\n      providedBy = _parseHealthCare.providedBy,\n      lastUpdated = _parseHealthCare.lastUpdated;\n\n  var keyValues = (_keyValues = {}, (0, _defineProperty2[\"default\"])(_keyValues, t('Id'), id), (0, _defineProperty2[\"default\"])(_keyValues, t('Name'), name), (0, _defineProperty2[\"default\"])(_keyValues, t('Status'), active ? t('Active') : t('Inactive')), (0, _defineProperty2[\"default\"])(_keyValues, t('Last Updated'), t('{{val, datetime}}', {\n    val: new Date(lastUpdated !== null && lastUpdated !== void 0 ? lastUpdated : '')\n  })), (0, _defineProperty2[\"default\"])(_keyValues, t('Provided By'), (0, _lodash.get)(providedBy, 'reference.display')), (0, _defineProperty2[\"default\"])(_keyValues, t('Comment'), comment), _keyValues);\n  return _react[\"default\"].createElement(_antd.Space, {\n    direction: \"vertical\"\n  }, Object.entries(keyValues).map(function (_ref) {\n    var _ref2 = (0, _slicedToArray2[\"default\"])(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    var props = (0, _defineProperty2[\"default\"])({}, key, value);\n    return value ? _react[\"default\"].createElement(\"div\", {\n      key: key,\n      \"data-testid\": \"key-value\"\n    }, _react[\"default\"].createElement(_reactUtils.SingleKeyNestedValue, props)) : null;\n  }));\n};\n\nexports.ViewDetails = ViewDetails;\n\nvar ViewDetailsWrapper = function ViewDetailsWrapper(props) {\n  var resourceId = props.resourceId,\n      fhirBaseURL = props.fhirBaseURL;\n\n  var _useSearchParams = (0, _reactUtils.useSearchParams)(),\n      removeParam = _useSearchParams.removeParam;\n\n  if (!resourceId) {\n    return null;\n  }\n\n  return _react[\"default\"].createElement(_antd.Col, {\n    className: \"view-details-content\"\n  }, _react[\"default\"].createElement(\"div\", {\n    className: \"flex-right\"\n  }, _react[\"default\"].createElement(_antd.Button, {\n    \"data-testid\": \"close-button\",\n    icon: _react[\"default\"].createElement(_icons.CloseOutlined, null),\n    shape: \"circle\",\n    type: \"text\",\n    onClick: function onClick() {\n      return removeParam(_reactUtils.viewDetailsQuery);\n    }\n  })), _react[\"default\"].createElement(ViewDetails, {\n    resourceId: resourceId,\n    fhirBaseURL: fhirBaseURL\n  }));\n};\n\nexports.ViewDetailsWrapper = ViewDetailsWrapper;","map":null,"metadata":{},"sourceType":"script"}