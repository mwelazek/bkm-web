{"ast":null,"code":"import _objectSpread from\"/home/teboho/opensrp-fhir-web-source/fhir-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport*as React from'react';import{withRouter,useHistory}from'react-router';import{Layout,Avatar,Button,Dropdown}from'antd';import'./Header.css';import{URL_LOGOUT,URL_USER_EDIT}from'../../../constants';import{BellOutlined}from'@ant-design/icons';import{LanguageSwitcher}from'@opensrp/react-utils';import{ENABLE_LANGUAGE_SWITCHER,SUPPORTED_LANGUAGES}from'../../../configs/env';import{useTranslation}from'../../../mls';import{getConfig,setConfig}from'@opensrp/pkg-config';import{APP_LOGIN_URL}from'../../../configs/dispatchConfig';import{ButtonLink}from'@opensrp/react-utils';/** interface for HeaderProps */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/** default props for Header */var defaultHeaderProps={authenticated:false,user:{email:'',name:'',username:''},extraData:{}};var languageOptions={en:'English',fr:'Fran√ßais'};/** handler called when language is changed\n *\n * @param languageCode - contains the languageOption.key of the selected language option\n */var languageChangeHandlerFactory=function languageChangeHandlerFactory(i18n){return function(languageCode){var projectCode=getConfig('projectCode');if(languageCode){var newLanguage=projectCode?\"\".concat(languageCode,\"-\").concat(projectCode):languageCode;setConfig('languageCode',languageCode);i18n.changeLanguage(newLanguage);}};};/** The Header component */export var HeaderComponent=function HeaderComponent(props){var authenticated=props.authenticated,user=props.user,extraData=props.extraData;var user_id=extraData.user_id;var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var history=useHistory();/** default enum of all possible language options */var languageChangeHandler=languageChangeHandlerFactory(i18n);var languageSwitcherProps={value:i18n.language,onLanguageChange:languageChangeHandler,allLanguageOptions:languageOptions,supportedLanguages:SUPPORTED_LANGUAGES};var items=[{key:'1',label:/*#__PURE__*/_jsx(ButtonLink,{name:t('Logout'),route:URL_LOGOUT})},{key:'2',label:/*#__PURE__*/_jsx(ButtonLink,{name:t('Manage account'),route:\"\".concat(URL_USER_EDIT,\"/\").concat(user_id)})}];return/*#__PURE__*/_jsxs(Layout.Header,{className:\"app-header txt-white align-items-center justify-content-end px-1 layout-header\",children:[authenticated?/*#__PURE__*/_jsx(Dropdown,{menu:{items:items},placement:\"bottomRight\",trigger:['click','hover'],children:/*#__PURE__*/_jsx(Button,{shape:\"circle\",icon:/*#__PURE__*/_jsx(Avatar,{className:\"mr-1 bg-white\",src:user.gravatar,children:user.username}),className:\"h-auto d-flex align-items-center bg-transparent border-0 rounded-0\",size:\"large\",type:\"primary\",children:user.username})}):/*#__PURE__*/_jsx(Button,{\"data-index\":\"login-button\",icon:/*#__PURE__*/_jsx(BellOutlined,{}),className:\"bg-transparent border-0\",type:\"primary\",onClick:function onClick(){return history.push(APP_LOGIN_URL);},children:t('Login')}),ENABLE_LANGUAGE_SWITCHER&&/*#__PURE__*/_jsx(LanguageSwitcher,_objectSpread({},languageSwitcherProps))]});};HeaderComponent.defaultProps=defaultHeaderProps;var Header=withRouter(HeaderComponent);export default Header;","map":null,"metadata":{},"sourceType":"module"}