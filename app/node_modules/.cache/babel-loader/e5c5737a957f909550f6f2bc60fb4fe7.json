{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocationUnitDetail = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _antd = require(\"antd\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _icons = require(\"@ant-design/icons\");\n\nvar _reactUtils = require(\"@opensrp/react-utils\");\n\nvar _reactQuery = require(\"react-query\");\n\nvar _constants = require(\"../../constants\");\n\nvar _mls = require(\"../../mls\");\n\nvar LocationUnitDetail = function LocationUnitDetail(props) {\n  var _detailsMap;\n\n  var onClose = props.onClose,\n      fhirBaseUrl = props.fhirBaseUrl,\n      detailId = props.detailId;\n\n  var _useTranslation = (0, _mls.useTranslation)(),\n      t = _useTranslation.t;\n\n  var serve = new _reactUtils.FHIRServiceClass(fhirBaseUrl, _constants.locationResourceType);\n\n  var _useQuery = (0, _reactQuery.useQuery)([_constants.locationResourceType, detailId], (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee() {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", serve.read(detailId));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), {\n    select: function select(res) {\n      return res;\n    },\n    enabled: !!detailId\n  }),\n      data = _useQuery.data,\n      isLoading = _useQuery.isLoading,\n      error = _useQuery.error;\n\n  if (isLoading) {\n    return _react[\"default\"].createElement(_antd.Spin, {\n      size: \"large\",\n      className: \"custom-spinner flex-grow-1\"\n    });\n  }\n\n  if (error && !data) {\n    return _react[\"default\"].createElement(_antd.Alert, {\n      \"data-testid\": \"error-alert\",\n      message: \"\".concat(error),\n      type: \"error\"\n    });\n  }\n\n  if (!data) {\n    return _react[\"default\"].createElement(_antd.Alert, {\n      \"data-testid\": \"info-alert\",\n      message: t('Location resource not found'),\n      type: \"info\"\n    });\n  }\n\n  var name = data.name,\n      status = data.status,\n      description = data.description,\n      id = data.id,\n      identifierArr = data.identifier;\n  var identifier = (0, _reactUtils.getObjLike)(identifierArr, 'use', _reactUtils.IdentifierUseCodes.OFFICIAL);\n  var detailsMap = (_detailsMap = {}, (0, _defineProperty2[\"default\"])(_detailsMap, t('Location id'), id), (0, _defineProperty2[\"default\"])(_detailsMap, t('identifier'), (0, _lodash.get)(identifier, '0.value')), (0, _defineProperty2[\"default\"])(_detailsMap, t('Name'), name), (0, _defineProperty2[\"default\"])(_detailsMap, t('alias'), (0, _lodash.get)(data, 'alias.0')), (0, _defineProperty2[\"default\"])(_detailsMap, t('Status'), status), (0, _defineProperty2[\"default\"])(_detailsMap, t('Physical type'), (0, _lodash.get)(data, 'physicalType.coding.0.display')), (0, _defineProperty2[\"default\"])(_detailsMap, t('Description'), description), _detailsMap);\n  return _react[\"default\"].createElement(_antd.Col, {\n    className: \"pl-3\",\n    span: 5\n  }, _react[\"default\"].createElement(\"div\", {\n    className: \"p-4 bg-white\",\n    \"data-testid\": \"view-details\"\n  }, _react[\"default\"].createElement(_antd.Button, {\n    shape: \"circle\",\n    onClick: onClose,\n    className: \"float-right\",\n    type: \"text\",\n    icon: _react[\"default\"].createElement(_icons.CloseOutlined, null)\n  }), Object.entries(detailsMap).map(function (_ref2) {\n    var _ref3 = (0, _slicedToArray2[\"default\"])(_ref2, 2),\n        key = _ref3[0],\n        value = _ref3[1];\n\n    var singleMapValue = (0, _defineProperty2[\"default\"])({}, key, value);\n    return _react[\"default\"].createElement(\"div\", {\n      \"data-testid\": \"single-key-value\",\n      key: key,\n      className: \"pb-3\"\n    }, _react[\"default\"].createElement(_reactUtils.SingleKeyNestedValue, singleMapValue));\n  })));\n};\n\nexports.LocationUnitDetail = LocationUnitDetail;","map":null,"metadata":{},"sourceType":"script"}