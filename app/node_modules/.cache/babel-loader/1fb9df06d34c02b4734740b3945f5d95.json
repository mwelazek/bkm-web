{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseGroup = exports.ViewDetailsWrapper = exports.ViewDetails = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _icons = require(\"@ant-design/icons\");\n\nvar _antd = require(\"antd\");\n\nvar _constants = require(\"../../../constants\");\n\nvar _reactQuery = require(\"react-query\");\n\nvar _reactUtils = require(\"@opensrp/react-utils\");\n\nvar _lodash = require(\"lodash\");\n\nvar _mls = require(\"../../../mls\");\n\nvar parseGroup = function parseGroup(obj) {\n  var name = obj.name,\n      active = obj.active,\n      quantity = obj.quantity,\n      member = obj.member,\n      id = obj.id,\n      type = obj.type,\n      characteristic = obj.characteristic,\n      rawIdentifier = obj.identifier;\n  var identifierObj = (0, _reactUtils.getObjLike)(rawIdentifier, 'use', _reactUtils.IdentifierUseCodes.OFFICIAL);\n  var identifier = (0, _lodash.get)(identifierObj, '0.value');\n  return {\n    name: name,\n    active: active,\n    id: id,\n    identifier: identifier,\n    lastUpdated: (0, _lodash.get)(obj, 'meta.lastUpdated'),\n    members: member,\n    quantity: quantity,\n    type: type,\n    characteristic: characteristic,\n    obj: obj\n  };\n};\n\nexports.parseGroup = parseGroup;\n\nvar ViewDetails = function ViewDetails(props) {\n  var resourceId = props.resourceId,\n      fhirBaseURL = props.fhirBaseURL,\n      keyValueMapperRenderProp = props.keyValueMapperRenderProp;\n\n  var _useTranslation = (0, _mls.useTranslation)(),\n      t = _useTranslation.t;\n\n  var _useQuery = (0, _reactQuery.useQuery)([_constants.groupResourceType, resourceId], function () {\n    return new _reactUtils.FHIRServiceClass(fhirBaseURL, _constants.groupResourceType).read(resourceId);\n  }),\n      data = _useQuery.data,\n      isLoading = _useQuery.isLoading,\n      error = _useQuery.error;\n\n  if (isLoading) {\n    return _react[\"default\"].createElement(_antd.Spin, {\n      size: \"large\",\n      className: \"custom-spinner\"\n    });\n  }\n\n  if (error && !data) {\n    return _react[\"default\"].createElement(_antd.Alert, {\n      type: \"error\",\n      message: \"\".concat(error)\n    });\n  }\n\n  var org = data;\n  return keyValueMapperRenderProp(org, t);\n};\n\nexports.ViewDetails = ViewDetails;\n\nvar ViewDetailsWrapper = function ViewDetailsWrapper(props) {\n  var resourceId = props.resourceId,\n      fhirBaseURL = props.fhirBaseURL,\n      keyValueMapperRenderProp = props.keyValueMapperRenderProp;\n\n  var _useSearchParams = (0, _reactUtils.useSearchParams)(),\n      removeParam = _useSearchParams.removeParam;\n\n  if (!resourceId) {\n    return null;\n  }\n\n  return _react[\"default\"].createElement(_antd.Col, {\n    className: \"view-details-content\"\n  }, _react[\"default\"].createElement(\"div\", {\n    className: \"flex-right\"\n  }, _react[\"default\"].createElement(_antd.Button, {\n    \"data-testid\": \"close-button\",\n    icon: _react[\"default\"].createElement(_icons.CloseOutlined, null),\n    shape: \"circle\",\n    type: \"text\",\n    onClick: function onClick() {\n      return removeParam(_reactUtils.viewDetailsQuery);\n    }\n  })), _react[\"default\"].createElement(ViewDetails, {\n    resourceId: resourceId,\n    fhirBaseURL: fhirBaseURL,\n    keyValueMapperRenderProp: keyValueMapperRenderProp\n  }));\n};\n\nexports.ViewDetailsWrapper = ViewDetailsWrapper;","map":null,"metadata":{},"sourceType":"script"}