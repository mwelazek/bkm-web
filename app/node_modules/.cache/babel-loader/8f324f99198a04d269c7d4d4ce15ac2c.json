{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar NotificationPanel_1 = __importDefault(require(\"@helsenorge/designsystem-react/components/NotificationPanel\"));\n\nvar dropzone_1 = __importDefault(require(\"@helsenorge/toolkit/components/atoms/dropzone\"));\n\nvar validation_1 = require(\"@helsenorge/toolkit/components/atoms/dropzone/validation\");\n\nvar validation_2 = __importDefault(require(\"@helsenorge/toolkit/components/molecules/form/validation\"));\n\nvar constants_1 = __importStar(require(\"../../../constants\"));\n\nvar extension_1 = require(\"../../../util/extension\");\n\nvar attachmentHtml = function attachmentHtml(_a) {\n  var id = _a.id,\n      onUpload = _a.onUpload,\n      onDelete = _a.onDelete,\n      onOpen = _a.onOpen,\n      uploadButtonText = _a.uploadButtonText,\n      label = _a.label,\n      subLabel = _a.subLabel,\n      resources = _a.resources,\n      isRequired = _a.isRequired,\n      errorText = _a.errorText,\n      uploadedFiles = _a.uploadedFiles,\n      onRequestAttachmentLink = _a.onRequestAttachmentLink,\n      attachmentErrorMessage = _a.attachmentErrorMessage,\n      helpButton = _a.helpButton,\n      helpElement = _a.helpElement,\n      multiple = _a.multiple,\n      maxFiles = _a.maxFiles,\n      attachmentMaxFileSize = _a.attachmentMaxFileSize,\n      attachmentValidTypes = _a.attachmentValidTypes,\n      minFiles = _a.minFiles,\n      item = _a.item,\n      children = _a.children,\n      other = __rest(_a, [\"id\", \"onUpload\", \"onDelete\", \"onOpen\", \"uploadButtonText\", \"label\", \"subLabel\", \"resources\", \"isRequired\", \"errorText\", \"uploadedFiles\", \"onRequestAttachmentLink\", \"attachmentErrorMessage\", \"helpButton\", \"helpElement\", \"multiple\", \"maxFiles\", \"attachmentMaxFileSize\", \"attachmentValidTypes\", \"minFiles\", \"item\", \"children\"]);\n\n  var maxFilesize = attachmentMaxFileSize ? attachmentMaxFileSize : constants_1.default.MAX_FILE_SIZE;\n  var validFileTypes = attachmentValidTypes ? attachmentValidTypes : constants_1.VALID_FILE_TYPES;\n  var deleteText = resources ? resources.deleteAttachmentText : undefined;\n  return React.createElement(\"div\", {\n    className: \"page_skjemautfyller__component page_skjemautfyller__component_attachment\"\n  }, React.createElement(validation_2.default, Object.assign({}, other), React.createElement(dropzone_1.default, {\n    id: id,\n    label: label,\n    subLabel: subLabel,\n    onDrop: onUpload,\n    onDelete: onDelete,\n    onOpenFile: onOpen,\n    uploadButtonText: uploadButtonText,\n    uploadedFiles: uploadedFiles,\n    maxFileSize: maxFilesize,\n    validMimeTypes: validFileTypes,\n    dontShowHardcodedText: !!deleteText,\n    deleteText: deleteText,\n    supportedFileFormatsText: resources ? resources.supportedFileFormats : undefined,\n    errorMessage: function errorMessage(file) {\n      return getErrorMessage(validFileTypes, maxFilesize, item, errorText, file, resources);\n    },\n    isRequired: isRequired,\n    wrapperClasses: \"page_skjemautfyller__input\",\n    onRequestLink: onRequestAttachmentLink,\n    helpButton: helpButton,\n    helpElement: helpElement,\n    shouldUploadMultiple: multiple,\n    maxFiles: maxFiles,\n    minFiles: minFiles,\n    chooseFilesText: resources === null || resources === void 0 ? void 0 : resources.chooseFilesText\n  })), attachmentErrorMessage && React.createElement(NotificationPanel_1.default, {\n    variant: \"alert\"\n  }, attachmentErrorMessage), children ? React.createElement(\"div\", {\n    className: \"nested-fieldset nested-fieldset--full-height\"\n  }, children) : null);\n};\n\nfunction getErrorMessage(validFileTypes, maxFileSize, item, genericErrorText, file, resources) {\n  if (file && resources) {\n    if (!validation_1.mimeTypeIsValid(file, validFileTypes)) {\n      return resources.validationFileType;\n    } else if (!validation_1.sizeIsValid(file, maxFileSize)) {\n      return resources.validationFileMax;\n    }\n  }\n\n  var validationText = extension_1.getValidationTextExtension(item);\n\n  if (validationText) {\n    return validationText;\n  }\n\n  if (genericErrorText) {\n    return genericErrorText;\n  }\n\n  return '';\n}\n\nexports.default = attachmentHtml;","map":null,"metadata":{},"sourceType":"script"}