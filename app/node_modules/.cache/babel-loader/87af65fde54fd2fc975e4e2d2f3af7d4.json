{"ast":null,"code":"import _toConsumableArray from\"/home/teboho/opensrp-fhir-web-source/fhir-web/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/teboho/opensrp-fhir-web-source/fhir-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{withRouter}from'react-router';import{Layout,Menu}from'antd';import{Link,useLocation}from'react-router-dom';import{URL_HOME}from'../../../constants';import{getRoutes}from'../../../routes';import{getActivePath}from'./utils';import{MAIN_LOGO_SRC,OPENSRP_WEB_VERSION}from'../../../configs/env';import{useTranslation}from'../../../mls';import'./Sidebar.css';import{RoleContext}from'@opensrp/rbac';/** interface for SidebarProps */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/** default props for Sidebar */var defaultSidebarProps={authenticated:false};/** The Sidebar component */export var SidebarComponent=function SidebarComponent(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var extraData=props.extraData;var roles=extraData.roles;var location=useLocation();var userRole=useContext(RoleContext);var routes=React.useMemo(function(){return getRoutes(roles,t,userRole);},[roles,t,userRole]);var sidebaritems=React.useMemo(function(){function mapChildren(route){if(route.children){var _route$otherProps;return/*#__PURE__*/_jsx(Menu.SubMenu,{icon:(_route$otherProps=route.otherProps)===null||_route$otherProps===void 0?void 0:_route$otherProps.icon,title:route.title,children:route.children.map(mapChildren)},route.key);}else if(route.url){var _route$otherProps2;return/*#__PURE__*/_jsx(Menu.Item,{icon:(_route$otherProps2=route.otherProps)===null||_route$otherProps2===void 0?void 0:_route$otherProps2.icon,children:/*#__PURE__*/_jsx(Link,{className:\"admin-link\",to:route.url,children:route.title})},route.key);}else{return/*#__PURE__*/_jsx(Menu.Item,{children:route.title},route.key);}}return routes.map(mapChildren);},[routes]);var _getActivePath=getActivePath(location.pathname,routes),activeKey=_getActivePath.activeKey,activePaths=_getActivePath.activePaths;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),collapsedKeys=_useState2[0],setCollapsedKeys=_useState2[1];useEffect(function(){var _getActivePath2=getActivePath(location.pathname,routes),activePaths=_getActivePath2.activePaths;setCollapsedKeys(activePaths.concat.apply(activePaths,_toConsumableArray(collapsedKeys)));},[location.pathname,routes]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsxs(Layout.Sider,{width:\"275px\",className:\"layout-sider\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[/*#__PURE__*/_jsx(Link,{to:URL_HOME,children:/*#__PURE__*/_jsx(\"img\",{src:MAIN_LOGO_SRC,alt:\"The logo\"})}),OPENSRP_WEB_VERSION.length>0?/*#__PURE__*/_jsx(\"p\",{className:\"sidebar-version\",children:OPENSRP_WEB_VERSION}):null]}),/*#__PURE__*/_jsx(Menu,{theme:\"dark\",selectedKeys:[activeKey!==null&&activeKey!==void 0?activeKey:''],openKeys:collapsedKeys,defaultOpenKeys:activePaths,defaultSelectedKeys:[activeKey!==null&&activeKey!==void 0?activeKey:''],onOpenChange:function onOpenChange(openKeys){return setCollapsedKeys(openKeys);},mode:\"inline\",className:\"menu-dark\",children:sidebaritems},\"main-menu\")]});};SidebarComponent.defaultProps=defaultSidebarProps;var Sidebar=withRouter(SidebarComponent);export default Sidebar;","map":null,"metadata":{},"sourceType":"module"}