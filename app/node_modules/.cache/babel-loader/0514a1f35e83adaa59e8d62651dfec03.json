{"ast":null,"code":"import _slicedToArray from \"/home/teboho/opensrp-fhir-web-source/fhir-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/home/teboho/opensrp-fhir-web-source/fhir-web/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { useReducer as t, useEffect as e, useRef as r, useState as o, useCallback as n } from \"react\";\n\nfunction s() {\n  return (s = Object.assign || function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n\n      for (var o in r) {\n        Object.prototype.hasOwnProperty.call(r, o) && (t[o] = r[o]);\n      }\n    }\n\n    return t;\n  }).apply(this, arguments);\n}\n\nvar c = function c(t, e) {\n  if (!t.includes(e)) throw new Error(\"'\".concat(e, \"' not found. It must be provided in initialState as a property key.\"));\n},\n    a = \"production\" !== process.env.NODE_ENV ? Symbol(\"UPDATE_STATE\") : Symbol(),\n    l = function l(_l, u) {\n  var i = Object.keys(u);\n  var p = u,\n      d = null;\n  var f = {};\n  i.forEach(function (t) {\n    f[t] = new Set();\n  });\n\n  var E = function E(t, e) {\n    return e.type === a ? e.r ? e.r(t) : e.e : _l(t, e);\n  },\n      S = function S(t, e) {\n    \"production\" !== process.env.NODE_ENV && c(i, t);\n\n    var r = function r(_r) {\n      return s({}, _r, _defineProperty({}, t, (o = _r[t], n = e, \"function\" == typeof n ? n(o) : n)));\n      var o, n;\n    };\n\n    if (d) d({\n      type: a,\n      r: r\n    });else {\n      p = r(p);\n      var _e = p[t];\n      f[t].forEach(function (t) {\n        return t(_e);\n      });\n    }\n  },\n      b = function b(t, e) {\n    i.forEach(function (r) {\n      var o = e[r];\n      t[r] !== o && f[r].forEach(function (t) {\n        return t(o);\n      });\n    });\n  };\n\n  return {\n    useGlobalStateProvider: function useGlobalStateProvider() {\n      var _t = t(E, p),\n          _t2 = _slicedToArray(_t, 2),\n          o = _t2[0],\n          n = _t2[1];\n\n      e(function () {\n        if (d) throw new Error(\"Only one global state provider is allowed\");\n        return d = n, n({\n          type: a,\n          e: p\n        }), function () {\n          d = null;\n        };\n      }, []);\n      var s = r(o);\n      b(s.current, o), s.current = o, e(function () {\n        p = o;\n      }, [o]);\n    },\n    useGlobalState: function useGlobalState(t) {\n      \"production\" !== process.env.NODE_ENV && c(i, t);\n\n      var _o = o(p[t]),\n          _o2 = _slicedToArray(_o, 2),\n          r = _o2[0],\n          s = _o2[1];\n\n      return e(function () {\n        return f[t].add(s), s(p[t]), function () {\n          f[t].delete(s);\n        };\n      }, [t]), [r, n(function (e) {\n        return S(t, e);\n      }, [t])];\n    },\n    getGlobalState: function getGlobalState(t) {\n      return \"production\" !== process.env.NODE_ENV && c(i, t), p[t];\n    },\n    setGlobalState: S,\n    getState: function getState() {\n      return p;\n    },\n    setState: function setState(t) {\n      if (d) d({\n        type: a,\n        e: t\n      });else {\n        var _e2 = p;\n        p = t, b(_e2, p);\n      }\n    },\n    dispatch: function dispatch(t) {\n      if (d) d(t);else {\n        var _e3 = p;\n        p = _l(p, t), b(_e3, p);\n      }\n      return t;\n    }\n  };\n},\n    u = function u(t) {\n  return l(function (t, e) {\n    return t;\n  }, t);\n},\n    i = function i(t) {\n  var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t(void 0, {\n    type: void 0\n  });\n  var r = arguments.length > 2 ? arguments[2] : undefined;\n  return r ? r(i)(t, e) : l(t, e);\n},\n    p = function p() {\n  if (!window.__REDUX_DEVTOOLS_EXTENSION__) return function (t) {\n    return t;\n  };\n\n  var _ref = function () {\n    var t, e;\n    return {\n      before: function before(r) {\n        return function (o, n, c) {\n          if (t = o, e = n, c) return c(r)(o, n);\n          var a = r(o, n);\n          return s({}, a, {\n            useGlobalState: function useGlobalState(t) {\n              var _a$useGlobalState = a.useGlobalState(t),\n                  _a$useGlobalState2 = _slicedToArray(_a$useGlobalState, 1),\n                  e = _a$useGlobalState2[0];\n\n              return [e, function () {\n                throw new Error(\"Update is not allowed when using DevTools\");\n              }];\n            }\n          });\n        };\n      },\n      after: function after(r) {\n        return function (o, n, c) {\n          if (c) return c(r)(o, n);\n          var a = r(t, e);\n          var l = s({}, o(n, {\n            type: \"@@redux/INIT\"\n          }), e);\n          var u = [];\n          return s({}, a, {\n            getState: function getState() {\n              return l;\n            },\n            dispatch: function dispatch(t) {\n              return l = o(l, t), a.setState(l.computedStates[l.currentStateIndex].state), u.forEach(function (t) {\n                return t();\n              }), t;\n            },\n            subscribe: function subscribe(t) {\n              return u.push(t), function () {\n                var e = u.indexOf(t);\n                u.splice(e, 1);\n              };\n            }\n          });\n        };\n      }\n    };\n  }(),\n      t = _ref.before,\n      e = _ref.after;\n\n  return function () {\n    for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {\n      t[_key] = arguments[_key];\n    }\n\n    return t.reduce(function (t, e) {\n      return function () {\n        return t(e.apply(void 0, arguments));\n      };\n    });\n  }(t, window.__REDUX_DEVTOOLS_EXTENSION__(), e);\n};\n\nexport { u as createGlobalState, i as createStore, p as reduxDevToolsExt };","map":null,"metadata":{},"sourceType":"module"}