(this["webpackJsonp@opensrp/web"]=this["webpackJsonp@opensrp/web"]||[]).push([[0],{1005:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendInfoNotification=t.sendErrorNotification=void 0,t.sendSuccessNotification=function(e,t){n.notification.success({message:e,description:t,duration:2})},t.sendWarningNotification=void 0;var n=r(32);t.sendInfoNotification=function(e,t){n.notification.info({message:e,description:t,duration:2})};t.sendWarningNotification=function(e,t){n.notification.warning({message:e,description:t,duration:2})};t.sendErrorNotification=function(e,t){n.notification.error({message:e,description:t,duration:2})}},1006:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.OpensrpWebI18nProvider=function(e){return c.default.createElement(a.I18nextProvider,{i18n:s},e.children)},t.opensrpI18nInstance=void 0;var a=r(879),o=r(141),i=n(r(1579)),u=r(1007),c=n(r(0)),s=i.default.createInstance();t.opensrpI18nInstance=s;var l=(0,o.getConfig)("languageCode"),d=(0,o.getConfig)("projectCode"),f="".concat(l,"-").concat(d);s.use(a.initReactI18next).init({resources:u.resources,lng:f,fallbackLng:"en-core",interpolation:{escapeValue:!1},returnEmptyString:!1,nsSeparator:"::",keySeparator:!1,debug:!1,react:{useSuspense:!0}}).catch((function(e){}))},1007:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resources=void 0;var n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_ACTIVE:"false",REACT_APP_OPENSRP_USER_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/userinfo",REACT_APP_PROJECT_CODE:"core",REACT_APP_OPENSRP_API_V2_BASE_URL:"http://localhost:3000/opensrp/rest/",REACT_APP_WEBSITE_NAME:"Bophelo-Ka-Mosebeletsi-BKM",REACT_APP_KEYCLOAK_LOGOUT_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/logout",REACT_APP_ENABLE_FHIR_GROUP:"true",REACT_APP_LANGUAGE_CODE:"en",REACT_APP_ENABLE_FHIR_CARE_TEAM:"true",REACT_APP_ENABLE_QUEST:"true",REACT_APP_KEYCLOAK_API_BASE_URL:"http://192.168.1.8:8080/auth/admin/realms/opensrp",REACT_APP_ENABLE_CARD_SUPPORT:"true",REACT_APP_PAGINATION_SIZE:"100",REACT_APP_OPENSRP_ACCESS_TOKEN_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/token",REACT_APP_EXPRESS_OAUTH_GET_STATE_URL:"http://localhost:3000/oauth/state",REACT_APP_OPENSRP_OAUTH_SCOPES:"openid profile address email",REACT_APP_ENABLE_OPENSRP_OAUTH:"true",REACT_APP_OPENSRP_OAUTH_STATE:"nacosec",REACT_APP_ENABLE_FHIR_USER_MANAGEMENT:"true",REACT_APP_EXPRESS_OAUTH_LOGOUT_URL:"http://localhost:3000/logout",REACT_APP_OPENSRP_WEB_VERSION:"BKM-Web-v3.1.4",REACT_APP_ENABLE_FHIR_HEALTHCARE:"true",REACT_APP_ENABLE_LOCATIONS:"true",REACT_APP_ENABLE_SERVER_SETTINGS:"true",REACT_APP_ENABLE_FORM_CONFIGURATION:"true",REACT_APP_ENABLE_FHIR_LOCATIONS:"true",REACT_APP_ENABLE_TEAMS:"true",REACT_APP_FHIR_API_BASE_URL:"http://192.168.1.8:9080/fhir",REACT_APP_ENABLE_TEAMS_ASSIGNMENT_MODULE:"true",REACT_APP_OPENSRP_CLIENT_ID:"bkm-client-oid",REACT_APP_ENABLE_PLANS:"true",REACT_APP_COMMODITIES_LIST_RESOURCE_ID:"a5f1c283-b71b-41c3-a8d1-b93257d42dd4",REACT_APP_OPENSRP_AUTHORIZATION_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/auth",REACT_APP_OPENSRP_CLIENT_SECRET:"B3WOuUFy3dLsuQmEvYpKvlrSsvOdMFdG",REACT_APP_ENABLE_FHIR_PRACTITIONER_ROLE:"true",REACT_APP_ENABLE_FHIR_COMMODITY:"true",REACT_APP_DOMAIN_NAME:"http://localhost:3000",REACT_APP_ENABLE_FHIR_PATIENTS:"true",REACT_APP_DISABLE_LOGIN_PROTECTION:"true",REACT_APP_KEYCLOAK_USERS_PAGE_SIZE:"20",REACT_APP_FHIR_ROOT_LOCATION_ID:"6b79be92-24b1-405a-acc4-be66fbadcfe7",REACT_APP_FILTER_BY_PARENT_ID:"true"}).__OPENSRP_WEB_LANG_RESOURCES__;t.resources=n},1008:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.Resource404=void 0;var a=n(r(26)),o=n(r(0)),i=r(32),u=r(385),c=r(267);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u.extraLinksDefault),d=function(e){var t=e.title,r=e.errorMessage,n=(0,c.useTranslation)().t,a={homeUrl:e.homeUrl},s=null!==r&&void 0!==r?r:n("Sorry, the resource you requested for, does not exist"),l=null!==t&&void 0!==t?t:n("404");return o.default.createElement(i.Result,{status:"404",title:l,subTitle:s,extra:o.default.createElement(u.ExtraLinks,a)})};t.Resource404=d,d.defaultProps=l},1009:function(e,t,r){"use strict";var n=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;var a=r(212),o=r(220),i=s(r(192)),u=s(r(711));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}var l={router:a.connectReducer},d=window.__PRELOADED_STATE__;delete window.__PRELOADED_STATE__,l[u.reducerName]=u.default,l[o.gateKeeperReducerName]=o.gateKeeperReducer;var f=(0,a.getConnectedStore)(l,d);t.store=f,i.default.setChangeListener((function(e){f.replaceReducer((0,i.combine)(e))}))},1012:function(e,t){},1020:function(e,t){},1022:function(e,t){},1035:function(e,t){},1037:function(e,t){},1065:function(e,t){},1066:function(e,t){},1071:function(e,t){},1073:function(e,t){},1080:function(e,t){},1099:function(e,t){},114:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1006);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(879);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},1147:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAPIStateSelector=t.getExtraData=t.fetchOauthProviderState=t.fetchApiToken=t.fetchAccessToken=void 0;var n=r(711),a=r(433),o=function(e,t){return t.accessToken?t.accessToken:null};t.fetchAccessToken=o;var i=function(e,t){return t.apiToken?t.apiToken:null};t.fetchApiToken=i;var u=function(e,t){return t.providerState?t.providerState:null};t.fetchOauthProviderState=u;var c=function(e){return e[n.reducerName].extraData};t.getExtraData=c;t.makeAPIStateSelector=function(){return(0,a.createSelector)([o,i,u,c],(function(e,t,r,n){return e?n.oAuth2Data&&n.oAuth2Data.access_token?n.oAuth2Data.access_token:null:t?n.api_token?n.api_token:null:r?n.oAuth2Data&&n.oAuth2Data.state?n.oAuth2Data.state:null:void 0}))}},1148:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.customFetch=t.OpenSRPService=t.OPENSRP_API_BASE_URL=void 0,t.getDefaultHeaders=v,t.getFetchOptions=y;var a=n(r(45)),o=n(r(52)),i=n(r(49)),u=n(r(50)),c=n(r(53)),s=n(r(26)),l=n(r(248)),d=r(713);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m="https://opensrp-stage.smartregister.org/opensrp/rest/";function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Bearer",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json;charset=UTF-8";return{accept:t,authorization:"".concat(r," ").concat(e),"content-type":n}}function y(e,t,r,n){return p({headers:v(t),method:r},n?{body:JSON.stringify(n)}:{})}t.OPENSRP_API_BASE_URL=m;var g=function(){var e=(0,c.default)(a.default.mark((function e(){var t=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch.apply(void 0,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),(0,d.throwNetworkError)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();t.customFetch=g;var E=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(new AbortController).signal;(0,i.default)(this,e),(0,s.default)(this,"accessTokenOrCallBack",void 0),(0,s.default)(this,"baseURL",void 0),(0,s.default)(this,"endpoint",void 0),(0,s.default)(this,"generalURL",void 0),(0,s.default)(this,"getOptions",void 0),(0,s.default)(this,"signal",void 0),this.endpoint=n,this.getOptions=a,this.signal=o,this.baseURL=r,this.generalURL="".concat(this.baseURL).concat(this.endpoint),this.accessTokenOrCallBack=t}return(0,u.default)(e,[{key:"create",value:function(){var t=(0,c.default)(a.default.mark((function t(r){var n,o,i,u,c,s,l,f=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:null,o=f.length>2&&void 0!==f[2]?f[2]:"POST",i=e.getURL(this.generalURL,n),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return u=t.sent,c=p(p({},this.getOptions(this.signal,u,o,r)),{},{"Cache-Control":"no-cache",Pragma:"no-cache"}),t.next=9,g(i,c);case 9:if(!(s=t.sent)){t.next=16;break}if(!s.ok&&201!==s.status){t.next=13;break}return t.abrupt("return",{});case 13:return l="OpenSRPService create on ".concat(this.endpoint," failed, HTTP status ").concat(s.status),t.next=16,(0,d.throwHTTPError)(s,l);case 16:return t.abrupt("return",{});case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=(0,c.default)(a.default.mark((function t(r){var n,o,i,u,c,s,l=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,o=l.length>2&&void 0!==l[2]?l[2]:"GET",i=e.getURL("".concat(this.generalURL,"/").concat(r),n),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return u=t.sent,t.next=8,g(i,this.getOptions(this.signal,u,o));case 8:if(!(c=t.sent)){t.next=17;break}if(!c.ok){t.next=14;break}return t.next=13,c.json();case 13:return t.abrupt("return",t.sent);case 14:return s="OpenSRPService read on ".concat(this.endpoint," failed, HTTP status ").concat(c.status),t.next=17,(0,d.throwHTTPError)(c,s);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,c.default)(a.default.mark((function t(r){var n,o,i,u,c,s,l,f=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:null,o=f.length>2&&void 0!==f[2]?f[2]:"PUT",i=e.getURL(this.generalURL,n),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return u=t.sent,c=p(p({},this.getOptions(this.signal,u,o,r)),{},{"Cache-Control":"no-cache",Pragma:"no-cache"}),t.next=9,g(i,c);case 9:if(!(s=t.sent)){t.next=16;break}if(!s.ok){t.next=13;break}return t.abrupt("return",{});case 13:return l="OpenSRPService update on ".concat(this.endpoint," failed, HTTP status ").concat(s.status),t.next=16,(0,d.throwHTTPError)(s,l);case 16:return t.abrupt("return",{});case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"list",value:function(){var t=(0,c.default)(a.default.mark((function t(){var r,n,o,i,u,c,s=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:"GET",o=e.getURL(this.generalURL,r),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return i=t.sent,t.next=8,g(o,this.getOptions(this.signal,i,n));case 8:if(!(u=t.sent)){t.next=17;break}if(!u.ok){t.next=14;break}return t.next=13,u.json();case 13:return t.abrupt("return",t.sent);case 14:return c="OpenSRPService list on ".concat(this.endpoint," failed, HTTP status ").concat(u.status),t.next=17,(0,d.throwHTTPError)(u,c);case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=(0,c.default)(a.default.mark((function t(){var r,n,o,i,u,c,s=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:"DELETE",o=e.getURL(this.generalURL,r),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return i=t.sent,t.next=8,fetch(o,this.getOptions(this.signal,i,n));case 8:if(!(u=t.sent).ok&&204!==u.status&&200!==u.status){t.next=11;break}return t.abrupt("return",{});case 11:return c="OpenSRPService delete on ".concat(this.endpoint," failed, HTTP status ").concat(u.status),t.next=14,(0,d.throwHTTPError)(u,c);case 14:return t.abrupt("return",{});case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"download",value:function(){var t=(0,c.default)(a.default.mark((function t(){var r,n,o,i,u,c,s=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:"GET",o=e.getURL(this.generalURL,r),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return i=t.sent,t.next=8,g(o,this.getOptions(this.signal,i,n));case 8:if(!(u=t.sent)){t.next=15;break}if(!u.ok){t.next=12;break}return t.abrupt("return",u);case 12:return c="OpenSRPService download from ".concat(this.endpoint," failed, HTTP status ").concat(u.status),t.next=15,(0,d.throwHTTPError)(u,c);case 15:return t.abrupt("return",Promise.reject(u));case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"getURL",value:function(e,t){return t?"".concat(e,"?").concat(decodeURIComponent(l.default.stringify(t))):e}},{key:"getFilterParams",value:function(e){return Object.entries(e).map((function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];return"".concat(r,":").concat(n)})).join(",")}},{key:"processAcessToken",value:function(){var e=(0,c.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof t){e.next=4;break}return e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.OpenSRPService=E},118:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.FhirPeriod=t.FhirCodesTooltips=void 0,t.PatientDetailsTable=function(e){var t=e.resources,r=e.parseResource,n=e.columns,a={datasource:t.map(r),columns:n};return i.default.createElement(o.TableLayout,a)},t.sorterFn=t.getCodeableConcepts=void 0;var a=r(32),o=r(22),i=n(r(0)),u=r(411),c=r(51),s=a.Typography.Text;t.sorterFn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r,n){var a=(0,c.get)(r,e),o=(0,c.get)(n,e);return void 0===a?1:void 0===o?-1:t?Date.parse(a)-Date.parse(o):a.localeCompare(o)}};t.FhirPeriod=function(e){var t=e.start,r=e.end,n=(0,u.useTranslation)().t;return i.default.createElement(i.default.Fragment,null,i.default.createElement(s,null,n("{{val, datetime}}",{val:new Date(null!==t&&void 0!==t?t:"")})),"-",i.default.createElement(s,null,n("{{val, datetime}}",{val:new Date(null!==r&&void 0!==r?r:"")})))};t.FhirCodesTooltips=function(e){var t=e.codings;return i.default.createElement(i.default.Fragment,null,(null!==t&&void 0!==t?t:[]).map((function(e){return i.default.createElement(a.Tooltip,{key:e.code,title:e.system||""},i.default.createElement("span",null,e.display))})))};t.getCodeableConcepts=function(e){return(e?Array.isArray(e)?e:[e]:[]).map((function(e){var t;return null!==(t=e.coding)&&void 0!==t?t:[]})).flat()}},1197:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSearchProps=t.SearchForm=void 0;var a=n(r(70)),o=n(r(79)),i=r(51),u=n(r(0)),c=r(32),s=r(402),l=r(66),d=r(267),f=["onChangeHandler"],p={onChangeHandler:function(){},size:"large",addonBefore:u.default.createElement(l.SearchOutlined,{style:{fontSize:"16px",fontWeight:"bold"}}),allowClear:!0};t.defaultSearchProps=p;var m=function(e){var t,r=e.onChangeHandler,n=(0,o.default)(e,f),l=(0,d.useTranslation)().t;n.placeholder=null!==(t=e.placeholder)&&void 0!==t?t:l("Search");return u.default.createElement("div",{className:"search-input-wrapper"},u.default.createElement(c.Input,(0,a.default)({onChange:function(e){e.persist(),(0,i.debounce)((function(e){return r(e)}),s.DEBOUNCE_HANDLER_MS)(e)}},n)))};t.SearchForm=m,m.defaultProps=p},1198:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.tailLayout=t.isAuthorized=t.formItemLayout=t.PublicComponent=void 0;var a=n(r(70)),o=n(r(79)),i=n(r(0)),u=r(38),c=["component"];t.PublicComponent=function(e){var t=e.component,r=(0,o.default)(e,c),n=(0,u.useLocation)().pathname;return i.default.createElement(u.Route,(0,a.default)({},r,{component:function(e){return i.default.createElement(t,(0,a.default)({},e,{key:n}))}}))};t.isAuthorized=function(e,t){return t.some((function(t){return e.includes(t)}))};t.formItemLayout={labelCol:{xs:{span:24},sm:{span:4},md:{span:4},lg:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18},md:{span:16},lg:{span:14}}};t.tailLayout={wrapperCol:{xs:{offset:0,span:16},sm:{offset:12,span:24},md:{offset:8,span:16},lg:{offset:6,span:14}}}},1199:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageSwitcher=void 0;var a=n(r(52)),o=n(r(0)),i=r(32),u=r(66);var c=function(e){for(var t=e.onLanguageChange,r=function(e,t){var r={};return t&&t.length>0?(Object.keys(e).forEach((function(n){if(t.includes(n)){var a=n;r[a]=e[a]}})),r):r}(e.allLanguageOptions,e.supportedLanguages),n=[],c=0,s=Object.entries(r);c<s.length;c++){var l=(0,a.default)(s[c],2),d=l[0],f=l[1];n.push({key:d,label:o.default.createElement(i.Button,{type:"link"},f)})}return o.default.createElement(i.Dropdown,{menu:{items:n,onClick:function(e){var r=e.key;null===t||void 0===t||t(r)}},placement:"bottomRight",trigger:["click","hover"]},o.default.createElement(u.GlobalOutlined,{style:{fontSize:"17px",color:"white",margin:"10px"},className:"more-options","data-testid":"more-options"}))};t.LanguageSwitcher=c,c.defaultProps={allLanguageOptions:{},supportedLanguages:[]}},1200:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.TableLayout=O,t.default=void 0;var o=n(r(70)),i=n(r(52)),u=n(r(90)),c=n(r(26)),s=n(r(79)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),d=r(32),f=r(386),p=r(141),m=r(267),v=["id","columns","datasource","children","persistState","actions","dataKeyAccessor","pagination"];function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t,r,n=e.id,a=e.columns,c=e.datasource,y=e.children,g=e.persistState,O=e.actions,h=e.dataKeyAccessor,b=e.pagination,P=(0,s.default)(e,v),_=(0,m.useTranslation)().t,R={showQuickJumper:!0,showSizeChanger:!0,defaultPageSize:null!==(t=(0,p.getConfig)("defaultTablesPageSize"))&&void 0!==t?t:f.TABLE_PAGE_SIZE,pageSizeOptions:f.TABLE_PAGE_SIZE_OPTIONS},T=E({pagination:!1!==b&&E(E({},R),b)},P),S=null!==(r=(0,p.getConfig)("tablespref"))&&void 0!==r?r:{},j=(0,l.useMemo)((function(){if(a&&O){var e=E({key:f.TABLE_ACTIONS_KEY,title:_("Actions")},O);return[].concat((0,u.default)(a),[e])}return a}),[a,O,_]),C=(0,l.useState)(n&&void 0!==S[n]?S[n]:{}),A=(0,i.default)(C,2),w=A[0],L=A[1],U=(0,l.useMemo)((function(){return c.map((function(e,t){var r;return E(E({},e),{},{key:null!==(r=e.key)&&void 0!==r?r:h?e[h]:t})}))}),[h,c]);return l.default.createElement(d.Table,(0,o.default)({},E(E({},T),S),{onChange:function(t,r,a,o){e.onChange&&e.onChange(t,r,a,o),n&&g&&function(e,t){var r=E(E({},w),{},{pagination:E(E({},w),{},{current:e,pageSize:t})});S[n]=r,(0,p.setConfig)("tablespref",E({},S)),L(r)}(t.current,t.pageSize)},dataSource:U,columns:j}),y)}var h=O;t.default=h},1201:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.PaginateData=function(e){var t,r,n,d=e.total,p=e.onError,m=e.queryFn,v=e.queryid,y=e.onSuccess,g=e.onSelect,E=e.children,O=e.queryOptions,h=(0,c.useState)({currentPage:null!==(t=e.currentPage)&&void 0!==t?t:l.TABLE_PAGE,pageSize:null!==(r=e.pageSize)&&void 0!==r?r:l.TABLE_PAGE_SIZE,prevdata:{data:[],total:void 0},queryPram:e.queryPram}),b=(0,u.default)(h,2),P=b[0],_=P.currentPage,R=P.pageSize,T=P.prevdata,S=P.queryPram,j=b[1],C=(0,s.useInfiniteQuery)([v,R,S],function(){var e=(0,i.default)(a.default.mark((function e(t){var r,n,o,i,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pageParam,n=void 0===r?_:r,o=S&&Object.entries(S).reduce((function(e,t){var r=(0,u.default)(t,2),n=r[0],a=r[1];return e+(""!==a&&void 0!==a?"&".concat(n,"=").concat(a):"")}),""),e.next=4,m(n,R,o);case 4:if(i=e.sent,"function"!==typeof d){e.next=11;break}return e.next=8,d(i,_,R,o);case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=d;case 12:return c=e.t0,e.abrupt("return",{data:i,total:c});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f({onSuccess:function(e){return null===y||void 0===y?void 0:y(A(e)[_])},onError:p},O));function A(t){return t.pages.reduce((function(r,n,a){var i,u,c=null!==(i=null!==(u=t.pageParams[a])&&void 0!==u?u:e.currentPage)&&void 0!==i?i:l.TABLE_PAGE;return f(f({},r),{},(0,o.default)({},c,n))}),{})}var w=C.data?A(C.data):{},L=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;C.isFetchingNextPage||C.isFetching||C.isError||C.fetchNextPage({pageParam:e,throwOnError:!0}).catch(p)}),[_,C,p]);(0,c.useEffect)((function(){S!==e.queryPram&&j((function(t){return f(f({},t),{},{currentPage:1,queryPram:e.queryPram})}))}),[JSON.stringify(e.queryPram)]),(0,c.useEffect)((function(){void 0===w[_]&&L()}),[_,w,L]);var U=(0,c.useMemo)((function(){var e;return null!==(e=w[_])&&void 0!==e?e:T}),[_,w,T]);return E({datasource:null!==(n=null===g||void 0===g?void 0:g(U.data))&&void 0!==n?n:U.data,loading:C.isFetching,fetchNextPage:function(){return L(_+1)},fetchPreviousPage:function(){return L(_-1)},pagination:{pageSize:R,total:U.total,current:_,onChange:function(e,t){return j((function(r){return f(f({},r),{},{currentPage:e,pageSize:null!==t&&void 0!==t?t:R,prevdata:U})}))}}})};var a=n(r(45)),o=n(r(26)),i=n(r(53)),u=n(r(52)),c=r(0),s=r(67),l=r(386);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},1202:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.renderObjectAsKeyvalue=t.SingleKeyNestedValue=t.KeyValueGrid=void 0;var a=n(r(26)),o=n(r(52)),i=n(r(0)),u=r(32);r(1203);var c=u.Typography.Text;t.KeyValueGrid=function(e){return i.default.createElement("dl",{className:"keyValueGrid"},Object.entries(e).map((function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];return i.default.createElement("div",{key:r,className:"keyValueGrid-pair"},i.default.createElement("dt",{className:"keyValueGrid-pair__label"},r),i.default.createElement("dd",{className:"keyValueGrid-pair__value"},n))})))};var s=function(e){var t=Object.entries(e)[0];if(void 0===t)return null;var r=(0,o.default)(t,2),n=r[0],a=r[1];return i.default.createElement("dl",{className:"singleKeyValue"},i.default.createElement("div",{className:"singleKeyValue-pair"},i.default.createElement("dt",{className:"singleKeyValue-pair__label"},i.default.createElement(c,{type:"secondary"},n)),i.default.createElement("dd",{className:"singleKeyValue-pair__value"},i.default.createElement(c,null,a))))};t.SingleKeyNestedValue=s;t.renderObjectAsKeyvalue=function(e){return i.default.createElement(i.default.Fragment,null,Object.entries(e).map((function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1],u=(0,a.default)({},r,n);return n?i.default.createElement("div",{key:r,"data-testid":"key-value"},i.default.createElement(s,u)):null})))}},1203:function(e,t,r){},1204:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.useSimpleTabularView=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,u=(0,v.useLocation)(),l=(0,v.useHistory)(),E=(0,v.useRouteMatch)(),P=(0,y.getNumberParam)(u,y.pageQuery,y.startingPage),_=(0,y.getStringParam)(u,y.searchQuery),R=null!==(r=(0,m.getConfig)("defaultTablesPageSize"))&&void 0!==r?r:y.startingPageSize,T=(0,y.getNumberParam)(u,y.pageSizeQuery,R),S=(0,s.useCallback)(function(){var r=(0,c.default)(o.default.mark((function r(n){var a,u,c,s,l;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(0,i.default)(n.queryKey,5),a[0],u=a[1],c=a[2],s=a[3],l=a[4],r.abrupt("return",b(e,t,{page:u,pageSize:c,search:s},l));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[e,t]),j={queryKey:[t,P,T,_,n],queryFn:S,select:function(e){var t;return{records:(0,f.getResourcesFromBundle)(e),total:null!==(t=e.total)&&void 0!==t?t:0}},keepPreviousData:!0,staleTime:5e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1},C=(0,p.useQuery)(j),A=C.data,w=(0,a.default)(C,g),L={defaultValue:(0,d.getQueryParams)(u)[y.searchQuery],onChangeHandler:function(e){var t=(0,y.getNextUrlOnSearch)(e,u,E);l.push(t)}},U={current:P,pageSize:T,total:null===A||void 0===A?void 0:A.total,defaultPageSize:R,onChange:function(e,t){if(e&&t){var r=new URLSearchParams(u.search);r.set(y.pageSizeQuery,t.toString()),r.set(y.pageQuery,e.toString()),l.push("".concat(E.url,"?").concat(r.toString()))}}};return{tablePaginationProps:U,queryValues:O({data:A},w),searchFormProps:L}};var a=n(r(79)),o=n(r(45)),i=n(r(52)),u=n(r(26)),c=n(r(53)),s=r(0),l=r(540),d=r(402),f=r(403),p=r(67),m=r(141),v=r(38),y=r(581),g=["data"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){return e?{"name:contains":e}:{}},b=function(){var e=(0,c.default)(o.default.mark((function e(t,r,n,a){var i,u,c,s,d,f,p,m,v,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.page,u=n.pageSize,c=n.search,s={},d=a,"function"===typeof a&&(d=a(c)),s=O(O(O({_total:"accurate"},s),d),{},{_getpagesoffset:(i-1)*u,_count:u}),f=new l.FHIRServiceClass(t,r),e.next=8,f.list(s);case 8:if(void 0!==(p=e.sent).total){e.next=17;break}return m=O(O({},s),{},{_summary:"count"}),e.next=13,f.list(m);case 13:return v=e.sent,y=v.total,p.total=y,e.abrupt("return",p);case 17:return e.abrupt("return",p);case 18:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},1205:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.useTabularViewWithLocalSearch=function(e,t){var r,n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.matchesOnName,h=(0,m.useLocation)(),b=(0,m.useHistory)(),P=(0,m.useRouteMatch)(),_=(0,y.getNumberParam)(h,y.pageQuery,y.startingPage),R=(0,y.getStringParam)(h,y.searchQuery),T=null!==(r=(0,p.getConfig)("defaultTablesPageSize"))&&void 0!==r?r:y.startingPageSize,S=(0,y.getNumberParam)(h,y.pageSizeQuery,T),j=(0,s.useCallback)(function(){var r=(0,c.default)(i.default.mark((function r(n){var a,o;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(0,u.default)(n.queryKey,2),a[0],o=a[1],r.abrupt("return",(0,v.loadAllResources)(e,t,o));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[e,t]),C={queryKey:[t,a],queryFn:j,select:function(e){return(0,d.getResourcesFromBundle)(e)},refetchOnWindowFocus:!1,refetchOnReconnect:!1},A=(0,f.useQuery)(C),w=A.data,L=(0,o.default)(A,g),U=w;R&&(U=null===w||void 0===w?void 0:w.filter((function(e){return E(e,R)})));var k={defaultValue:(0,l.getQueryParams)(h)[y.searchQuery],onChangeHandler:function(e){var t=(0,y.getNextUrlOnSearch)(e,h,P);b.push(t)}},I={current:_,pageSize:S,total:null===(n=U)||void 0===n?void 0:n.length,defaultPageSize:T,onChange:function(e,t){if(e&&t){var r=new URLSearchParams(h.search);r.set(y.pageSizeQuery,t.toString()),r.set(y.pageQuery,e.toString()),b.push("".concat(P.url,"?").concat(r.toString()))}}};return{tablePaginationProps:I,queryValues:O({data:U},L),searchFormProps:k}};var a=n(r(26)),o=n(r(79)),i=n(r(45)),u=n(r(52)),c=n(r(53)),s=r(0),l=r(402),d=r(403),f=r(67),p=r(141),m=r(38),v=r(744),y=r(581),g=["data"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},1206:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.useSearchParams=function(){var e=(0,i.useLocation)(),t=(0,i.useHistory)(),r=(0,i.useRouteMatch)(),n=new URLSearchParams(e.search),c=(0,u.deprecate)((function(e,t){if(t){var r=(0,o.default)({},e,t);s(r)}}),"addParam is now deprecated, and will be removed in the future, consider using addParams"),s=function(e){for(var o=r.path,i=0,u=Object.entries(e);i<u.length;i++){var c=(0,a.default)(u[i],2),s=c[0],l=c[1];l&&n.set(s,l)}o="".concat(o,"?").concat(n.toString()),t.push(o)};return{sParams:n,addParam:c,addParams:s,removeParam:function(e){n.delete(e);var a=n.toString(),o="".concat(r.path,"?").concat(a.toString());t.push(o)}}};var a=n(r(52)),o=n(r(26)),i=r(38),u=r(347)},1207:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.FhirSelect=function(e){var t,r,n=e.resourceType,a=e.baseUrl,i=e.transformOption,m=(e.placeholder,e.filterPageSize),O=void 0===m?20:m,h=e.extraQueryParams,_=void 0===h?{}:h,R=e.getFullOptionOnChange,T=(0,s.default)(e,E),S=(0,l.useState)(1),j=(0,c.default)(S,2),C=j[0],A=j[1],w=l.default.useState(),L=(0,c.default)(w,2),U=L[0],k=L[1],I=l.default.useState(),N=(0,c.default)(I,2),D=N[0],M=N[1],x=(0,y.useTranslation)().t;(0,l.useEffect)((function(){P((function(){M(U),A(1)}))}),[U]);var F=(0,d.useInfiniteQuery)({queryKey:[n,D,C,O],queryFn:function(){var e=(0,u.default)(o.default.mark((function e(t){var r,i,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pageParam,i=void 0===r?C:r,e.next=3,(0,g.loadResources)(a,n,{page:i,pageSize:O,search:null!==D&&void 0!==D?D:null},_);case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getNextPageParam:function(e,t){return(0,g.getTotalRecordsInBundles)(t)<e.total&&C+1},getPreviousPageParam:function(){return 1===C?void 0:C-1},refetchOnWindowFocus:!1}),B=F.data,H=F.fetchNextPage,G=F.hasNextPage,K=F.isLoading,z=F.isFetchingNextPage,V=F.isFetching,Q=F.error,Y=(null!==(t=null===B||void 0===B?void 0:B.pages)&&void 0!==t?t:[]).flatMap((function(e){return(0,v.getResourcesFromBundle)(e).map(i).filter((function(e){return void 0!==e}))})),W=null!==(r=null===B||void 0===B?void 0:B.pages)&&void 0!==r?r:[],q=(0,g.getTotalRecordsInBundles)(W),Z=(0,g.getTotalRecordsOnApi)(W)-q,J=b(b({style:{minWidth:"200px"}},T),{},{onChange:function(t,r){var n,a=Array.isArray(r)?r.slice():r;null===(n=e.onChange)||void 0===n||n.call(e,t,a),null===R||void 0===R||R(a)},loading:K,notFoundContent:K?l.default.createElement(p.Spin,{size:"small"}):l.default.createElement(p.Empty,{description:x("No data")}),filterOption:!1,options:Y,searchValue:U,dropdownRender:function(e){return l.default.createElement(l.default.Fragment,null,!Q&&B&&e,l.default.createElement(p.Divider,{style:{margin:"8px 0"}}),Q?l.default.createElement(p.Alert,{message:x("Unable to load dropdown options."),type:"error",showIcon:!0}):l.default.createElement(p.Space,{direction:"vertical"},B&&l.default.createElement("small",{style:{padding:"4px 16px"}},x("Showing {{recordsFetchedNum}}; {{remainingRecords}} more records.",{recordsFetchedNum:q,remainingRecords:Z})),l.default.createElement(p.Button,{type:"text",icon:l.default.createElement(f.VerticalAlignBottomOutlined,null),disabled:!G||z||V,loading:z,onClick:function(){return H()}},x(z?"Fetching next page":"Load more options"))))}});e.showSearch&&(J.onSearch=function(e){k(e)});return l.default.createElement(p.Select,J)};var o=n(r(45)),i=n(r(26)),u=n(r(53)),c=n(r(52)),s=n(r(79)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),d=r(67),f=r(66),p=r(32),m=r(51),v=r(403),y=r(267),g=r(1208),E=["resourceType","baseUrl","transformOption","placeholder","filterPageSize","extraQueryParams","getFullOptionOnChange"];function O(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=(0,m.debounce)((function(e){return e()}),500)},1208:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.loadResources=t.getTotalRecordsOnApi=t.getTotalRecordsInBundles=void 0;var a=n(r(45)),o=n(r(26)),i=n(r(53)),u=r(540);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(){var e=(0,i.default)(a.default.mark((function e(t,r,n,o){var i,c,l,d,f,p,m,v;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.page,c=n.pageSize,l=n.search,d=s({_getpagesoffset:(i-1)*c,_count:c},o),l&&(d["name:contains"]=l),f=new u.FHIRServiceClass(t,r),e.next=6,f.list(d);case 6:if(void 0!==(p=e.sent).total){e.next=14;break}return d._summary="count",e.next=11,f.list(d);case 11:return m=e.sent,v=m.total,e.abrupt("return",s(s({},p),{},{total:v}));case 14:return e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();t.loadResources=l;t.getTotalRecordsOnApi=function(e){return e.length?e[e.length-1].total:0};t.getTotalRecordsInBundles=function(e){return e.flatMap((function(e){var t;return(null!==(t=e.entry)&&void 0!==t?t:[]).length})).reduce((function(e,t){return e+t}),0)}},1209:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.PageHeader=void 0;var a=n(r(0)),o=r(32).Typography.Title;t.PageHeader=function(e){var t=e.title;return a.default.createElement("div",{className:"header"},a.default.createElement(o,{level:4,className:"page-header"},t))}},1210:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonLink=void 0;var a=n(r(0)),o=r(32),i=r(38);t.ButtonLink=function(e){var t=(0,i.useHistory)(),r=e.name,n=e.route,u=e.className;return a.default.createElement(o.Button,{onClick:function(){t.push(n)},className:u,type:"link"},r)}},1211:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.superUserRole=t.ContextProvider=void 0;var a=n(r(90)),o=r(228),i=r(57),u=n(r(0)),c=r(91),s=r(212),l=r(38),d=new c.UserRole([].concat((0,a.default)(c.FhirResources),(0,a.default)(c.IamResources)),c.Permit.MANAGE);t.superUserRole=d;t.ContextProvider=function(e){var t=e.children;return u.default.createElement(i.Provider,{store:o.store},u.default.createElement(l.Router,{history:s.history},u.default.createElement(c.RoleContext.Provider,{value:d},t)))}},1213:function(e,t,r){"use strict";var n=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.RbacCheck=function(e){var t=e.permissions,r=e.children,n=e.fallback,a=e.matchStrategy;if(v().hasPermissions(t,a)&&r)return r;return null!==n&&void 0!==n?n:null},t.RbacProvider=function(e){var t=e.children,r=m();return a.default.createElement(p.Provider,{value:r},t)},t.RoleContext=void 0,t.useStoreUserRole=m,t.useUserRole=v;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),o=r(57),i=r(1214),u=r(141),c=r(1216),s=r(583);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var d={keycloak:i.adapter};var f=new s.UserRole,p=(0,a.createContext)(f);function m(){var e,t,r=(0,o.useSelector)((function(e){return(0,c.getExtraData)(e)})).roles,n=null!==(e=(0,u.getConfig)("rbacStrategy"))&&void 0!==e?e:"keycloak";return null!==(t=(0,d[n])(r))&&void 0!==t?t:f}function v(){return(0,a.useContext)(p)}t.RoleContext=p},1214:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeycloakRoles=t.parseFHirRoles=t.adapter=void 0;var a=n(r(90)),o=n(r(1215)),i=r(582),u=r(583),c={GET:i.Permit.READ,POST:i.Permit.CREATE,PUT:i.Permit.UPDATE,DELETE:i.Permit.DELETE,MANAGE:i.Permit.MANAGE},s=function(e){var t=e.split("_");if(!(t.length<2)){var r,n=(0,o.default)(t),a=n[0],s=n.slice(1).join("_"),l=(r=s,i.FhirResources.filter((function(e){return e.toUpperCase()===r.toUpperCase()}))[0]),d=c[a.toUpperCase()];return l&&d?new u.UserRole(l,d):void 0}};t.parseFHirRoles=s;var l={"realm-admin":new u.UserRole(["iam_group","iam_role","iam_user"],i.Permit.MANAGE),"view-users":new u.UserRole(["iam_user"],i.Permit.READ),"manage-users":new u.UserRole(["iam_group","iam_role","iam_user"],i.Permit.MANAGE),"query-groups":new u.UserRole(["iam_group"],i.Permit.READ),"query-users":new u.UserRole(["iam_user"],i.Permit.READ)},d=function(e){return l[e]};t.parseKeycloakRoles=d;var f={realmAccess:[],clientRoles:{}};t.adapter=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=null!==(e=r.realmAccess)&&void 0!==e?e:[],o=[];Object.values(null!==(t=r.clientRoles)&&void 0!==t?t:{}).forEach((function(e){n=[].concat((0,a.default)(n),(0,a.default)(e))}));var i=[];return n.forEach((function(e){var t=d(e);void 0===t&&(t=s(e)),t?i.push(t):o.push(e)})),o.length>0&&console.warn("Could not understand the following roles: ".concat(o.join(", "))),u.UserRole.combineRoles(i)}},1217:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateRoute=t.LOGIN_REDIRECT_URL_PARAM=void 0;var a=n(r(70)),o=n(r(79)),i=n(r(26)),u=r(108),c=n(r(0)),s=r(57),l=r(38),d=r(141),f=r(91),p=r(645),m=["component","disableLoginProtection","redirectPath","permissions"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=(0,d.getAllConfigs)(),E="next";t.LOGIN_REDIRECT_URL_PARAM=E;var O=function(e){var t=y(y({},e),{},{keycloakBaseURL:g.keycloakBaseURL,opensrpBaseURL:g.opensrpBaseURL,fhirBaseURL:g.fhirBaseURL}),r=t.component,n=t.disableLoginProtection,i=t.redirectPath,d=t.permissions,v=(0,o.default)(t,m),O=r,h=(0,l.useRouteMatch)(),b=(0,l.useLocation)(),P=(0,s.useSelector)((function(e){return(0,u.isAuthenticated)(e)})),_=h.path,R=new URLSearchParams(b.search);R.set(E,_);var T="".concat(i,"?").concat(R.toString());return!0===P||!0===n?c.default.createElement(l.Route,v,(function(e){return c.default.createElement(f.RbacCheck,{permissions:d,fallback:c.default.createElement(p.UnauthorizedPage,{title:"403",errorMessage:"Sorry, you are not authorized to access this page"})},c.default.createElement(O,(0,a.default)({},e,t)))})):c.default.createElement(l.Redirect,{to:T})};t.PrivateRoute=O,O.defaultProps={disableLoginProtection:!1,redirectPath:"/login",permissions:[]}},1219:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getColumns=t.QuestionnaireList=t.NamesColumnCustomRenderLink=t.NamesColumnCustomRender=void 0;var a=n(r(70)),o=n(r(26)),i=n(r(0)),u=r(97),c=r(22),s=r(584),l=r(32),d=r(66),f=r(106),p=r(746),m=r(752);r(1237);var v=r(91),y=function(e){var t,r;return i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Link,{to:"".concat(s.QUEST_FORM_VIEW_URL,"/").concat(e.id,"/").concat(s.questionnaireResourceType)},null!==(t=null!==(r=e.title)&&void 0!==r?r:e.id)&&void 0!==t?t:""))};t.NamesColumnCustomRenderLink=y;var g=function(e){var t,r;return i.default.createElement(i.default.Fragment,null,null!==(t=null!==(r=e.title)&&void 0!==r?r:e.id)&&void 0!==t?t:"")};t.NamesColumnCustomRender=g;var E=function(e,t){return[{title:e("Name/Id"),render:t.hasPermissions("QuestionnaireResponse.create")?y:g,width:"20%"},{title:e("Status"),dataIndex:"status"},{title:e("Publisher"),dataIndex:"publisher"},{title:e("Version"),dataIndex:"version"},{title:e("date"),dataIndex:"date",render:function(t){return e("{{val, datetime}}",{val:new Date(t)})}},{title:e("Actions"),render:function(t){return i.default.createElement(v.RbacCheck,{permissions:["QuestionnaireResponse.read"]},i.default.createElement(u.Link,{to:"".concat(s.QUEST_RESPONSE_VIEW_URL,"/").concat(t.id)},e("View Questionnaire Responses")))},width:"20%"}]};t.getColumns=E;var O=function(e){return e?(0,o.default)({},"title:contains","".concat(e,",name:contains=").concat(e)):{}};t.QuestionnaireList=function(e){var t,r=e.fhirBaseURL,n=(0,m.useTranslation)().t,o=(0,c.useSimpleTabularView)(r,s.questionnaireResourceType,O),u=o.searchFormProps,y=o.tablePaginationProps,g=o.queryValues,h=(0,v.useUserRole)(),b=g.data,P=g.isFetching,_=g.isLoading,R=g.error,T=E(n,h),S={datasource:(null!==(t=null===b||void 0===b?void 0:b.records)&&void 0!==t?t:[]).map(p.parseQuestionnaire),columns:T,loading:P||_,pagination:y};if(R&&!b)return i.default.createElement(c.BrokenPage,{errorMessage:R.message});var j=n("Questionnaire list view");return i.default.createElement("div",{className:"content-section fhir-resource-container"},i.default.createElement(f.Helmet,null,i.default.createElement("title",null,j)),i.default.createElement(c.PageHeader,{title:j}),i.default.createElement(l.Row,{className:"list-view"},i.default.createElement(l.Col,{className:"main-content"},i.default.createElement("div",{className:"main-content__header"},i.default.createElement(c.SearchForm,(0,a.default)({},u,{"data-testid":"search-form"})),i.default.createElement(v.RbacCheck,{permissions:["QuestionnaireResponse.create"]},i.default.createElement(l.Button,{type:"primary",disabled:!0},i.default.createElement(d.PlusOutlined,null),n("Create questionnaire")))),i.default.createElement(c.TableLayout,S))))}},1220:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseQuestionnaireResponse=void 0;var a=n(r(26));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.parseQuestionnaireResponse=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function(e){var t,r,n=e.item,a=e.id,o=e.basedOn,i=e.partOf,u=e.questionnaire,c=e.subject,s=e.authored,l=e.author,d=e.source,f=e.questionnaire,p=null!==(t=null===f||void 0===f?void 0:f.split("/"))&&void 0!==t?t:[],m=p.findIndex((function(e){return"_history"===e}));return m>0&&(r=p[m+1]),{id:a,basedOn:o,partOf:i,questionnaire:u,subject:c,authoredDateTime:s,author:l,source:d,rootItems:n,questionnaireVersion:r}}(e))}},1221:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseQuestionnaire=t.Questionnaire=void 0;var a=n(r(26)),o=n(r(0)),i=r(1222),u=r(1223);r(1224);var c=r(32),s=n(r(1225));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=c.Collapse.Panel,p=function(e){return d(d({},function(e){return{status:e.status,dateTime:e.date}}(e)),function(e){var t,r,n=e.item,a=e.id,o=e.text,i=e.version,u=e.subjectType,c=e.publisher,s=e.effectivePeriod,l=e.lastReviewDate,d=e.date,f=e.description;"generated"===(null===o||void 0===o?void 0:o.status)&&(r=o.div);var p=e.title;return{id:a,narrativePreview:r,title:p=null!==(t=p)&&void 0!==t?t:a,rootItems:n,version:i,subjectType:null===u||void 0===u?void 0:u.join(","),publisher:c,effectivePeriod:s,lastReviewDate:l,date:d,description:f}}(e))};t.parseQuestionnaire=p;t.Questionnaire=function(e){var t=e.resource,r=p(t),n=r.title,a=r.narrativePreview,l={title:n,publisher:r.publisher,description:r.description,date:r.date,version:r.version,subjectType:r.subjectType,lastReviewDate:r.lastReviewDate,effectivePeriod:r.effectivePeriod};return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.QuestionnaireDetails,l),o.default.createElement(c.Collapse,{className:"questionnaireItemPreview"},o.default.createElement(f,{header:"Preview items",key:"1"},a?(0,s.default)(a):o.default.createElement(u.QItems,{qItems:t.item}))))}},1222:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionnaireDetails=void 0;var a=r(32),o=n(r(0)),i=r(66),u=r(22),c=r(747);t.QuestionnaireDetails=function(e){var t=e.date,r=e.title,n=e.version,s=e.subjectType,l=e.publisher,d=e.effectivePeriod,f=e.lastReviewDate,p=e.description,m=(0,c.useTranslation)().t,v={};return t&&(v[m("Last Changed:")]=m("{{val, datetime}}",{val:new Date(t)})),n&&(v[m("Version:")]=n),s&&(v[m("Subject type:")]=s),l&&(v[m("Publisher:")]=l),null!==d&&void 0!==d&&d.start&&(v[m("Effective period start:")]=m("{{val, datetime}}",{val:new Date(d.start)})),null!==d&&void 0!==d&&d.end&&(v[m("Effective period end:")]=m("{{val, datetime}}",{val:new Date(d.end)})),f&&(v[m("Last reviewed date:")]=m("{{val, datetime}}",{val:new Date(f)})),o.default.createElement("div",{className:"resourceDetails"},o.default.createElement("div",{className:"resourceDetails-avatar"},o.default.createElement(a.Avatar,{icon:o.default.createElement(i.FormOutlined,null),className:"resourceDetails-avatar__icon"})),o.default.createElement("div",{className:"resourceDetails-info"},o.default.createElement("h4",null,r),o.default.createElement("div",{className:"resourceDetails-meta"},o.default.createElement("div",{className:"resourceDetails-info__key-value"},o.default.createElement(u.KeyValueGrid,v))),p?o.default.createElement("div",{className:"resourceDetails-description"},o.default.createElement(u.SingleKeyNestedValue,{Description:p})):null))}},1223:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.QItems=void 0;var a=n(r(0)),o=r(32),i=r(747),u=o.Typography.Text,c=function e(t){var r=t.qItems,n=(0,i.useTranslation)().t;return Array.isArray(r)&&0!==r.length?a.default.createElement(a.default.Fragment,null,r.map((function(t,r){var i,c,l=null!==(i=t.linkId)&&void 0!==i?i:"",d=t.text,f=null!==(c=t.item)&&void 0!==c?c:[],p="group"===t.type;return a.default.createElement("ul",{key:"item-".concat(r),className:"questionnaireItemsList"},a.default.createElement("li",{className:"questionnaireItemsList-title","data-testid":"linkId-".concat(t.linkId)},a.default.createElement(u,null,d),"\xa0",a.default.createElement(o.Tag,{color:"default"},n("linkId: {{linkId}}",{linkId:l})),a.default.createElement(o.Tag,{color:"default"},n("type: {{itemType}}",{itemType:t.type}))),!p&&a.default.createElement("li",null,a.default.createElement(s,{questions:f})),p&&a.default.createElement("li",null,a.default.createElement(e,{qItems:f})))}))):null};t.QItems=c;var s=function(e){var t=e.questions,r=(0,i.useTranslation)().t;return Array.isArray(t)&&0!==t.length?a.default.createElement("ul",{className:"questionnaireItemsList__questions-list"},t.map((function(e,t){var n=void 0===e.linkId||null===e.linkId,i=e.type,u=e.text;return a.default.createElement("li",{key:"item-".concat(t),"data-testid":"linkId-".concat(e.linkId)},u,n?a.default.createElement(a.default.Fragment,null,"\xa0",a.default.createElement(o.Tag,{color:"default"},r("linkId: {{linkId}}",{linkId:e.linkId})),a.default.createElement(o.Tag,{color:"default"},r("type: {{itemType}}",{itemType:i}))):null,e.item?a.default.createElement(c,{qItems:e.item}):null)}))):null}},1224:function(e,t,r){},1237:function(e,t,r){},1238:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.qrListRouteKey=t.QuestionnaireResponseList=void 0;var a=n(r(0)),o=r(97),i=r(22),u=r(584),c=r(67),s=r(32),l=r(746),d=r(66),f=r(752),p=r(91);t.qrListRouteKey="id";t.QuestionnaireResponseList=function(e){var t,r=e.fhirBaseURL,n=(0,o.useParams)().id,m=(0,f.useTranslation)().t,v=(0,o.useHistory)(),y=(0,c.useQuery)([u.questionnaireResourceType,n],(function(){return new i.FHIRServiceClass(r,u.questionnaireResourceType).read(n)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),g=y.isLoading,E=y.data,O=y.error,h={questionnaire:n},b=(0,i.useSimpleTabularView)(r,u.questionnaireResponseResourceType,h),P=b.tablePaginationProps,_=b.queryValues,R=_.data,T=_.isFetching,S=_.isLoading;if(g)return a.default.createElement(s.Spin,{size:"large",className:"custom-spinner"});if(O&&!E)return a.default.createElement(i.BrokenPage,{errorMessage:m("Problem loading questionnaire")});if(!E)return a.default.createElement(i.Resource404,null);var j=function(e){return[{title:e("Submission Id"),width:"30%",dataIndex:"id"},{title:e("Date authored"),dataIndex:"authoredDateTime",render:function(t){return e("{{val, datetime}}",{val:new Date(t)})}},{title:e("QuestionnaireVersion"),dataIndex:"questionnaireVersion"},{title:e("Actions"),render:function(t){return a.default.createElement(p.RbacCheck,{permissions:["QuestionnaireResponse.update"]},a.default.createElement(o.Link,{to:"".concat(u.QUEST_FORM_VIEW_URL,"/").concat(t.id,"/").concat(u.questionnaireResponseResourceType)},e("Edit")))},width:"20%"}]}(m),C={datasource:(null!==(t=null===R||void 0===R?void 0:R.records)&&void 0!==t?t:[]).map(l.parseQuestionnaireResponse),columns:j,loading:T||S,pagination:P};return a.default.createElement("div",{className:"content-section fhir-resource-container"},a.default.createElement(l.Questionnaire,{resource:E}),",",a.default.createElement(s.Row,{className:"list-view"},a.default.createElement(s.Col,{className:"main-content"},a.default.createElement(p.RbacCheck,{permissions:["QuestionnaireResponse.create"]},a.default.createElement("div",{className:"main-content__header flex-right"},a.default.createElement(s.Button,{type:"primary",onClick:function(){return v.push("".concat(u.QUEST_FORM_VIEW_URL,"/").concat(E.id,"/").concat(u.questionnaireResourceType))}},a.default.createElement(d.PlusOutlined,null),m("Fill form")))),a.default.createElement(i.TableLayout,C))))}},1239:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.HealthCareAddEdit=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(0)),u=r(106),c=r(1240),s=r(38),l=r(306),d=r(233),f=r(62),p=r(22),m=r(32),v=r(67),y=r(753),g=r(410);t.HealthCareAddEdit=function(e){var t,r,n=e.fhirBaseURL,E=(0,s.useParams)().id,O=(0,g.useTranslation)().t,h=(0,v.useQuery)([l.healthCareServiceResourceType,E],(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new p.FHIRServiceClass(n,l.healthCareServiceResourceType).read(E));case 1:case"end":return e.stop()}}),e)}))),{enabled:!!E}),b=(0,v.useQuery)([d.organizationResourceType],(function(){return(0,p.loadAllResources)(n,d.organizationResourceType)}),{select:function(e){return(0,p.getResourcesFromBundle)(e)},onError:function(){return(0,f.sendErrorNotification)(O("Unable to fetch organizations"))}});if(!h.isIdle&&h.isLoading||b.isLoading)return i.default.createElement(m.Spin,{size:"large",className:"custom-spinner"});if(h.error&&!h.data)return i.default.createElement(p.BrokenPage,{errorMessage:h.error.message});var P=(0,y.getHealthCareFormFields)(h.data),_=h.data?O("Edit team | {{name}}",{name:null!==(t=h.data.name)&&void 0!==t?t:""}):O("Create team");return i.default.createElement("section",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,_)),i.default.createElement(p.PageHeader,{title:_}),i.default.createElement("div",{className:"bg-white p-5"},i.default.createElement(c.HealthCareForm,{fhirBaseUrl:n,initialValues:P,organizations:null!==(r=b.data)&&void 0!==r?r:[],cancelUrl:l.LIST_HEALTHCARE_URL,successUrl:l.LIST_HEALTHCARE_URL})))}},1240:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.HealthCareForm=void 0;var a=n(r(70)),o=n(r(0)),i=r(32),u=r(306),c=r(62),s=r(67),l=r(22),d=r(38),f=r(753),p=r(410),m=i.Form.Item,v=function(e){var t=e.fhirBaseUrl,r=e.initialValues,n=e.disabled,v=e.cancelUrl,y=e.successUrl,g=e.organizations,E=(0,s.useQueryClient)(),O=(0,d.useHistory)(),h=(0,p.useTranslation)().t,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#";return O.push(e)},P=(0,s.useMutation)((function(e){var n=(0,f.generateHealthCarePayload)(e,g,r);return(0,f.postPutHealthCareService)(t,n)}),{onError:function(e){(0,c.sendErrorNotification)(e.message)},onSuccess:function(){(0,c.sendSuccessNotification)(h("Health care service updated successfully")),E.invalidateQueries([u.healthCareServiceResourceType]).catch((function(){(0,c.sendInfoNotification)(h("Failed to refresh data, please refresh the page"))})),b(y)}}),_=P.mutate,R=P.isLoading,T=[{label:h("Inactive"),value:!1},{label:h("active"),value:!0}],S=(0,f.getOrgSelectOptions)(g),j=(0,f.validationRulesFactory)(h);return o.default.createElement(i.Form,(0,a.default)({requiredMark:!1},l.formItemLayout,{onFinish:function(e){_(e)},initialValues:r}),o.default.createElement(m,{hidden:!0,id:"id",name:u.id,label:h("Id")},o.default.createElement(i.Input,{disabled:!0})),o.default.createElement(m,{hidden:!0,id:"identifier",name:u.identifier,label:h("Identifier")},o.default.createElement(i.Input,{disabled:!0})),o.default.createElement(m,{id:"name",name:u.name,rules:j.name,label:h("Name")},o.default.createElement(i.Input,{disabled:n.includes(u.name),placeholder:h("Name")})),o.default.createElement(m,{id:"active",rules:j.active,name:u.active,label:h("Status")},o.default.createElement(i.Radio.Group,{disabled:n.includes(u.active),options:T})),o.default.createElement(m,{id:"comment",rules:j.comment,name:u.comment,label:h("Comment")},o.default.createElement(i.Input.TextArea,{disabled:n.includes(u.comment),rows:2,placeholder:h("Enter comment")})),o.default.createElement(m,{id:"extraDetails",rules:j.extraDetails,name:u.extraDetails,label:h("Extra details")},o.default.createElement(i.Input.TextArea,{disabled:n.includes(u.extraDetails),rows:4,placeholder:h("Enter extra details")})),o.default.createElement(m,{id:"providedBy",name:u.providedBy,rules:j.providedBy,label:h("Provided by")},o.default.createElement(i.Select,{disabled:n.includes(u.providedBy),placeholder:h("Select organization"),options:S,showSearch:!0,filterOption:f.orgFilterFunction})),o.default.createElement(m,l.tailLayout,o.default.createElement(i.Space,null,o.default.createElement(i.Button,{type:"primary",id:"submit-button",disabled:R,htmlType:"submit"},h(R?"Saving":"save")),o.default.createElement(i.Button,{id:"cancel-button",onClick:function(){b(v)}},h("Cancel")))))};t.HealthCareForm=v,v.defaultProps={initialValues:{},disabled:[]}},1241:function(e,t,r){},1242:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AddEditOrganization=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(0)),u=r(106),c=r(1243),s=r(38),l=r(204),d=r(62),f=r(32),p=r(22),m=r(67),v=r(587),y=r(273),g=r(141),E=function(e){var t,r,n,E,O=e.fhirBaseURL,h=(0,s.useParams)().id,b=(0,y.useTranslation)().t,P=(0,g.getConfig)("practToOrgAssignmentStrategy"),_=(0,m.useQuery)([l.organizationResourceType,h],(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new p.FHIRServiceClass(O,l.organizationResourceType).read(h));case 1:case"end":return e.stop()}}),e)}))),{enabled:!!h}),R=(0,m.useQuery)([l.practitionerResourceType],(function(){return(0,p.loadAllResources)(O,l.practitionerResourceType,{active:!0})}),{select:function(e){return(0,p.getResourcesFromBundle)(e)},onError:function(){return(0,d.sendErrorNotification)(b("There was a problem fetching practitioners"))}}),T=(0,m.useQuery)([l.practitionerResourceType,l.organizationResourceType,h],(function(){return(0,p.loadAllResources)(O,l.practitionerRoleResourceType,{active:!0})}),{onError:function(){return(0,d.sendErrorNotification)(b("There was a problem fetching assigned practitioners"))},select:function(e){return(0,p.getResourcesFromBundle)(e)},enabled:!!h});if(_.isLoading||_.isFetching||R.isLoading||R.isFetching||T.isLoading||T.isFetching)return i.default.createElement(f.Spin,{size:"large",className:"custom-spinner"});if(_.error&&!_.data)return i.default.createElement(p.BrokenPage,{errorMessage:_.error.message});var S=(null!==(t=T.data)&&void 0!==t?t:[]).filter((function(e){var t;return(null===(t=e.organization)||void 0===t?void 0:t.reference)==="".concat(l.organizationResourceType,"/").concat(_.data.id)})),j=(0,v.getOrgFormFields)(_.data,S),C=_.data?b("Edit team | {{teamName}}",{teamName:null!==(r=_.data.name)&&void 0!==r?r:""}):b("Create team");return i.default.createElement("section",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,C)),i.default.createElement(p.PageHeader,{title:C}),i.default.createElement("div",{className:"bg-white p-5"},i.default.createElement(c.OrganizationForm,{fhirBaseUrl:O,initialValues:j,practitioners:null!==(n=R.data)&&void 0!==n?n:[],existingPractitionerRoles:S,allPractitionerRoles:null!==(E=T.data)&&void 0!==E?E:[],cancelUrl:l.ORGANIZATION_LIST_URL,successUrl:l.ORGANIZATION_LIST_URL,configuredPractAssignmentStrategy:P})))};t.AddEditOrganization=E;var O=E;t.default=O},1243:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationForm=void 0;var a=n(r(70)),o=n(r(0)),i=r(32),u=r(204),c=r(67),s=r(273),l=r(1244),d=r(62),f=r(38),p=r(587),m=r(22),v=i.Form.Item,y=function(e){var t=e.fhirBaseUrl,r=e.initialValues,n=e.disabled,y=e.cancelUrl,g=e.successUrl,E=e.practitioners,O=e.existingPractitionerRoles,h=e.allPractitionerRoles,b=e.configuredPractAssignmentStrategy,P=(0,c.useQueryClient)(),_=(0,f.useHistory)(),R=(0,s.useTranslation)().t,T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#";return _.push(e)},S=(0,c.useMutation)((function(e){var n=(0,p.generateOrgPayload)(e);return(0,l.postPutOrganization)(t,n).then((function(n){return(0,d.sendSuccessNotification)(R("Organization updated successfully")),(0,l.updatePractitionerRoles)(t,e,r,n,E,O).then((function(){return P.invalidateQueries([u.practitionerResourceType,u.organizationResourceType,n.id])})).then((function(){(0,d.sendSuccessNotification)(R("Practitioner assignments updated successfully"))}))}))}),{onError:function(){(0,d.sendErrorNotification)(R("There was a problem updating organization"))},onSuccess:function(){P.invalidateQueries([u.organizationResourceType]).catch((function(){(0,d.sendInfoNotification)(R("Failed to refresh data, please refresh the page"))})),T(g)}}),j=S.mutate,C=S.isLoading,A=[{label:R("active"),value:!0},{label:R("Inactive"),value:!1}],w=(0,p.getPractitionerOptions)(E,O,h,b),L=(0,p.validationRulesFactory)(R);return o.default.createElement(i.Form,(0,a.default)({},m.formItemLayout,{onFinish:function(e){j(e)},initialValues:r}),o.default.createElement(v,{name:u.id,label:R("Id"),id:"id",hidden:!0},o.default.createElement(i.Input,null)),o.default.createElement(v,{name:u.identifier,label:R("Identifier"),id:"identifier",hidden:!0},o.default.createElement(i.Input,null)),o.default.createElement(v,{name:u.name,rules:L.name,id:"name",label:R("Name")},o.default.createElement(i.Input,{placeholder:R("Enter team name")})),o.default.createElement(v,{name:u.alias,rules:L.alias,id:"alias",label:R("Alias")},o.default.createElement(i.Input,{placeholder:R("Enter team alias")})),o.default.createElement(v,{id:"status",name:u.active,label:"Status",rules:L.status},o.default.createElement(i.Radio.Group,{disabled:n.includes(u.active),options:A})),o.default.createElement(v,{hidden:!0,id:"type",name:u.type,label:"Type",rules:L.type},o.default.createElement(i.Select,{disabled:n.includes(u.type),options:(0,p.getOrgTypeSelectOptions)()})),o.default.createElement(v,{id:"members",name:u.members,label:R("Practitioners"),rules:L.members},o.default.createElement(i.Select,{allowClear:!0,mode:"multiple",optionFilterProp:"label",placeholder:R("Select user (practitioners only)"),options:w,filterOption:l.practitionersFilterFunction})),o.default.createElement(v,m.tailLayout,o.default.createElement(i.Space,null,o.default.createElement(i.Button,{type:"primary",id:"submit-button",disabled:C,htmlType:"submit"},R(C?"Saving":"save")),o.default.createElement(i.Button,{id:"cancel-button",onClick:function(){T(y)}},R("Cancel")))))};t.OrganizationForm=y,y.defaultProps={initialValues:{},disabled:[]}},1244:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.updatePractitionerRoles=t.practitionersFilterFunction=t.postPutOrganization=void 0;var a=n(r(45)),o=n(r(90)),i=n(r(26)),u=n(r(79)),c=n(r(53)),s=r(22),l=r(51),d=r(204),f=r(181),p=r(94),m=["organization"];function v(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.postPutOrganization=function(e,t){return new s.FHIRServiceClass(e,d.organizationResourceType).update(t)};t.practitionersFilterFunction=function(e,t){return!(null===t||void 0===t||!t.label.toLowerCase().includes(e.toLowerCase()))};var O=function(e){return(0,l.transform)(e,(function(e,t){e[t]=t}),{})},h=function(){var e=(0,c.default)(a.default.mark((function e(t,r,n,i,c,y){var g,h,b,P,_,R,T,S,j,C,A,w,L,U,k,I,N,D,M,x,F,B;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=i.id,P=null!==(g=r.members)&&void 0!==g?g:[],_=null!==(h=n.members)&&void 0!==h?h:[],R=O(P),T=O(_),S=(0,l.keyBy)(c,(function(e){return"".concat(d.practitionerResourceType,"/").concat(e.id)})),j=[],C=[],P.forEach((function(e){T[e]||j.push(e)})),_.forEach((function(e){R[e]||C.push(e)})),A=(0,l.transform)(y,(function(e,t){var r,n,a=null===(r=t.organization)||void 0===r?void 0:r.reference;e[a]||(e[a]={}),e[a][null===(n=t.practitioner)||void 0===n?void 0:n.reference]=t}),{}),w=new s.FHIRServiceClass(t,d.practitionerRoleResourceType),L=C.map((function(e){var t=b,r=A["".concat(d.organizationResourceType,"/").concat(t)][e],n=(r.organization,(0,u.default)(r,m));return function(){return w.update(n)}})),U=[],!(j.length>0)){e.next=25;break}return k={reference:"".concat(d.organizationResourceType,"/").concat(b),display:i.name},e.next=18,(0,s.loadAllResources)(t,d.practitionerRoleResourceType,{practitioner:j.join()}).then((function(e){return(0,s.getResourcesFromBundle)(e)}));case 18:I=e.sent,N=I.map((function(e){return E(E({},e),{},{organization:k})})).map((function(e){return function(){return w.update(e)}})),U.push.apply(U,(0,o.default)(N)),D=I.map((function(e){var t;return null===(t=e.practitioner)||void 0===t?void 0:t.reference})),M=j.filter((function(e){return!D.includes(e)})),x=v(M);try{for(B=function(){var e,t=F.value,r=(0,f.v4)(),n=S[t],a=null===(e=n.identifier)||void 0===e?void 0:e.find((function(e){return"secondary"===e.use})),i=(0,s.getObjLike)(n.name,"use",d.HumanNameUseCodes.OFFICIAL,!0)[0],u={resourceType:d.practitionerRoleResourceType,id:r,identifier:[{use:s.IdentifierUseCodes.OFFICIAL,value:r}].concat((0,o.default)(a?[a]:[])),active:!0,practitioner:{reference:t,display:(0,s.parseFhirHumanName)(i)},organization:k,code:[{coding:[{system:"http://snomed.info/sct",code:p.PRACTITIONER_USER_TYPE_CODE,display:"Assigned practitioner"}]}]};U.push((function(){return w.update(u)}))},x.s();!(F=x.n()).done;)B()}catch(a){x.e(a)}finally{x.f()}case 25:return e.abrupt("return",Promise.all([].concat((0,o.default)(L),U).map((function(e){return e()}))));case 26:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}();t.updatePractitionerRoles=h},1245:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.UserList=t.ConnectedUserList=void 0;var o=n(r(45)),i=n(r(26)),u=n(r(70)),c=n(r(53)),s=n(r(52)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),d=r(22),f=r(32),p=r(168),m=r(57),v=n(r(192)),y=r(66),g=r(404),E=r(133),O=r(195),h=r(1247),b=r(108),P=r(38),_=r(62),R=r(1248),T=r(1250),S=r(91);function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}v.default.register(g.reducerName,g.reducer);var w={serviceClass:p.KeycloakService,fetchKeycloakUsersCreator:g.fetchKeycloakUsers,removeKeycloakUsersCreator:g.removeKeycloakUsers,keycloakUsers:[],keycloakBaseURL:"",opensrpBaseURL:"",extraData:{},usersPageSize:20};t.defaultProps=w;var L=function(e){var t,r=e.serviceClass,n=e.fetchKeycloakUsersCreator,a=e.removeKeycloakUsersCreator,i=e.keycloakBaseURL,p=e.opensrpBaseURL,m=e.extraData,v=e.usersPageSize,g=(0,P.useHistory)(),b=(0,O.useTranslation)().t,j=null!==(t=(0,d.getQueryParams)(e.location)[E.SEARCH_QUERY_PARAM])&&void 0!==t?t:"",C=(0,l.useState)(),w=(0,s.default)(C,2),L=w[0],U=w[1],k=(0,l.useState)(null),I=(0,s.default)(k,2),N=I[0],D=I[1],M=(0,l.useState)(!1),x=(0,s.default)(M,2),F=x[0],B=x[1];function H(){return(H=(0,c.default)(o.default.mark((function e(t,a,u){var c,s,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={first:t*a-a,max:a},u&&(c=A(A({},c),{},{search:j})),s=new r(E.KEYCLOAK_URL_USERS,i),e.next=5,s.list(c);case 5:return l=e.sent,n(l,!0),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=j&&j.length,K=function(){var e=(0,c.default)(o.default.mark((function e(t){var r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new d.OpenSRPService(E.OPENSRP_CREATE_PRACTITIONER_ENDPOINT,p),e.prev=1,e.next=4,r.read(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),(0,_.sendErrorNotification)(b("There was a problem fetching Practitioner tied to this User")),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,c.default)(o.default.mark((function e(t){var r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new d.OpenSRPService(E.ORGANIZATION_BY_PRACTITIONER,p),e.prev=1,e.next=4,r.read(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),(0,_.sendErrorNotification)(b("There was a problem fetching teams assigned to Practitioner")),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(),B(!0),K(t.id).then((function(e){e?z(e.identifier).then((function(r){D({keycloakUser:t,practitioner:e,assignedTeams:r})})).catch((function(){(0,_.sendErrorNotification)(b("There was a problem fetching assigned teams"))})):D({keycloakUser:t,practitioner:e,assignedTeams:[]})})).catch((function(){(0,_.sendErrorNotification)(b("There was a problem fetching practitioner"))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){D(null),B(!1)};return l.default.createElement("section",{className:"content-section"},l.default.createElement(d.PageHeader,{title:b("User Management")}),l.default.createElement(f.Row,{className:"list-view"},l.default.createElement(f.Col,{className:"main-content",span:F?19:24},l.default.createElement("div",{className:"main-content__header"},l.default.createElement(d.SearchForm,{defaultValue:(0,d.getQueryParams)(e.location)[E.SEARCH_QUERY_PARAM],onChange:(0,d.createChangeHandler)(E.SEARCH_QUERY_PARAM,e),size:"middle"}),l.default.createElement(S.RbacCheck,{permissions:["iam_user.create"]},l.default.createElement(f.Space,{style:{marginBottom:16,float:"right"}},l.default.createElement(f.Button,{type:"primary",className:"create-user",onClick:function(){return g.push(E.URL_USER_CREATE)}},l.default.createElement(y.PlusOutlined,null),b("Add User"))))),l.default.createElement(f.Space,null,l.default.createElement(d.PaginateData,{queryFn:function(e,t,r){return H.apply(this,arguments)},onError:function(){return(0,_.sendErrorNotification)(b("There was a problem fetching Users"))},queryPram:{searchParam:j},pageSize:v,queryid:E.UserQueryId,total:function(){var e=new r("".concat(E.KEYCLOAK_URL_USERS_COUNT),i),t=void 0;return G&&(t={search:j}),e.list(t)}},(function(e){return l.default.createElement(d.TableLayout,(0,u.default)({},e,{columns:(0,h.getTableColumns)(b,L),dataKeyAccessor:"id",onChange:function(e,t,r){return U(r)},actions:{title:"Actions",render:function(e,t){var r={removeKeycloakUsersCreator:a,keycloakBaseURL:i,opensrpBaseURL:p,record:t,extraData:m,setDetailsCallback:V};return l.default.createElement(R.TableActions,r)}}}))})))),F?l.default.createElement(f.Col,{className:"pl-3",span:5},l.default.createElement(T.UserDetails,(0,u.default)({onClose:function(){return Q()}},N))):null))};t.UserList=L,L.defaultProps=w;var U={fetchKeycloakUsersCreator:g.fetchKeycloakUsers,removeKeycloakUsersCreator:g.removeKeycloakUsers},k=(0,m.connect)((function(e){return{extraData:(0,b.getExtraData)(e)}}),U)(L);t.ConnectedUserList=k},1246:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.customFetch=t.KeycloakService=t.KeycloakAPIService=t.KEYCLOAK_API_BASE_URL=void 0,t.getDefaultHeaders=h,t.getFetchOptions=b,t.getFilterParams=function(e){return Object.entries(e).map((function(e){var t=(0,f.default)(e,2),r=t[0],n=t[1];return"".concat(r,":").concat(n)})).join(",")};var a=n(r(45)),o=n(r(80)),i=n(r(344)),u=n(r(241)),c=n(r(49)),s=n(r(50)),l=n(r(26)),d=n(r(53)),f=n(r(52)),p=n(r(248)),m=r(22),v=r(754);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O="http://192.168.1.8:8080/auth/realms/";function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Bearer",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json;charset=UTF-8";return{accept:t,authorization:"".concat(r," ").concat(e),"content-type":n}}function b(e,t,r){return{headers:h(t),method:r}}t.KEYCLOAK_API_BASE_URL=O;var P=function(){var e=(0,d.default)(a.default.mark((function e(){var t=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch.apply(void 0,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),(0,v.throwNetworkError)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();t.customFetch=P;var _=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.handleSessionOrTokenExpiry,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(new AbortController).signal;(0,c.default)(this,e),(0,l.default)(this,"accessTokenOrCallBack",void 0),(0,l.default)(this,"baseURL",void 0),(0,l.default)(this,"endpoint",void 0),(0,l.default)(this,"generalURL",void 0),(0,l.default)(this,"getOptions",void 0),(0,l.default)(this,"signal",void 0),this.endpoint=n,this.getOptions=a,this.signal=o,this.baseURL=r,this.generalURL="".concat(this.baseURL).concat(this.endpoint),this.accessTokenOrCallBack=t}return(0,s.default)(e,[{key:"create",value:function(){var t=(0,d.default)(a.default.mark((function t(r){var n,o,i,u,c,s,l,d=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,o=d.length>2&&void 0!==d[2]?d[2]:"POST",i=e.getURL(this.generalURL,n),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return u=t.sent,c=E(E({},this.getOptions(this.signal,u,o)),{},{"Cache-Control":"no-cache",Pragma:"no-cache",body:JSON.stringify(r)}),t.next=9,P(i,c);case 9:if(!(s=t.sent)){t.next=16;break}if(!s.ok&&201!==s.status){t.next=13;break}return t.abrupt("return",s);case 13:return l="KeycloakAPIService create on ".concat(this.endpoint," failed, HTTP status ").concat(s.status),t.next=16,(0,v.throwHTTPError)(s,l);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=(0,d.default)(a.default.mark((function t(r){var n,o,i,u,c,s,l=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,o=l.length>2&&void 0!==l[2]?l[2]:"GET",i=e.getURL("".concat(this.generalURL,"/").concat(r),n),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return u=t.sent,t.next=8,P(i,this.getOptions(this.signal,u,o));case 8:if(!(c=t.sent)){t.next=17;break}if(!c.ok){t.next=14;break}return t.next=13,c.json();case 13:return t.abrupt("return",t.sent);case 14:return s="KeycloakAPIService read on ".concat(this.endpoint," failed, HTTP status ").concat(c.status),t.next=17,(0,v.throwHTTPError)(c,s);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,d.default)(a.default.mark((function t(r){var n,o,i,u,c,s,l,d=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,o=d.length>2&&void 0!==d[2]?d[2]:"PUT",i=e.getURL(this.generalURL,n),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return u=t.sent,c=E(E({},this.getOptions(this.signal,u,o)),{},{"Cache-Control":"no-cache",Pragma:"no-cache",body:JSON.stringify(r)}),t.next=9,P(i,c);case 9:if(!(s=t.sent)){t.next=16;break}if(!s.ok){t.next=13;break}return t.abrupt("return",{});case 13:return l="KeycloakAPIService update on ".concat(this.endpoint," failed, HTTP status ").concat(s.status),t.next=16,(0,v.throwHTTPError)(s,l);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"list",value:function(){var t=(0,d.default)(a.default.mark((function t(){var r,n,o,i,u,c,s=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:"GET",o=e.getURL(this.generalURL,r),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return i=t.sent,t.next=8,P(o,this.getOptions(this.signal,i,n));case 8:if(!(u=t.sent)){t.next=17;break}if(!u.ok){t.next=14;break}return t.next=13,u.json();case 13:return t.abrupt("return",t.sent);case 14:return c="KeycloakAPIService list on ".concat(this.endpoint," failed, HTTP status ").concat(u.status),t.next=17,(0,v.throwHTTPError)(u,c);case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=(0,d.default)(a.default.mark((function t(){var r,n,o,i,u,c,s=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:"DELETE",o=e.getURL(this.generalURL,r),t.next=5,e.processAcessToken(this.accessTokenOrCallBack);case 5:return i=t.sent,t.next=8,fetch(o,this.getOptions(this.signal,i,n));case 8:if(!(u=t.sent).ok&&204!==u.status&&200!==u.status){t.next=11;break}return t.abrupt("return",{});case 11:return c="KeycloakAPIService delete on ".concat(this.endpoint," failed, HTTP status ").concat(u.status),t.next=14,(0,v.throwHTTPError)(u,c);case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"getURL",value:function(e,t){return t?"".concat(e,"?").concat(p.default.stringify(t)):e}},{key:"processAcessToken",value:function(){var e=(0,d.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof t){e.next=4;break}return e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.KeycloakAPIService=_;var R=function(e){(0,o.default)(r,e);var t=y(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.handleSessionOrTokenExpiry,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;return(0,c.default)(this,r),t.call(this,a,n,e,o)}return(0,s.default)(r,[{key:"readFile",value:function(){var e=(0,d.default)(a.default.mark((function e(t){var n,o,i,u,c,s=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:null,o=s.length>2&&void 0!==s[2]?s[2]:"GET",i=r.getURL("".concat(this.generalURL,"/").concat(t),n),e.next=5,_.processAcessToken(this.accessTokenOrCallBack);case 5:return u=e.sent,e.next=8,fetch(i,this.getOptions(this.signal,u,o));case 8:if((c=e.sent).ok){e.next=11;break}throw new Error("KeycloakService read on ".concat(this.endpoint," failed, HTTP status ").concat(c.status));case 11:return e.next=13,c.blob();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(_);t.KeycloakService=R},1247:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTableColumns=void 0;t.getTableColumns=function(e,t){var r=[e("First Name"),e("Last Name"),e("Username")],n=[];return["firstName","lastName","username"].forEach((function(e,a){n.push({title:r[a],dataIndex:e,key:e,sorter:function(t,r){return t[e]>r[e]?-1:t[e]<r[e]?1:0},sortOrder:t&&t.columnKey===e&&t.order,ellipsis:!0})})),n}},1248:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.TableActions=void 0;var o=n(r(79)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=r(32),c=r(66),s=r(1249),l=r(97),d=r(133),f=r(67),p=r(62),m=r(195),v=r(91),y=["permissions"];function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}t.TableActions=function(e){var t=e.record,r=e.removeKeycloakUsersCreator,n=e.keycloakBaseURL,a=e.opensrpBaseURL,g=e.extraData,E=e.setDetailsCallback,O=(0,m.useTranslation)().t,h=g.user_id,b=(0,f.useQueryClient)(),P=(0,l.useHistory)(),_=i.useContext(v.RoleContext);return i.createElement(i.Fragment,null,i.createElement(l.Link,{to:"".concat(d.URL_USER_EDIT,"/").concat(t.id),key:"actions"},O("Edit")),i.createElement(u.Divider,{type:"vertical"}),i.createElement(u.Dropdown,{menu:{items:function(e){return[{key:"1",permissions:["iam_user.delete"],label:i.createElement(u.Popconfirm,{title:O("Are you sure you want to delete this user?"),okText:O("Yes"),cancelText:O("No"),onConfirm:function(){return(0,s.deleteUser)(r,n,a,e.id,O).then((function(){return b.invalidateQueries(d.UserQueryId).catch((function(){return(0,p.sendErrorNotification)(O("Failed to update data, please refresh the page to see the most recent changes"))}))}))}},h&&(e.id===h?null:i.createElement(u.Button,{"data-testid":"delete-user",danger:!0,type:"link",style:{color:"#"}},O("Delete"))))},{key:"2",permissions:["iam_user.update"],label:i.createElement(u.Button,{type:"link","data-testid":"credentials",onClick:function(){return P.push("".concat(d.URL_USER_CREDENTIALS,"/").concat(e.id,"/").concat(e.username))}},O("Credentials"))},{key:"3",permissions:[],label:i.createElement(u.Button,{type:"link",className:"viewDetails","data-testid":"viewDetails",onClick:function(){return E(e)}},O("View Details"))}].filter((function(e){return _.hasPermissions(e.permissions)})).map((function(e){e.permissions;return(0,o.default)(e,y)}))}(t)},placement:"bottomRight",arrow:!0,trigger:["click"]},i.createElement(u.Button,{type:"link",style:{padding:0,margin:0}},i.createElement(c.MoreOutlined,{"data-testid":"action-dropdown",className:"more-options",style:{fontSize:"16px",padding:0,margin:0}}))))}},1249:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUser=void 0;var a=n(r(45)),o=n(r(26)),i=n(r(53)),u=r(168),c=r(22),s=r(62),l=r(133);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(){var e=(0,i.default)(a.default.mark((function e(t,r,n,o,i){var c,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(l.OPENSRP_CREATE_PRACTITIONER_ENDPOINT,o,n).catch((function(){(0,s.sendErrorNotification)(i("There was a problem fetching practitioner"))}));case 2:if(c=e.sent){e.next=5;break}return e.abrupt("return");case 5:return d=new u.KeycloakService("".concat(l.KEYCLOAK_URL_USERS,"/").concat(o),r),e.abrupt("return",Promise.all([d.delete(),y(l.DELETE_PRACTITIONER_ROLE,l.PRACTITIONER,c,n)]).then((function(){t(),(0,s.sendSuccessNotification)(i("User deleted successfully")),(0,s.sendSuccessNotification)(i("Practitioner unassigned successfully")),(0,s.sendSuccessNotification)(i("Practitioner deactivated successfully"))})).catch((function(e){(0,s.sendErrorNotification)(i("There was a problem deleting User and Practitioner"))})));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();function m(e,t,r){return v.apply(this,arguments)}function v(){return(v=(0,i.default)(a.default.mark((function e(t,r,n){var o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new c.OpenSRPService(t+"/"+r,n),e.next=3,o.list();case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,r,n){return g.apply(this,arguments)}function g(){return(g=(0,i.default)(a.default.mark((function e(t,r,n,o){var i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new c.OpenSRPService("".concat(t).concat(n.identifier),o),u=new c.OpenSRPService(r,o),e.abrupt("return",Promise.all([i.delete(),u.update(f(f({},n),{},{active:!1}))]));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.deleteUser=p},1250:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.UserDetails=void 0;var a=n(r(0)),o=r(66),i=r(32),u=r(195);t.UserDetails=function(e){var t=e.onClose,r=e.keycloakUser,n=e.practitioner,c=e.assignedTeams,s=(0,u.useTranslation)().t;return r?a.default.createElement("div",{className:"p-4 bg-white"},a.default.createElement(i.Button,{shape:"circle",onClick:function(){return t&&t()},className:"float-right close-btn",type:"text",icon:a.default.createElement(o.CloseOutlined,null)}),a.default.createElement("div",{className:"mb-4 small mt-4"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},s("Username")),a.default.createElement("p",{className:"mb-0",id:"username"},r.username)),a.default.createElement("div",{className:"mb-4 small"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},s("Keycloak UUID")),a.default.createElement("p",{className:"mb-0",id:"keycloakId"},"".concat(r.id))),n?a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"mb-4 small"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},s("Practitioner UUID")),a.default.createElement("p",{className:"mb-0",id:"practitionerId"},"".concat(n.identifier))),a.default.createElement("div",{className:"mb-4 small"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},s("Practitioner Status")),a.default.createElement("p",{className:"mb-0",id:"practitionerStatus"},n.active?"active":"inactive"))):a.default.createElement("div",{className:"mb-4 small"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},s("Practitioner")),a.default.createElement("p",{className:"mb-0",id:"noActivePractitioner"},s("No Active Practitioner"))),a.default.createElement("div",{className:"mb-4 small"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},s("Assigned Teams")),null!==c&&void 0!==c&&c.length?c.map((function(e){return a.default.createElement("p",{key:e.identifier,className:"mb-0",id:"assignedTeam"},"".concat(e.name))})):a.default.createElement("p",{id:"noAssignedTeams"},s("No Assigned Teams")))):a.default.createElement(i.Spin,{size:"large"})}},1251:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UserGroupsList=void 0;var o=n(r(52)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=R(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=r(106),c=r(22),s=r(32),l=r(97),d=r(38),f=r(66),p=r(57),m=n(r(192)),v=r(62),y=r(168),g=r(67),E=r(405),O=r(195),h=r(133),b=r(1252),P=r(1253),_=r(91);function R(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(R=function(e){return e?r:t})(e)}m.default.register(E.reducerName,E.reducer);var T=(0,E.makeKeycloakUserGroupsSelector)(),S=function(e){var t=e.keycloakBaseURL,r=(0,p.useDispatch)(),n=(0,c.getQueryParams)(e.location)[h.SEARCH_QUERY_PARAM],a=(0,p.useSelector)((function(e){return T(e,{searchText:n})})),m=(0,i.useState)(null),R=(0,o.default)(m,2),S=R[0],j=R[1],C=(0,O.useTranslation)().t,A=(0,d.useHistory)(),w=(0,g.useQuery)(["fetchKeycloakUserGroups",h.KEYCLOAK_URL_USER_GROUPS,t],(function(){return new y.KeycloakService(h.KEYCLOAK_URL_USER_GROUPS,t).list()}),{onError:function(){return(0,v.sendErrorNotification)(C("There was a problem fetching User Groups"))},onSuccess:function(e){return r((0,E.fetchKeycloakUserGroups)(e))}}),L=w.isLoading,U=w.isError,k=(0,g.useQuery)(["loadGroupDetails",S,t],(function(){return(0,P.loadGroupDetails)(S,t)}),{enabled:null!==S,onError:function(){return(0,v.sendErrorNotification)(C("There was a problem fetching Group Details"))}}),I=k.isLoading,N=k.isError,D=k.data,M=(0,g.useQuery)([h.KEYCLOAK_URL_EFFECTIVE_ROLES,S,t],(function(){return new y.KeycloakService("".concat(h.KEYCLOAK_URL_USER_GROUPS,"/").concat(S).concat(h.KEYCLOAK_URL_EFFECTIVE_ROLES),t).list()}),{enabled:null!==S,onError:function(){return(0,v.sendErrorNotification)(C("There was a problem fetching effective roles"))}}),x=M.isLoading,F=M.isError,B=M.data,H=(0,g.useQuery)(["loadGroupMembers",S,t],(function(){return(0,P.loadGroupMembers)(S,t)}),{enabled:null!==S,onError:function(){return(0,v.sendErrorNotification)(C("There was a problem fetching Group Members"))}}),G=H.isLoading,K=H.isError,z=H.data,V={defaultValue:(0,c.getQueryParams)(e.location)[h.SEARCH_QUERY_PARAM],onChangeHandler:(0,c.createChangeHandler)(h.SEARCH_QUERY_PARAM,e)},Q=[{title:C("Name"),dataIndex:"name",sorter:function(e,t){return e.name.localeCompare(t.name)}}];if(L)return i.default.createElement(s.Spin,{"data-testid":"group-list-loader",size:"large",className:"custom-spinner"});if(U)return i.default.createElement(c.Resource404,null);var Y=function(e){return[{key:e.id,label:i.default.createElement(s.Button,{type:"link","data-testid":"view-details",onClick:function(){j(e.id)}},C("View Details"))}]};return i.default.createElement("div",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,C("User Groups"))),i.default.createElement(c.PageHeader,{title:C("User Groups")}),i.default.createElement(s.Row,{className:"list-view"},i.default.createElement(s.Col,{className:"main-content"},i.default.createElement("div",{className:"main-content__header"},i.default.createElement(c.SearchForm,V),i.default.createElement(_.RbacCheck,{permissions:["iam_group.create"]},i.default.createElement(s.Button,{type:"primary",onClick:function(){return A.push(h.URL_USER_GROUP_CREATE)}},i.default.createElement(f.PlusOutlined,null),C("New User Group")))),i.default.createElement(c.TableLayout,{id:"UserGroupsList",persistState:!0,datasource:a,columns:Q,actions:{title:C("Actions"),width:"10%",render:function(e){return i.default.createElement("span",null,i.default.createElement(_.RbacCheck,{permissions:["iam_group.update"]},i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Link,{to:"".concat(h.URL_USER_GROUP_EDIT,"/").concat(e.id),className:"m-0 p-1"},C("Edit")),i.default.createElement(s.Divider,{type:"vertical"}))),i.default.createElement(s.Dropdown,{menu:{items:Y(e)},placement:"bottomLeft",arrow:!0,trigger:["click"]},i.default.createElement(f.MoreOutlined,{className:"more-options","data-testid":"more-options"})))}}})),S?i.default.createElement(s.Col,{className:"pl-3",span:5},i.default.createElement(b.ViewDetails,{loading:I||G||x,error:N||K||F,GroupDetails:D,effectiveRoles:B,userGroupMembers:z,onClose:function(){j(null)}})):null))};t.UserGroupsList=S,S.defaultProps={keycloakBaseURL:""};var j=S;t.default=j},1252:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ViewDetails=void 0;var a=n(r(0)),o=r(32),i=r(66),u=r(22),c=r(133),s=r(97),l=r(195),d=o.Typography.Text;t.ViewDetails=function(e){var t=e.loading,r=e.error,n=e.GroupDetails,f=e.userGroupMembers,p=e.onClose,m=e.effectiveRoles,v=(0,l.useTranslation)().t;return a.default.createElement(o.Col,{className:"p-4 bg-white"},a.default.createElement(o.Button,{shape:"circle",onClick:function(){return p()},className:"float-right close-btn",type:"text",icon:a.default.createElement(i.CloseOutlined,null)}),t?a.default.createElement(o.Spin,{size:"large",className:"inline-spinner"}):!r&&n&&f?a.default.createElement(o.Space,{direction:"vertical"},a.default.createElement("div",{className:"mb-2 medium mt-2"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},v("Group uuid")),a.default.createElement("p",{className:"mb-0",id:"uuid"},n.id)),a.default.createElement("div",{className:"mb-2 medium mt-2"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},v("Name")),a.default.createElement("p",{className:"mb-0",id:"name"},n.name)),a.default.createElement("div",{className:"mb-2 medium mt-2"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},v("Roles")),a.default.createElement(o.Space,{direction:"vertical",size:1},null!==m&&void 0!==m&&m.length?m.map((function(e){return a.default.createElement(d,{key:e.name},e.name)})):a.default.createElement("p",{id:"noRealRole"},v("No assigned roles")))),a.default.createElement("div",{className:"mb-2 medium mt-2"},a.default.createElement("p",{className:"mb-0 font-weight-bold"},v("Members")),f.length?f.map((function(e){return a.default.createElement("p",{key:e.id,className:"mb-0",id:"groupMember"},a.default.createElement(s.Link,{key:e.id,to:"".concat(c.URL_USER_EDIT,"/").concat(e.id),id:"realRole"},"".concat(e.firstName," ").concat(e.lastName," (").concat(e.username,")")))})):a.default.createElement("p",{id:"noGroupMember"},v("No assigned members")))):a.default.createElement(u.Resource404,null))}},1253:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.loadGroupMembers=t.loadGroupDetails=void 0;var a=n(r(45)),o=n(r(53)),i=r(168),u=r(133),c=function(){var e=(0,o.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.KeycloakService("".concat(u.KEYCLOAK_URL_USER_GROUPS,"/").concat(t,"/members"),r),e.next=3,n.list().then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.loadGroupMembers=c;var s=function(){var e=(0,o.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.KeycloakService(u.KEYCLOAK_URL_USER_GROUPS,r),e.next=3,n.read(t).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.loadGroupDetails=s},1254:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UserRolesList=void 0,Object.defineProperty(t,"fetchAllRoles",{enumerable:!0,get:function(){return v.fetchAllRoles}});var o=n(r(52)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=r(106),c=r(32),s=r(22),l=r(57),d=n(r(192)),f=r(62),p=r(406),m=r(133),v=r(755),y=r(195);function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}d.default.register(p.reducerName,p.reducer);var E=(0,p.makeKeycloakUserRolesSelector)(),O=function(e){var t=(0,l.useDispatch)(),r=(0,s.getQueryParams)(e.location)[m.SEARCH_QUERY_PARAM],n=(0,l.useSelector)((function(e){return E(e,{searchText:r})})),a=(0,i.useState)(!0),d=(0,o.default)(a,2),p=d[0],g=d[1],O=(0,y.useTranslation)().t,h=e.keycloakBaseURL;if((0,i.useEffect)((function(){p&&(0,v.fetchAllRoles)(h,t,O).catch((function(){(0,f.sendErrorNotification)(O("There was a problem fetching roles"))})).finally((function(){return g(!1)}))})),p)return i.default.createElement(c.Spin,{size:"large",className:"custom-spinner"});var b={defaultValue:(0,s.getQueryParams)(e.location)[m.SEARCH_QUERY_PARAM],onChangeHandler:(0,s.createChangeHandler)(m.SEARCH_QUERY_PARAM,e)},P=[{title:O("Name"),dataIndex:"name",sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:O("Composite"),dataIndex:"composite",render:function(e){return e.toString()}},{title:O("Description"),dataIndex:"description"}],_=O("User roles");return i.default.createElement("div",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,_)),i.default.createElement(s.PageHeader,{title:_}),i.default.createElement(c.Row,{className:"list-view"},i.default.createElement(c.Col,{className:"main-content"},i.default.createElement("div",{className:"main-content__header"},i.default.createElement(s.SearchForm,b)),i.default.createElement(s.TableLayout,{id:"UserRolesList",persistState:!0,datasource:n,columns:P}))))};t.UserRolesList=O,O.defaultProps={keycloakBaseURL:""};var h=O;t.default=h},1255:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultEditUserGroupProps=t.CreateEditUserGroup=void 0;var a=n(r(52)),o=n(r(0)),i=r(32),u=r(57),c=n(r(192)),s=r(62),l=r(1256),d=r(133),f=r(195),p=r(405),m=r(755),v=r(756),y=r(406);c.default.register(p.reducerName,p.reducer);var g=(0,p.makeKeycloakUserGroupsSelector)(),E=(0,y.makeKeycloakUserRolesSelector)(),O={keycloakBaseURL:""};t.defaultEditUserGroupProps=O;var h=function(e){var t=e.keycloakBaseURL,r=o.default.useState(!1),n=(0,a.default)(r,2),c=n[0],p=n[1],y=o.default.useState([]),O=(0,a.default)(y,2),h=O[0],b=O[1],P=o.default.useState([]),_=(0,a.default)(P,2),R=_[0],T=_[1],S=(0,f.useTranslation)().t,j=(0,u.useDispatch)(),C=e.match.params[d.ROUTE_PARAM_USER_GROUP_ID],A=(0,u.useSelector)((function(e){return g(e,{id:[C]})})),w=(0,u.useSelector)((function(e){return E(e,{})})),L=A.length?A[0]:l.defaultInitialValues;if(o.default.useEffect((function(){if(C){p(!0);var e=(0,v.fetchSingleGroup)(C,t,j,S),r=(0,m.fetchAllRoles)(t,j,S),n=(0,v.fetchRoleMappings)(C,t,d.KEYCLOAK_URL_AVAILABLE_ROLES,b,S),a=(0,v.fetchRoleMappings)(C,t,d.KEYCLOAK_URL_ASSIGNED_ROLES,T,S);Promise.all([e,r,n,a]).catch((function(){return(0,s.sendErrorNotification)(S("There was a problem fetching user groups"))})).finally((function(){return p(!1)}))}}),[L.id,e.location]),c)return o.default.createElement(i.Spin,{size:"large",className:"custom-spinner"});var U={allRoles:w,assignedRoles:R,availableRoles:h,initialValues:L,keycloakBaseURL:t};return o.default.createElement(i.Row,null,o.default.createElement(i.Col,{span:24},o.default.createElement(l.UserGroupForm,U)))};t.CreateEditUserGroup=h,h.defaultProps=O},1256:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.handleTransferChange=t.defaultProps=t.defaultInitialValues=t.UserGroupForm=void 0;var o=n(r(45)),i=n(r(70)),u=n(r(90)),c=n(r(26)),s=n(r(52)),l=n(r(53)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=r(38),p=r(32),m=r(22),v=n(r(192)),y=r(62),g=r(133),E=r(195),O=r(756),h=r(406);function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(1257),v.default.register(h.reducerName,h.reducer);var R={access:{view:!1,manage:!1,manageMembership:!1},attributes:{},clientRoles:{},id:"",name:"",path:"",realmRoles:[],subGroups:[]};t.defaultInitialValues=R;var T={allRoles:[],assignedRoles:[],availableRoles:[],initialValues:R,keycloakBaseURL:""};t.defaultProps=T;var S=function(){var e=(0,l.default)(o.default.mark((function e(t,r,n,a,i,u){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=5;break}return e.next=3,(0,O.removeAssignedRoles)(t.id,a,i,r,u);case 3:e.next=8;break;case 5:if(!n.length){e.next=8;break}return e.next=8,(0,O.assignRoles)(t.id,a,i,n,u);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}();t.handleTransferChange=S;var j=function(e){var t=e.initialValues,r=e.keycloakBaseURL,n=e.assignedRoles,a=e.availableRoles,c=e.allRoles,v=(0,d.useState)(!1),h=(0,s.default)(v,2),b=h[0],P=h[1],R=(0,d.useState)([]),T=(0,s.default)(R,2),j=T[0],C=T[1],A=(0,d.useState)([]),w=(0,s.default)(A,2),L=w[0],U=w[1],k=(0,d.useState)([]),I=(0,s.default)(k,2),N=I[0],D=I[1],M=(0,f.useHistory)(),x=p.Form.useForm(),F=(0,s.default)(x,1)[0],B=(0,E.useTranslation)().t;d.default.useEffect((function(){F.setFieldsValue(_({},t))}),[F,t]);var H=function(){var e=(0,l.default)(o.default.mark((function e(n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t,L,j,r,c,B).finally((function(){return D(n)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=[].concat((0,u.default)(n),(0,u.default)(a)).map((function(e){return{key:e.id,title:e.name}})),K=t.name;return d.default.createElement(p.Row,{className:"content-section user-group"},d.default.createElement(m.PageHeader,{title:e.initialValues.id?B("Edit User Group | {{name}}",{name:K}):B("New User Group")}),d.default.createElement(p.Col,{className:"bg-white p-3",span:24},d.default.createElement(p.Form,(0,i.default)({},{labelCol:{xs:{offset:0,span:16},sm:{offset:2,span:10},md:{offset:0,span:8},lg:{offset:0,span:6}},wrapperCol:{xs:{span:24},sm:{span:14},md:{span:12},lg:{span:10}}},{form:F,initialValues:_({},t),onFinish:function(e){delete e.roles,P(!0),(0,O.submitForm)(_(_({},t),e),r,P,B).catch((function(){return(0,y.sendErrorNotification)(B("There was a problem submitting the form"))}))}}),d.default.createElement(p.Form.Item,{name:"name",id:"name",label:B("Name"),rules:[{required:!0,message:B("Name is required")}]},d.default.createElement(p.Input,null)),t.id?d.default.createElement(p.Form.Item,{name:"roles",id:"roles",label:B("Realm Roles")},d.default.createElement(p.Transfer,{dataSource:G,titles:[B("Available Roles"),B("Assigned Roles")],listStyle:{minWidth:300,minHeight:300},targetKeys:N.length?N:n.map((function(e){return e.id})),selectedKeys:[].concat((0,u.default)(j),(0,u.default)(L)),render:function(e){return d.default.createElement("div",null,e.title)},disabled:!1,onChange:H,onSelectChange:function(e,t){C((0,u.default)(e)),U((0,u.default)(t))},locale:{notFoundContent:B("The list is empty"),searchPlaceholder:B("Search")}})):"",d.default.createElement(p.Form.Item,{wrapperCol:{xs:{offset:0,span:16},sm:{offset:12,span:24},md:{offset:8,span:16},lg:{offset:6,span:14}}},d.default.createElement(p.Button,{type:"primary",htmlType:"submit",className:"create-group"},B(b?"Saving":"Save")),d.default.createElement(p.Button,{onClick:function(){return M.push(g.URL_USER_GROUPS)},className:"cancel-group"},B("Cancel"))))))};t.UserGroupForm=j,j.defaultProps=T},1257:function(e,t,r){},1258:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEditUser=t.ConnectedCreateEditUser=void 0;var o=n(r(52)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=n(r(192)),c=r(32),s=r(57),l=r(168),d=r(62),f=r(22),p=r(133),m=r(195),v=r(404),y=r(108);r(407);var g=r(757),E=r(586);function O(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}u.default.register(v.reducerName,v.reducer);var h={getPractitionerFun:function(e,t){return new f.OpenSRPService(p.OPENSRP_CREATE_PRACTITIONER_ENDPOINT,e).read(t)},postPutPractitionerFactory:E.postPutPractitioner},b=function(e){var t=(0,i.useState)(!1),r=(0,o.default)(t,2),n=r[0],a=r[1],u=(0,i.useState)(!1),s=(0,o.default)(u,2),f=s[0],v=s[1],y=(0,i.useState)(!1),O=(0,o.default)(y,2),h=O[0],b=O[1],P=(0,i.useState)(!1),_=(0,o.default)(P,2),R=_[0],T=_[1],S=(0,i.useState)([]),j=(0,o.default)(S,2),C=j[0],A=j[1],w=(0,i.useState)([]),L=(0,o.default)(w,2),U=L[0],k=L[1],I=(0,i.useState)(g.defaultUserFormInitialValues),N=(0,o.default)(I,2),D=N[0],M=N[1],x=(0,i.useState)(),F=(0,o.default)(x,2),B=F[0],H=F[1],G=(0,i.useState)(!1),K=(0,o.default)(G,2),z=K[0],V=K[1],Q=(0,i.useState)(),Y=(0,o.default)(Q,2),W=Y[0],q=Y[1],Z=(0,m.useTranslation)().t,J=e.keycloakUser,X=e.keycloakBaseURL,$=e.baseUrl,ee=e.extraData,te=e.fetchKeycloakUsersCreator,re=e.userFormHiddenFields,ne=e.userFormRenderFields,ae=e.getPractitionerFun,oe=e.postPutPractitionerFactory,ie=e.getPractitionerRoleFun,ue=e.match.params[p.ROUTE_PARAM_USER_ID];return(0,i.useEffect)((function(){C.length||(a(!0),new l.KeycloakService(p.KEYCLOAK_URL_USER_GROUPS,X).list().then((function(e){return A(e)})).catch((function(e){(0,d.sendErrorNotification)(Z("There was a problem fetching User Group"))})).finally((function(){return a(!1)})))}),[X,$,C.length,Z]),(0,i.useEffect)((function(){ue&&(v(!0),new l.KeycloakService(p.KEYCLOAK_URL_USERS,X).read(ue).then((function(e){e&&te([e])})).catch((function(e){(0,d.sendErrorNotification)(Z("There was a problem fetching User"))})).finally((function(){return v(!1)})))}),[ue,X,te,Z]),(0,i.useEffect)((function(){ue&&(b(!0),new l.KeycloakService(p.KEYCLOAK_URL_USERS+"/"+ue+p.KEYCLOAK_URL_USER_GROUPS,X).list().then((function(e){k(e)})).catch((function(e){(0,d.sendErrorNotification)(Z("There was a problem fetching User Group"))})).finally((function(){return b(!1)})))}),[ue,X,Z]),(0,i.useEffect)((function(){ue&&(T(!0),ae($,ue).then((function(e){H(e)})).catch((function(e){(0,d.sendErrorNotification)(Z("There was a problem fetching Practitioner details"))})).finally((function(){return T(!1)})))}),[ue,$,ae,Z]),(0,i.useEffect)((function(){ue&&ie&&(V(!0),ie($,ue).then((function(e){return q(e)})).catch((function(){return(0,d.sendErrorNotification)(Z("Failed to load practitioner role"))})).finally((function(){return V(!1)})))}),[$,ie,Z,ue]),(0,i.useEffect)((function(){M((0,E.getFormValues)(null!==J&&void 0!==J?J:void 0,B,U,W))}),[J,B,U,W]),n||f||h||R||z?i.default.createElement(c.Spin,{size:"large",className:"custom-spinner","data-testid":"custom-create-user-spinner"}):i.default.createElement(c.Row,null,i.default.createElement(c.Col,{span:24},i.default.createElement(g.UserForm,{initialValues:D,keycloakBaseURL:X,baseUrl:$,userGroups:C,extraData:ee,hiddenFields:re,renderFields:ne,practitionerUpdaterFactory:oe,isFHIRInstance:!!ie})))};t.CreateEditUser=b,b.defaultProps=h;var P={fetchKeycloakUsersCreator:v.fetchKeycloakUsers},_=(0,s.connect)((function(e,t){var r=t.match.params[p.ROUTE_PARAM_USER_ID],n=null;if(r){var a=(0,v.makeKeycloakUsersSelector)()(e,{id:[r]});n=1===a.length?a[0]:null}return{keycloakUser:n,extraData:(0,y.getExtraData)(e)}}),P)(b);t.ConnectedCreateEditUser=_},1259:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.submitForm=t.defaultCredentialsProps=t.cancelUserHandler=t.UserCredentials=void 0;var a=n(r(70)),o=n(r(0)),i=r(32),u=r(22),c=r(38),s=n(r(192)),l=r(168),d=r(212);r(407);var f=r(133),p=r(195),m=r(404),v=r(62);s.default.register(m.reducerName,m.reducer);var y=function(e){e.push(f.URL_USER)};t.cancelUserHandler=y;var g={fetchKeycloakUsersCreator:m.fetchKeycloakUsers,keycloakUser:null,serviceClass:l.KeycloakService,cancelUserHandler:y};t.defaultCredentialsProps=g;var E=function(e,t,r,n,a){var o=new r("".concat(f.KEYCLOAK_URL_USERS,"/").concat(t).concat(f.KEYCLOAK_URL_RESET_PASSWORD),n),i=e.password;o.update({temporary:!1,type:"password",value:i}).then((function(){(0,v.sendSuccessNotification)(a("Credentials updated successfully")),d.history.push(f.URL_USER)})).catch((function(e){(0,v.sendErrorNotification)(e.description)}))};t.submitForm=E;var O=function(e){var t=e.serviceClass,r=e.match,n=e.keycloakBaseURL,s=r.params[f.ROUTE_PARAM_USER_ID],l=r.params[f.ROUTE_PARAM_USERNAME],d=(0,p.useTranslation)().t,m=(0,c.useHistory)(),v="".concat(d("User Credentials")," | ").concat(l);return o.default.createElement(i.Row,{className:"content-section"},o.default.createElement(u.PageHeader,{title:v}),o.default.createElement(i.Col,{className:"bg-white p-3",span:24},o.default.createElement("div",{className:"form-container"},o.default.createElement(i.Form,(0,a.default)({},{labelCol:{xs:{offset:0,span:16},sm:{offset:2,span:10},md:{offset:0,span:12},lg:{offset:0,span:8}},wrapperCol:{xs:{span:24},sm:{span:14},md:{span:12},lg:{span:10}}},{onFinish:function(e){return E(e,s,t,n,d)}}),o.default.createElement(i.Form.Item,{name:"password",label:d("Password"),rules:[{required:!0,message:d("Password is required")}],hasFeedback:!0},o.default.createElement(i.Input.Password,null)),o.default.createElement(i.Form.Item,{name:"confirm",label:d("Confirm Password"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:d("Confirm Password is required")},function(e){var t=e.getFieldValue;return{validator:function(e,r){return r&&t("password")!==r?Promise.reject(d("The two passwords that you entered do not match!")):Promise.resolve()}}}]},o.default.createElement(i.Input.Password,null)),o.default.createElement(i.Form.Item,{wrapperCol:{xs:{offset:0,span:16},sm:{offset:12,span:24},md:{offset:10,span:16},lg:{offset:8,span:14}}},o.default.createElement(i.Button,{type:"primary",htmlType:"submit",className:"reset-password"},d("Set password")),o.default.createElement(i.Button,{onClick:function(){return e.cancelUserHandler(m)},className:"cancel-user"},d("Cancel")))))))};t.UserCredentials=O,O.defaultProps=g},1260:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationList=void 0;var a=n(r(70)),o=n(r(26)),i=n(r(0)),u=r(106),c=r(22),s=r(32),l=r(66),d=r(97),f=r(204),p=r(1261),m=r(273),v=r(91);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.OrganizationList=function(e){var t,r,n=e.fhirBaseURL,o=(0,m.useTranslation)().t,y=(0,c.useSearchParams)(),E=y.addParam,O=null!==(t=y.sParams.get(c.viewDetailsQuery))&&void 0!==t?t:void 0,h=(0,c.useSimpleTabularView)(n,f.organizationResourceType),b=h.searchFormProps,P=h.tablePaginationProps,_=h.queryValues,R=_.data,T=_.isFetching,S=_.isLoading,j=_.error,C=(0,d.useHistory)();if(j&&!R)return i.default.createElement(c.BrokenPage,{errorMessage:j.message});var A=(null!==(r=null===R||void 0===R?void 0:R.records)&&void 0!==r?r:[]).map((function(e,t){return g(g({},(0,p.parseOrganization)(e)),{},{key:"".concat(t)})})),w=function(e){return[{key:"1",label:i.default.createElement(s.Button,{onClick:function(){return E(c.viewDetailsQuery,e.id)},type:"link"},o("View Details"))}]},L={datasource:A,columns:[{title:o("Team name"),dataIndex:"name",key:"name"},{title:o("Actions"),width:"10%",render:function(e,t){return i.default.createElement("span",{className:"d-flex align-items-center"},i.default.createElement(v.RbacCheck,{permissions:["Organization.update"]},i.default.createElement(i.default.Fragment,null,i.default.createElement(d.Link,{to:"".concat(f.URL_EDIT_ORGANIZATION,"/").concat(t.id),className:"m-0 p-1"},o("Edit")),i.default.createElement(s.Divider,{type:"vertical"}))),i.default.createElement(s.Dropdown,{menu:{items:w(t)},placement:"bottomRight",arrow:!0,trigger:["click"]},i.default.createElement(l.MoreOutlined,{"data-testid":"action-dropdown",className:"more-options"})))}}],loading:T||S,pagination:P},U=o("Organization list");return i.default.createElement("div",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,U)),i.default.createElement(c.PageHeader,{title:U}),i.default.createElement(s.Row,{className:"list-view"},i.default.createElement(s.Col,{className:"main-content"},i.default.createElement("div",{className:"main-content__header"},i.default.createElement(c.SearchForm,(0,a.default)({"data-testid":"search-form"},b)),i.default.createElement(v.RbacCheck,{permissions:["Organization.create"]},i.default.createElement(s.Button,{type:"primary",onClick:function(){return C.push(f.URL_ADD_ORGANIZATION)}},i.default.createElement(l.PlusOutlined,null),o("Add Organization")))),i.default.createElement(c.TableLayout,L)),i.default.createElement(p.ViewDetailsWrapper,{resourceId:O,fhirBaseURL:n})))}},1261:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseOrganization=t.ViewDetailsWrapper=t.ViewDetails=void 0;var a=n(r(26)),o=n(r(0)),i=r(32),u=r(66),c=r(67),s=r(22),l=r(204),d=r(51);r(1262);var f=r(273),p=r(587),m=function(e){var t=(0,s.getObjLike)(e.identifier,"use",s.IdentifierUseCodes.OFFICIAL),r=(0,d.get)(t,"0.value");return{id:e.id,identifier:r,active:e.active,name:e.name,type:(0,d.get)(e,"type.0.coding.0.display"),alias:e.alias,partOf:(0,d.get)(e,"partOf.display")}};t.parseOrganization=m;var v=function(e){var t,r=e.resourceId,n=e.fhirBaseURL,u=(0,f.useTranslation)().t,d=(0,c.useQuery)([l.organizationResourceType,r],(function(){return new s.FHIRServiceClass(n,l.organizationResourceType).read(r)})),v=d.data,y=d.isLoading,g=d.error,E=(0,c.useQuery)([l.organizationAffiliationResourceType,r],(function(){return(0,s.loadAllResources)(n,l.organizationAffiliationResourceType)}),{select:function(e){return(0,s.getResourcesFromBundle)(e)}}),O=E.data,h=E.isLoading,b=E.error,P=(0,c.useQuery)([l.practitionerRoleResourceType,r],(function(){return new s.FHIRServiceClass(n,l.practitionerRoleResourceType).list({_include:"PractitionerRole:practitioner",organization:r}).then((function(e){return(0,s.getResourcesFromBundle)(e).filter((function(e){return e.resourceType===l.practitionerResourceType}))}))})),_=P.data,R=P.isLoading;if(y)return o.default.createElement(i.Spin,{size:"large",className:"custom-spinner"});if(g&&!v||b&&!O)return o.default.createElement(i.Alert,{type:"error",message:"".concat(g||b)});var T=m(v),S=T.active,j=T.id,C=T.identifier,A=(0,p.FindAssignedLocations)(null!==O&&void 0!==O?O:[],j),w=(0,a.default)({},u("Team practitioners"),o.default.createElement("ul",{id:"practitioner-teams"},(null!==_&&void 0!==_?_:[]).map((function(e){var t=(0,s.getObjLike)(e.name,"use",s.IdentifierUseCodes.OFFICIAL)[0];return o.default.createElement("li",{key:e.id},(0,s.parseFhirHumanName)(t))})))),L=(0,a.default)({},u("Assigned locations"),o.default.createElement("ul",{id:"assigned-locations"},A.map((function(e){return o.default.createElement("li",{key:e.reference},e.display)})))),U=(t={},(0,a.default)(t,u("Team id"),j),(0,a.default)(t,u("Team identifier"),C),(0,a.default)(t,u("Team status"),u(S?"Active":"Disabled")),t);return o.default.createElement(i.Space,{direction:"vertical"},(0,s.renderObjectAsKeyvalue)(U),R?o.default.createElement(i.Alert,{description:u("Fetching assigned practitioners"),type:"info"}):null!==_&&void 0!==_&&_.length?(0,s.renderObjectAsKeyvalue)(w):o.default.createElement(i.Alert,{description:u("Organization does not have any assigned practitioners"),type:"warning"}),h?o.default.createElement(i.Alert,{description:u("Fetching assigned locations"),type:"info"}):A.length?(0,s.renderObjectAsKeyvalue)(L):o.default.createElement(i.Alert,{description:u("Organization does not have any assigned locations"),type:"warning"}))};t.ViewDetails=v;t.ViewDetailsWrapper=function(e){var t=e.resourceId,r=e.fhirBaseURL,n=(0,s.useSearchParams)().removeParam;return t?o.default.createElement(i.Col,{className:"view-details-content"},o.default.createElement("div",{className:"flex-right"},o.default.createElement(i.Button,{"data-testid":"close-button",icon:o.default.createElement(u.CloseOutlined,null),shape:"circle",type:"text",onClick:function(){return n(s.viewDetailsQuery)}})),o.default.createElement(v,{resourceId:t,fhirBaseURL:r})):null}},1262:function(e,t,r){},1263:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.AffiliationList=void 0;var a=n(r(90)),o=n(r(0)),i=r(106),u=r(22),c=r(32),s=n(r(1264)),l=r(57),d=n(r(192)),f=r(251),p=r(273),m=r(91),v=f.locationTreeStateDucks.reducerName,y=f.locationTreeStateDucks.reducer,g=f.locationTreeStateDucks.setSelectedNode,E=f.locationTreeStateDucks.getSelectedNode;d.default.register(v,y);t.AffiliationList=function(e){var t,r=e.fhirBaseURL,n=e.fhirRootLocationId,d=(0,l.useSelector)((function(e){return E(e)})),v=(0,l.useDispatch)(),y=(0,p.useTranslation)().t,O=(0,f.useGetLocationHierarchy)(r,n),h=O.data,b=O.isLoading,P=O.error;if(b)return o.default.createElement(c.Spin,{size:"large",className:"custom-spinner"});if(P&&!h)return o.default.createElement(u.BrokenPage,{errorMessage:"".concat(P.message)});if(!h)return o.default.createElement(u.Resource404,null);var _=null!==(t=d?d.children:h.children)&&void 0!==t?t:[],R=(0,a.default)(_).sort((function(e,t){return e.model.node.name.localeCompare(t.model.node.name)})),T=R;d&&(T=[d].concat((0,a.default)(R)));var S=y("Team Assignment");return o.default.createElement("section",{className:"content-section"},o.default.createElement(i.Helmet,null,o.default.createElement("title",null,S)),o.default.createElement(u.PageHeader,{title:S}),o.default.createElement(c.Row,null,o.default.createElement(c.Col,{className:"bg-white p-3",span:6},o.default.createElement(f.Tree,{"data-testid":"hierarchy-display",data:h.children,selectedNode:d,onSelect:function(e){v(g(e))}})),o.default.createElement(c.Col,{className:"bg-white p-3 border-left",span:18},o.default.createElement("div",{className:"bg-white p-3"},o.default.createElement(m.RbacCheck,{permissions:["OrganizationAffiliation.read"]},o.default.createElement(s.default,{baseUrl:r,locationNodes:T}))))))}},1264:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.parseTableData=h;var o=n(r(79)),i=n(r(52)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(32),s=r(22),l=r(1265),d=r(51),f=r(251),p=r(204),m=r(759),v=r(67),y=r(273),g=r(91),E=["data","isLoading","error"];function O(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function h(e){var t=[];return e.forEach((function(e){var r,n=e.model,a=n.node,o=a.id,i=a.name,u=a.status,c=a.partOf,s=a.description;t.push({id:o,key:n.nodeId,name:i,partOf:null!==(r=null===c||void 0===c?void 0:c.display)&&void 0!==r?r:"-",description:s,status:u,physicalType:(0,d.get)(n.node,"physicalType.coding.0.display"),node:e.model.node})})),t}var b=function(e){var t=e.baseUrl,r=e.locationNodes,n=(0,u.useState)(!1),a=(0,i.default)(n,2),d=a[0],O=a[1],b=(0,u.useState)(),P=(0,i.default)(b,2),_=P[0],R=P[1],T=(0,y.useTranslation)().t,S=(0,v.useQuery)([p.organizationAffiliationResourceType],(function(){return(0,s.loadAllResources)(t,p.organizationAffiliationResourceType)}),{select:function(e){return(0,s.getResourcesFromBundle)(e)}}),j=S.data,C=S.isLoading,A=S.error,w=(0,o.default)(S,E),L=(0,v.useQuery)([p.organizationResourceType],(function(){return(0,s.loadAllResources)(t,p.organizationResourceType)}),{select:function(e){return(0,s.getResourcesFromBundle)(e)}}),U=L.data,k=L.isLoading,I=L.error;if(A&&!j||I&&!U)return u.default.createElement(s.BrokenPage,{errorMessage:T("Unable to load teams or teams assignments at the moment")});var N=h(r),D=(0,m.reformatOrganizationByLocation)(null!==j&&void 0!==j?j:[]),M=[{title:T("Name"),dataIndex:"name"},{title:T("Assigned teams"),render:function(e,t){var r,n=t.id;return(null!==(r=D["".concat(f.locationResourceType,"/").concat(n)])&&void 0!==r?r:[]).map((function(e){var t;return null===(t=e.organization)||void 0===t?void 0:t.display})).join(", ")}},{title:T("Actions"),width:"10%",render:function(e,t){return u.default.createElement(g.RbacCheck,{permissions:["OrganizationAffiliation.update"]},u.default.createElement(c.Button,{type:"link",className:"action-button",onClick:function(){var e=t.node;R(e),O(!0)}},T("Edit")))}}];return u.default.createElement(u.default.Fragment,null,u.default.createElement(l.AffiliationModal,{baseUrl:t,location:_,visible:d,allOrgs:null!==U&&void 0!==U?U:[],affiliationsByLoc:D,handleCancel:function(){return O(!1)},allAffiliations:null!==j&&void 0!==j?j:[]}),u.default.createElement(s.TableLayout,{loading:k||C||w.isRefetching,id:"org-affiliation",persistState:!0,datasource:N,columns:M}))};t.default=b},1265:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.AffiliationModal=void 0;var o=n(r(52)),i=r(32),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(759),s=r(251),l=r(204),d=r(67),f=r(62),p=r(273);function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}t.AffiliationModal=function(e){var t=e.handleCancel,r=e.visible,n=e.allOrgs,a=e.affiliationsByLoc,m=e.baseUrl,v=e.location,y=e.allAffiliations,g=null===v||void 0===v?void 0:v.name,E=null===v||void 0===v?void 0:v.id,O=(0,c.getOrgSelectOptions)(n),h=a["".concat(s.locationResourceType,"/").concat(E)],b=(0,c.getOrgOptionsFromAffiliations)(h),P=(0,u.useState)(b),_=(0,o.default)(P,2),R=_[0],T=_[1],S=(0,d.useQueryClient)(),j=(0,p.useTranslation)().t,C=(0,d.useMutation)((function(){return(0,c.postPutAffiliations)(m,R,b,v,y)}),{onError:function(e){return(0,f.sendErrorNotification)(e.message)},onSuccess:function(){(0,f.sendSuccessNotification)(j("Team assignments updated successfully")),t(),S.refetchQueries([l.organizationAffiliationResourceType]).catch((function(){(0,f.sendInfoNotification)(j("Failed to refresh assignments, Please Refresh the page to see the changes"))}))}}),A=C.mutate,w=C.isLoading;if(!E)return null;return u.default.createElement(i.Modal,{destroyOnClose:!0,title:j("Assign/Unassign Teams | {{locationName}}",{locationName:g}),open:r,okText:"Save",onCancel:t,cancelText:"Cancel",footer:[u.default.createElement(i.Button,{"data-testid":"submit-affiliations",disabled:w,onClick:function(){return A()},type:"primary",key:"submit"},j(w?"Saving":"save")),u.default.createElement(i.Button,{"data-testid":"cancel-affiliations",id:"cancel",key:"cancel",onClick:function(){t()}},j("Cancel"))],okType:"default"},u.default.createElement(i.Select,{className:"full-width","data-testid":"affiliation-select",mode:"multiple",allowClear:!0,showSearch:!0,placeholder:j("Select teams"),options:O,defaultValue:b,filterOption:c.orgsFilterFunction,onChange:function(e,t){var r=Array.isArray(t)?t:[t];T(r)}}))}},1266:function(e,t,r){},1267:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.LocationUnitList=void 0,t.parseTableData=C;var o=n(r(45)),i=n(r(53)),u=n(r(90)),c=n(r(52)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),l=r(106),d=r(51),f=r(32),p=r(22),m=r(66),v=r(1268),y=r(97),g=r(275),E=n(r(1269)),O=n(r(760)),h=r(408);r(1274);var b=r(57),P=n(r(192)),_=r(761),R=r(274),T=r(91),S=r(1275);function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function C(e){var t=[];return e.forEach((function(e){var r,n,a,o,i=e.model;t.push({id:i.node.id,key:i.nodeId,name:i.node.name,partOf:null!==(r=null===(n=i.node.partOf)||void 0===n?void 0:n.display)&&void 0!==r?r:"-",description:null===(a=i.node)||void 0===a?void 0:a.description,status:null===(o=i.node)||void 0===o?void 0:o.status,physicalType:(0,d.get)(i.node,"physicalType.coding.0.display")})})),t}P.default.register(_.reducerName,_.reducer);t.LocationUnitList=function(e){var t,r=e.fhirBaseURL,n=e.fhirRootLocationId,a=(0,s.useState)(),d=(0,c.default)(a,2),P=d[0],j=d[1],A=(0,b.useSelector)((function(e){return(0,_.getSelectedNode)(e)})),w=(0,b.useDispatch)(),L=(0,R.useTranslation)().t,U=(0,y.useHistory)(),k=(0,s.useState)(!1),I=(0,c.default)(k,2),N=I[0],D=I[1],M=(0,h.useGetLocationHierarchy)(r,n,{enabled:!N,onError:function(e){404===e.statusCode&&D(!0)}}),x=M.data,F=M.isLoading,B=M.error,H=M.isFetching;if(F)return s.default.createElement(f.Spin,{size:"large",className:"custom-spinner"});if(N)return s.default.createElement(S.RootLocationWizard,{fhirBaseUrl:r,rootLocationId:n});if(B&&!x)return s.default.createElement(p.BrokenPage,{errorMessage:"".concat(B.message)});if(!x)return s.default.createElement(p.Resource404,null);var G=null!==(t=A?A.children:x.children)&&void 0!==t?t:[],K=(0,u.default)(G).sort((function(e,t){return e.model.node.name.localeCompare(t.model.node.name)})),z=K;A&&(z=[A].concat((0,u.default)(K)));var V=C(z),Q=L("Location Unit Management");return s.default.createElement(s.default.Fragment,null,H&&s.default.createElement(f.Alert,{type:"info",message:L("Refreshing data"),description:L("Request to update the location hierarchy is taking a bit long to respond."),banner:!0,showIcon:!0}),s.default.createElement("section",{className:"content-section"},s.default.createElement(l.Helmet,null,s.default.createElement("title",null,Q)),s.default.createElement(p.PageHeader,{title:Q}),s.default.createElement(f.Row,null,s.default.createElement(f.Col,{className:"bg-white p-3",span:6},s.default.createElement(O.default,{"data-testid":"hierarchy-display",data:x.children,selectedNode:A,onSelect:function(e){w((0,_.setSelectedNode)(e))}})),s.default.createElement(f.Col,{className:"bg-white p-3 border-left",span:P?13:18},s.default.createElement("div",{className:"mb-3 d-flex justify-content-between p-3"},s.default.createElement("h6",{className:"mt-4"},A?A.model.node.name:L("Location Unit")),s.default.createElement(T.RbacCheck,{permissions:["Location.create"]},s.default.createElement("div",null,s.default.createElement(f.Button,{type:"primary",onClick:function(){if(A){var e={parentId:A.model.nodeId},t=new URLSearchParams(e).toString();U.push("".concat(g.URL_LOCATION_UNIT_ADD,"?").concat(t))}else U.push(g.URL_LOCATION_UNIT_ADD)}},s.default.createElement(m.PlusOutlined,null),L("Add Location Unit"))))),s.default.createElement("div",{className:"bg-white p-3"},s.default.createElement(E.default,{data:V,onViewDetails:function(){var e=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),P?s.default.createElement(v.LocationUnitDetail,{fhirBaseUrl:r,onClose:function(){return j("")},detailId:P}):null)))}},1268:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.LocationUnitDetail=void 0;var a=n(r(45)),o=n(r(52)),i=n(r(26)),u=n(r(53)),c=r(32),s=n(r(0)),l=r(51),d=r(66),f=r(22),p=r(67),m=r(275),v=r(274);t.LocationUnitDetail=function(e){var t,r=e.onClose,n=e.fhirBaseUrl,y=e.detailId,g=(0,v.useTranslation)().t,E=new f.FHIRServiceClass(n,m.locationResourceType),O=(0,p.useQuery)([m.locationResourceType,y],(0,u.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.read(y));case 1:case"end":return e.stop()}}),e)}))),{select:function(e){return e},enabled:!!y}),h=O.data,b=O.isLoading,P=O.error;if(b)return s.default.createElement(c.Spin,{size:"large",className:"custom-spinner flex-grow-1"});if(P&&!h)return s.default.createElement(c.Alert,{"data-testid":"error-alert",message:"".concat(P),type:"error"});if(!h)return s.default.createElement(c.Alert,{"data-testid":"info-alert",message:g("Location resource not found"),type:"info"});var _=h.name,R=h.status,T=h.description,S=h.id,j=h.identifier,C=(0,f.getObjLike)(j,"use",f.IdentifierUseCodes.OFFICIAL),A=(t={},(0,i.default)(t,g("Location id"),S),(0,i.default)(t,g("identifier"),(0,l.get)(C,"0.value")),(0,i.default)(t,g("Name"),_),(0,i.default)(t,g("alias"),(0,l.get)(h,"alias.0")),(0,i.default)(t,g("Status"),R),(0,i.default)(t,g("Physical type"),(0,l.get)(h,"physicalType.coding.0.display")),(0,i.default)(t,g("Description"),T),t);return s.default.createElement(c.Col,{className:"pl-3",span:5},s.default.createElement("div",{className:"p-4 bg-white","data-testid":"view-details"},s.default.createElement(c.Button,{shape:"circle",onClick:r,className:"float-right",type:"text",icon:s.default.createElement(d.CloseOutlined,null)}),Object.entries(A).map((function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1],a=(0,i.default)({},r,n);return s.default.createElement("div",{"data-testid":"single-key-value",key:r,className:"pb-3"},s.default.createElement(f.SingleKeyNestedValue,a))}))))}},1269:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(0)),o=r(32),i=r(66),u=r(97),c=r(275),s=r(22),l=r(274),d=r(91),f=function(e){var t=e.onViewDetails,r=(0,l.useTranslation)().t,n=[{title:r("Name"),dataIndex:"name"},{title:r("Parent"),dataIndex:"partOf"},{title:r("Physical Type"),dataIndex:"physicalType"},{title:r("Status"),dataIndex:"status"}],f=function(e){return[{key:"1",label:a.default.createElement(o.Button,{type:"link","data-testid":"view-location",onClick:function(){null===t||void 0===t||t(e)}},r("View details"))}]};return a.default.createElement(s.TableLayout,{id:"LocationUnitList",persistState:!0,datasource:e.data,columns:n,actions:{title:r("Actions"),width:"10%",render:function(e,t){return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.RbacCheck,{permissions:["Location.update"]},a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Link,{to:"".concat(c.URL_LOCATION_UNIT_EDIT,"/").concat(t.id),className:"m-0 p-1"},r("Edit")),a.default.createElement(o.Divider,{type:"vertical"}))),a.default.createElement(o.Dropdown,{menu:{items:f(t)},placement:"bottomRight",arrow:!0,trigger:["click"]},a.default.createElement(i.MoreOutlined,{className:"more-options"})))}}})};t.default=f},1274:function(e,t,r){},1275:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.RootLocationWizard=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(26)),u=n(r(0)),c=r(32),s=r(106),l=r(22),d=r(274),f=r(275),p=r(38),m=r(409),v=r(67),y=r(62),g=r(91),E=r(114);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=c.Typography.Text;t.RootLocationWizard=function(e){var t=e.rootLocationId,r=e.fhirBaseUrl,n=(0,d.useTranslation)().t,a=(0,v.useQuery)([f.locationResourceType],(function(){return(0,l.loadAllResources)(r,f.locationResourceType,{_summary:"count"})}),{select:function(e){return e.total}}),o=a.data,i=a.error,p=a.isLoading,m=n("Location Unit Management");return u.default.createElement("section",{className:"content-section"},u.default.createElement(s.Helmet,null,u.default.createElement("title",null,m)),u.default.createElement(l.PageHeader,{title:m}),u.default.createElement(c.Row,{className:"list-view"},u.default.createElement(c.Col,{className:"main-content"},u.default.createElement(c.Card,{title:n("Root location was not found"),style:{minHeight:"60vh"}},u.default.createElement("p",null,n("Root location with id: {{rootLocationId}} was not found on the server.",{rootLocationId:t})),u.default.createElement(P,{fetching:p,locationNum:o,fhirBaseUrl:r,rootLocationId:t,error:i})))))};var P=function(e){var t=e.fetching,r=e.locationNum,n=e.fhirBaseUrl,a=e.rootLocationId,o=e.error,i=(0,d.useTranslation)().t,s={fhirBaseUrl:n,rootLocationId:a};return t?u.default.createElement(E.Trans,{i18nKey:"LookingForUploadedLocations",t:i},u.default.createElement(c.Spin,{size:"small"})," Looking for uploaded locations on the server."):o||void 0===r?u.default.createElement(c.Space,{direction:"vertical"},u.default.createElement(c.Alert,{type:"error",message:i("Unable to check if the server has any locations.")}),u.default.createElement(_,s)):0===r?u.default.createElement(c.Space,{direction:"vertical"},u.default.createElement(b,null,i("No locations have been uploaded yet.")),u.default.createElement(_,s)):u.default.createElement(c.Space,{direction:"vertical"},u.default.createElement(E.Trans,{i18nKey:"locationsOnServer",t:i,locationNum:r},u.default.createElement(b,null,"There exists ",{locationNum:r}," locations on the server."),u.default.createElement(b,null," One of these could be the intended but wrongly configured, root location. "),u.default.createElement(b,null," If you are not sure, kindly reach out to the web administrator for help.")),u.default.createElement(_,s))},_=function(e){var t=e.fhirBaseUrl,r=e.rootLocationId,n=(0,p.useHistory)(),i=(0,d.useTranslation)().t,s=h(h({},R),{},{id:r,identifier:[{use:"official",value:r}]});return u.default.createElement(g.RbacCheck,{permissions:["Location.create"],fallback:u.default.createElement(b,{type:"warning"},"Missing required permissions to create locations")},u.default.createElement(c.Popconfirm,{title:i("This action will create a new location with id {{rootLocationId}}. The web application will then use the created location as the root location.",{rootLocationId:r}),okText:i("Proceed"),cancelText:i("Cancel"),onConfirm:(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.postPutLocationUnit)(s,t).then((function(){(0,y.sendSuccessNotification)(i("Root location uploaded to the server.")),n.push(f.URL_LOCATION_UNIT)})).catch((function(){(0,y.sendErrorNotification)(i("Could not upload the root location at this time, please try again later."))}));case 2:case"end":return e.stop()}}),e)})))},u.default.createElement(c.Button,{type:"primary"},i("Create root location."))))},R={resourceType:"Location",status:"active",name:"Root FHIR Location",alias:["Root Location"],description:"This is the Root Location that all other locations are part of. Any locations that are directly part of this should be displayed as the root location.",physicalType:{coding:[{system:"http://terminology.hl7.org/CodeSystem/location-physical-type",code:"jdn",display:"Jurisdiction"}]}}},1276:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.NewEditLocationUnit=void 0;var a=n(r(0)),o=r(38),i=r(762),u=r(409),c=r(32),s=r(22),l=r(106),d=r(408),f=r(274);t.NewEditLocationUnit=function(e){var t,r=e.hidden,n=e.disabled,p=e.fhirBaseURL,m=e.fhirRootLocationId,v=e.successURLGenerator,y=e.cancelURLGenerator,g=e.disabledTreeNodesCallback,E=(0,o.useHistory)(),O=(0,o.useLocation)(),h=(0,o.useParams)(),b=new URLSearchParams(O.search),P=(0,f.useTranslation)().t,_=(0,d.useGetLocationHierarchy)(p,m),R=_.data,T=_.error,S=_.isLoading,j=h.id,C=(0,d.useGetLocation)(p,j),A=C.data,w=C.error,L=C.isLoading,U=C.isIdle,k=function(e){return!U&&e};if(S||k(L))return a.default.createElement(c.Spin,{size:"large",className:"custom-spinner"});if(T&&!R&&w&&!A)return a.default.createElement(s.BrokenPage,{errorMessage:P("Unable to load the location or location hierarchy")});if(!R||k(!A))return a.default.createElement(s.Resource404,{errorMessage:P("Unable to load the location or location hierarchy")});var I=null!==(t=b.get("parentId"))&&void 0!==t?t:void 0,N=(0,u.getLocationFormFields)(A,I),D={initialValues:N,tree:R,successURLGenerator:v,hidden:r,disabled:n,onCancel:function(){var e=y();E.push(e)},fhirBaseURL:p,disabledTreeNodesCallback:g},M=A?P("Edit > {{name}}",{name:N.name}):P("Add Location Unit");return a.default.createElement(c.Row,{className:"content-section"},a.default.createElement(l.Helmet,null,a.default.createElement("title",null,M)),a.default.createElement(s.PageHeader,{title:M}),a.default.createElement(c.Col,{className:"bg-white p-4",span:24},a.default.createElement(i.LocationForm,D)))}},1277:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.CustomTreeSelect=void 0;var o=n(r(26)),i=n(r(79)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(408),s=r(32),l=r(409),d=["value","fullDataCallback","disabledTreeNodesCallback","tree"];function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.CustomTreeSelect=function(e){var t,r=e.value,n=e.fullDataCallback,a=e.disabledTreeNodesCallback,o=e.tree,f=(0,i.default)(e,d);(0,u.useEffect)((function(){var e=o.first((function(e){return e.model.nodeId===r}));e?null===n||void 0===n||n(e):null===n||void 0===n||n(o)}),[(0,c.serializeTree)(o),n,r]);var p=null!==(t=o.children)&&void 0!==t?t:[],v=(0,l.treeToOptions)(p,a),y=m(m({},f),{},{treeData:v,value:r});return u.default.createElement(s.TreeSelect,y)}},1278:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.HealthCareList=void 0;var a=n(r(70)),o=n(r(26)),i=n(r(0)),u=r(106),c=r(32),s=r(22),l=r(66),d=r(306),f=r(97),p=r(1279),m=r(410);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.HealthCareList=function(e){var t,r,n=e.fhirBaseURL,o=(0,s.useSearchParams)(),v=o.sParams,g=o.addParam,E=null!==(t=v.get(s.viewDetailsQuery))&&void 0!==t?t:void 0,O=(0,f.useHistory)(),h=(0,m.useTranslation)().t,b=(0,s.useSimpleTabularView)(n,d.healthCareServiceResourceType),P=b.searchFormProps,_=b.tablePaginationProps,R=b.queryValues,T=R.data,S=R.isFetching,j=R.isLoading,C=R.error;if(C&&!T)return i.default.createElement(s.BrokenPage,{errorMessage:C.message});var A=(null!==(r=null===T||void 0===T?void 0:T.records)&&void 0!==r?r:[]).map((function(e,t){return y(y({},(0,p.parseHealthCare)(e)),{},{key:"".concat(t)})})),w=function(e){return[{key:"1",label:i.default.createElement(c.Button,{onClick:function(){return g(s.viewDetailsQuery,e.id)},type:"link"},h("View Details"))}]},L={datasource:A,columns:[{title:h("Name"),dataIndex:"name",key:"name"},{title:h("Status"),dataIndex:"active",key:"active",render:function(e){return i.default.createElement("div",null,h(e?"Active":"Inactive"))}},{title:h("Last Updated"),dataIndex:"lastUpdated",key:"lastUpdated",render:function(e){return h("{{val, datetime}}",{val:new Date(e)})}},{title:h("Actions"),width:"10%",render:function(e,t){return i.default.createElement("span",{className:"d-flex align-items-center"},i.default.createElement(f.Link,{to:"".concat(d.ADD_EDIT_HEALTHCARE_SERVICE_URL,"/").concat(t.id),className:"m-0 p-1"},h("Edit")),i.default.createElement(c.Divider,{type:"vertical"}),i.default.createElement(c.Dropdown,{menu:{items:w(t)},placement:"bottomRight",arrow:!0,trigger:["click"]},i.default.createElement(l.MoreOutlined,{"data-testid":"action-dropdown",className:"more-options"})))}}],loading:S||j,pagination:_},U=h("HealthCare service list");return i.default.createElement("div",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,U)),i.default.createElement(s.PageHeader,{title:U}),i.default.createElement(c.Row,{className:"list-view"},i.default.createElement(c.Col,{className:"main-content"},i.default.createElement("div",{className:"main-content__header"},i.default.createElement(s.SearchForm,(0,a.default)({"data-testid":"search-form"},P)),i.default.createElement(c.Button,{type:"primary",onClick:function(){return O.push(d.ADD_EDIT_HEALTHCARE_SERVICE_URL)}},i.default.createElement(l.PlusOutlined,null),h("Create Care Service"))),i.default.createElement(s.TableLayout,L)),i.default.createElement(p.ViewDetailsWrapper,{resourceId:E,fhirBaseURL:n})))}},1279:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseHealthCare=t.ViewDetailsWrapper=t.ViewDetails=void 0;var a=n(r(52)),o=n(r(26)),i=n(r(0)),u=r(66),c=r(32),s=r(51),l=r(67),d=r(306),f=r(22),p=r(410),m=function(e){var t=e.comment,r=e.meta,n=e.name,a=e.active;return{id:e.id,name:n,comment:t,active:a,providedBy:e.providedBy,lastUpdated:(0,s.get)(r,"lastUpdated")}};t.parseHealthCare=m;var v=function(e){var t,r=e.resourceId,n=e.fhirBaseURL,u=(0,p.useTranslation)().t,v=(0,l.useQuery)([d.healthCareServiceResourceType,r],(function(){return new f.FHIRServiceClass(n,d.healthCareServiceResourceType).read(r)})),y=v.data,g=v.isLoading,E=v.error;if(g)return i.default.createElement(c.Spin,{size:"large",className:"custom-spinner"});if(E&&!y)return i.default.createElement(c.Alert,{type:"error",message:"".concat(E)});var O=m(y),h=O.id,b=O.name,P=O.comment,_=O.active,R=O.providedBy,T=O.lastUpdated,S=(t={},(0,o.default)(t,u("Id"),h),(0,o.default)(t,u("Name"),b),(0,o.default)(t,u("Status"),u(_?"Active":"Inactive")),(0,o.default)(t,u("Last Updated"),u("{{val, datetime}}",{val:new Date(null!==T&&void 0!==T?T:"")})),(0,o.default)(t,u("Provided By"),(0,s.get)(R,"reference.display")),(0,o.default)(t,u("Comment"),P),t);return i.default.createElement(c.Space,{direction:"vertical"},Object.entries(S).map((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1],u=(0,o.default)({},r,n);return n?i.default.createElement("div",{key:r,"data-testid":"key-value"},i.default.createElement(f.SingleKeyNestedValue,u)):null})))};t.ViewDetails=v;t.ViewDetailsWrapper=function(e){var t=e.resourceId,r=e.fhirBaseURL,n=(0,f.useSearchParams)().removeParam;return t?i.default.createElement(c.Col,{className:"view-details-content"},i.default.createElement("div",{className:"flex-right"},i.default.createElement(c.Button,{"data-testid":"close-button",icon:i.default.createElement(u.CloseOutlined,null),shape:"circle",type:"text",onClick:function(){return n(f.viewDetailsQuery)}})),i.default.createElement(v,{resourceId:t,fhirBaseURL:r})):null}},1280:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupList=void 0;var a=n(r(52)),o=n(r(26)),i=n(r(0)),u=r(32),c=r(589),s=r(66),l=r(97),d=r(307),f=r(763),p=r(22),m=r(91),v=function(e,t){var r,n=(0,c.parseGroup)(e),s=n.name,l=n.active,d=n.lastUpdated,f=n.id,m=n.quantity,v=n.members,y=(r={},(0,o.default)(r,t("Id"),f),(0,o.default)(r,t("Name"),s),(0,o.default)(r,t("Active"),t(l?"Active":"Inactive")),(0,o.default)(r,t("Last updated"),t("{{val, datetime}}",{val:new Date(d)})),(0,o.default)(r,t("No. of Members"),m),(0,o.default)(r,t("Members"),null===v||void 0===v?void 0:v.map((function(e){return e.entity.display})).join(", ")),r);return i.default.createElement(u.Space,{direction:"vertical"},Object.entries(y).map((function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1],u=(0,o.default)({},r,n);return n?i.default.createElement("div",{key:r,"data-testid":"key-value"},i.default.createElement(p.SingleKeyNestedValue,u)):null})))};t.GroupList=function(e){var t=e.fhirBaseURL,r=(0,d.useTranslation)().t,n=(0,p.useSearchParams)().addParam,a=function(e){return[{key:"1",label:i.default.createElement(u.Button,{type:"link","data-testid":"view-details",onClick:function(){n(p.viewDetailsQuery,e.id)}},r("View Details"))}]},o={getColumns:function(e){return[{title:e("Name"),dataIndex:"name",key:"name"},{title:e("Active"),dataIndex:"active",key:"active",render:function(e){return i.default.createElement("div",null,e?"Yes":"No")}},{title:e("Last Updated"),dataIndex:"lastUpdated",key:"lastUpdated",render:function(t){return e("{{val,datetime}}",{val:new Date(t)})}},{title:e("Actions"),width:"10%",render:function(t,r){return i.default.createElement("span",{className:"d-flex align-items-center"},i.default.createElement(m.RbacCheck,{permissions:["Group.update"]},i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Link,{to:"#",className:"m-0 p-1",onClick:function(e){return e.preventDefault()}},e("Edit")),i.default.createElement(u.Divider,{type:"vertical"}))),i.default.createElement(u.Dropdown,{menu:{items:a(r)},placement:"bottomRight",arrow:!0,trigger:["click"]},i.default.createElement(s.MoreOutlined,{"data-testid":"action-dropdown",className:"more-options"})))}}]},keyValueMapperRenderProp:v,createButtonLabel:r("Add Group"),fhirBaseURL:t,pageTitle:r("Groups List")};return i.default.createElement(f.BaseListView,o)}},1281:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.CommodityAddEdit=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(0)),u=r(106),c=r(1282),s=r(38),l=r(276),d=r(32),f=r(22),p=r(67),m=r(764),v=r(307);t.CommodityAddEdit=function(e){var t,r=e.fhirBaseURL,n=e.listId,y=(0,s.useParams)().id,g=(0,v.useTranslation)().t,E=(0,p.useQuery)([l.groupResourceType,y],(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new f.FHIRServiceClass(r,l.groupResourceType).read(y));case 1:case"end":return e.stop()}}),e)}))),{enabled:!!y});if(!E.isIdle&&E.isLoading)return i.default.createElement(d.Spin,{size:"large",className:"custom-spinner"});if(E.error&&!E.data)return i.default.createElement(f.BrokenPage,{errorMessage:E.error.message});var O=(0,m.getGroupFormFields)(E.data),h=E.data?g("Edit Commodity | {{name}}",{name:null!==(t=E.data.name)&&void 0!==t?t:""}):g("Create Commodity"),b=(0,m.updateListReferencesFactory)(r,n);return i.default.createElement("section",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,h)),i.default.createElement(f.PageHeader,{title:h}),i.default.createElement("div",{className:"bg-white p-5"},i.default.createElement(c.CommodityForm,{fhirBaseUrl:r,initialValues:O,cancelUrl:l.LIST_COMMODITY_URL,successUrl:l.LIST_COMMODITY_URL,postSuccess:b})))}},1282:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.CommodityForm=void 0;var a=n(r(45)),o=n(r(70)),i=n(r(53)),u=n(r(0)),c=r(32),s=r(276),l=r(62),d=r(67),f=r(22),p=r(38),m=r(764),v=r(307),y=c.Form.Item,g=function(e){var t=e.fhirBaseUrl,r=e.initialValues,n=e.disabled,g=e.cancelUrl,E=e.successUrl,O=e.postSuccess,h=(0,d.useQueryClient)(),b=(0,p.useHistory)(),P=(0,v.useTranslation)().t,_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#";return b.push(e)},R=(0,d.useMutation)((function(e){var n=(0,m.generateGroupPayload)(e,r);return(0,m.postPutGroup)(t,n)}),{onError:function(e){(0,l.sendErrorNotification)(e.message)},onSuccess:function(){var e=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.sendSuccessNotification)(P("Commodity updated successfully")),n=!!r.id,e.next=4,null===O||void 0===O?void 0:O(t,n).catch((function(e){(0,l.sendErrorNotification)(e.message)}));case 4:h.refetchQueries([s.groupResourceType]).catch((function(){(0,l.sendInfoNotification)(P("Failed to refresh data, please refresh the page"))})),_(E);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),T=R.mutate,S=R.isLoading,j=[{label:P("Active"),value:!0},{label:P("Disabled"),value:!1}],C=(0,m.getUnitOfMeasureOptions)(),A=(0,m.getGroupTypeOptions)(),w=(0,m.validationRulesFactory)(P);return u.default.createElement(c.Form,(0,o.default)({requiredMark:!1},f.formItemLayout,{onFinish:function(e){T(e)},initialValues:r}),u.default.createElement(y,{hidden:!0,id:"id",name:s.id,label:P("Commodity Id")},u.default.createElement(c.Input,{placeholder:P("(Auto generated)"),disabled:!0})),u.default.createElement(y,{hidden:!0,id:"identifier",name:s.identifier,label:P("Identifier")},u.default.createElement(c.Input,{placeholder:P("(Auto generated)"),disabled:!0})),u.default.createElement(y,{id:s.name,name:s.name,rules:w[s.name],label:P("Enter Commodity name")},u.default.createElement(c.Input,{disabled:n.includes(s.name),placeholder:P("Name")})),u.default.createElement(y,{id:s.active,rules:w[s.active],name:s.active,label:P("Select Commodity status")},u.default.createElement(c.Radio.Group,{disabled:n.includes(s.active),options:j})),u.default.createElement(y,{id:s.type,name:s.type,rules:w[s.type],label:P("Select Commodity Type")},u.default.createElement(c.Select,{disabled:n.includes(s.type),placeholder:P("Select Commodity type"),options:A,showSearch:!0,filterOption:m.groupSelectfilterFunction})),u.default.createElement(y,{id:s.unitOfMeasure,name:s.unitOfMeasure,rules:w[s.unitOfMeasure],label:P("Select the unit of measure")},u.default.createElement(c.Select,{disabled:n.includes(s.unitOfMeasure),placeholder:P("Select the unit of measure"),options:C,showSearch:!0,filterOption:m.groupSelectfilterFunction})),u.default.createElement(y,f.tailLayout,u.default.createElement(c.Space,null,u.default.createElement(c.Button,{type:"primary",id:"submit-button",disabled:S,htmlType:"submit"},P(S?"Saving":"save")),u.default.createElement(c.Button,{id:"cancel-button",onClick:function(){_(g)}},P("Cancel")))))};t.CommodityForm=g,g.defaultProps={initialValues:{},disabled:[]}},1283:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCommodity=t.CommodityList=void 0;var a=n(r(79)),o=n(r(45)),i=n(r(53)),u=n(r(52)),c=n(r(26)),s=n(r(0)),l=r(32),d=r(589),f=r(66),p=r(276),m=r(97),v=r(307),y=r(763),g=r(22),E=r(51),O=r(765),h=r(67),b=r(62),P=r(91),_=["permissions"];function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e,t){var r,n=(0,d.parseGroup)(e),a=n.name,o=n.active,i=n.id,f=n.identifier,p=(0,O.getUnitMeasureCharacteristic)(e),m=(r={},(0,c.default)(r,t("Commodity Id"),i),(0,c.default)(r,t("Identifier"),f),(0,c.default)(r,t("Name"),a),(0,c.default)(r,t("Active"),t(o?"Active":"Disabled")),(0,c.default)(r,t("Unit of measure"),(0,E.get)(p,"valueCodeableConcept.text")),r);return s.default.createElement(l.Space,{direction:"vertical"},Object.entries(m).map((function(e){var t=(0,u.default)(e,2),r=t[0],n=t[1],a=(0,c.default)({},r,n);return n?s.default.createElement("div",{key:r,"data-testid":"key-value"},s.default.createElement(g.SingleKeyNestedValue,a)):null})))};t.CommodityList=function(e){var t=e.fhirBaseURL,r=e.listId,n=(0,v.useTranslation)().t,u=(0,h.useQueryClient)(),c=(0,g.useSearchParams)().addParam,d=(0,P.useUserRole)(),E=function(e){return[{key:"1",permissions:[],label:s.default.createElement(l.Button,{"data-testid":"view-details",onClick:function(){return c(g.viewDetailsQuery,e.id)},type:"link"},n("View Details"))},{key:"2",permissions:["Group.delete"],label:s.default.createElement(l.Popconfirm,{title:n("Are you sure you want to delete this Commodity?"),okText:n("Yes"),cancelText:n("No"),onConfirm:(0,i.default)(o.default.mark((function a(){return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:j(t,e.obj,r).then((function(){u.invalidateQueries([p.groupResourceType]).catch((function(){(0,b.sendInfoNotification)(n("Unable to refresh data at the moment, please refresh the page"))})),(0,b.sendSuccessNotification)(n("Successfully deleted commodity"))})).catch((function(){(0,b.sendErrorNotification)(n("Deletion of commodity failed"))}));case 1:case"end":return a.stop()}}),a)})))},s.default.createElement(l.Button,{danger:!0,type:"link",style:{color:"#"}},n("Delete")))}].filter((function(e){return d.hasPermissions(e.permissions)})).map((function(e){e.permissions;return(0,a.default)(e,_)}))},R={getColumns:function(e){return[{title:e("Name"),dataIndex:"name",key:"name"},{title:e("Active"),dataIndex:"active",key:"active",render:function(t){return s.default.createElement("div",null,e(t?"Active":"Disabled"))}},{title:e("type"),dataIndex:"type",key:"type"},{title:e("Actions"),width:"10%",render:function(t,r){return s.default.createElement("span",{className:"d-flex align-items-center"},s.default.createElement(m.Link,{to:"".concat(p.ADD_EDIT_COMMODITY_URL,"/").concat(r.id),className:"m-0 p-1"},e("Edit")),s.default.createElement(l.Divider,{type:"vertical"}),s.default.createElement(l.Dropdown,{menu:{items:E(r)},placement:"bottomRight",arrow:!0,trigger:["click"]},s.default.createElement(f.MoreOutlined,{"data-testid":"action-dropdown",className:"more-options"})))}}]},keyValueMapperRenderProp:S,createButtonLabel:n("Add Commodity"),createButtonUrl:p.ADD_EDIT_COMMODITY_URL,fhirBaseURL:t,pageTitle:n("Commodity List"),extraQueryFilters:{code:"".concat(O.snomedCodeSystem,"|").concat(O.supplyMgSnomedCode),"_has:List:item:_id":r}};return s.default.createElement(y.BaseListView,R)};var j=function(){var e=(0,i.default)(o.default.mark((function e(t,r,n){var a,i,u,c,s,l,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("List id is not configured correctly");case 2:return i=T(T({},r),{},{active:!1}),u=new g.FHIRServiceClass(t,p.groupResourceType),c=new g.FHIRServiceClass(t,p.listResourceType),e.next=7,c.read(n);case 7:return s=e.sent,l=(null!==(a=s.entry)&&void 0!==a?a:[]).filter((function(e){return e.item.reference!=="".concat(p.groupResourceType,"/").concat(r.id)})),d=T(T({},s),{},{entry:l}),e.abrupt("return",c.update(d).then((function(){return u.update(i)})));case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();t.deleteCommodity=j},1284:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1285:function(e,t,r){},1286:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.PatientsList=void 0;var o=n(r(26)),i=n(r(52)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(106),s=r(32),l=r(22),d=r(354),f=r(411),p=r(766),m=r(51);function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.PatientsList=function(e){var t,r=e.fhirBaseURL,n=(0,f.useTranslation)().t,a=(0,u.useState)(),o=(0,i.default)(a,2),v=o[0],y=o[1],E=(0,l.useSimpleTabularView)(r,d.patientResourceType,v),O=E.searchFormProps,h=E.tablePaginationProps,b=E.queryValues,P=b.data,_=b.isFetching,R=b.isLoading,T=b.error;if(T&&!P)return u.default.createElement(l.BrokenPage,{errorMessage:T.message});var S={datasource:(null!==(t=null===P||void 0===P?void 0:P.records)&&void 0!==t?t:[]).map((function(e){var t=(0,p.parsePatient)(e);return g(g({},t),{},{key:t.id})})),columns:(0,p.serverSideSortedColumns)(n),loading:_||R,pagination:h,onChange:function(e,t,r){var n=(Array.isArray(r)?r:[r]).reduce((function(e,t){var r=t.field,n=t.order,a=(0,m.get)(p.sortMap,r);return a?n&&"ascend"===n?"".concat(e).concat(a):n?"".concat(e,"-").concat(a):e:e}),"");n&&y({_sort:n})}};return u.default.createElement("div",{className:"content-section"},u.default.createElement(c.Helmet,null,u.default.createElement("title",null,n("Patients"))),u.default.createElement(l.PageHeader,{title:n("Patients")}),u.default.createElement(s.Row,{className:"list-view"},u.default.createElement(s.Col,{className:"main-content",span:24},u.default.createElement("div",{className:"main-content__header"},u.default.createElement(l.SearchForm,O)),u.default.createElement(l.TableLayout,S))))}},1297:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultEditPatientProps=t.PatientDetails=void 0;var a=n(r(45)),o=n(r(26)),i=n(r(90)),u=n(r(53)),c=n(r(52)),s=n(r(0)),l=r(32),d=r(66),f=r(106),p=r(97),m=n(r(566)),v=n(r(767)),y=r(22),g=r(590),E=r(1298),O=r(354),h=r(67),b=r(1300),P=r(118),_=r(411);function R(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=l.Layout.Header,j=l.Layout.Sider,C=l.Layout.Content,A={fhirBaseURL:"",patientBundleSize:1e3};t.defaultEditPatientProps=A;var w=function(e){var t,r,n,T=e.fhirBaseURL,A=e.patientBundleSize,w=(0,p.useParams)().id,L=(0,_.useTranslation)().t,U=s.default.useState(O.patientResourceType),k=(0,c.default)(U,2),I=k[0],N=k[1],D=(0,h.useQuery)([O.patientResourceType,w],(0,u.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.handleSessionOrTokenExpiry)();case 2:return t=e.sent,e.next=5,m.default.client(T).request({url:"Patient/".concat(w,"/$everything?_count=").concat(A),headers:{Authorization:"Bearer ".concat(t)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))),M=D.error,x=D.data;if(D.isLoading)return s.default.createElement(l.Spin,{size:"large",className:"custom-spinner"});if(M)return s.default.createElement(y.BrokenPage,{errorMessage:L("There was a problem fetching the patient")});var F={};if(x&&null!==(t=x.entry)&&void 0!==t&&t.length){var B,H=R(x.entry);try{for(H.s();!(B=H.n()).done;){var G=B.value,K=G.resource.resourceType;if(F[K]){var z,V,Q=F[K].count+1;F[K]={count:Q,data:[].concat((0,i.default)(null!==(z=null===(V=F[K])||void 0===V?void 0:V.data)&&void 0!==z?z:[]),[G.resource])}}else F[K]={count:1,data:[G.resource]}}}catch(ne){H.e(ne)}finally{H.f()}}var Y=null===(r=F[I])||void 0===r?void 0:r.data,W=null!==(n=b.resourcesSchema[I])&&void 0!==n?n:{},q=W.columns,Z=W.resourceParser,J=null===q||void 0===q?void 0:q(L),X=(0,g.getPatientName)(F.Patient.data[0]),$=F.Patient.data[0],ee=$.gender,te=$.birthDate,re="https://www.gravatar.com/avatar/".concat(w,"?s=50&r=any&default=identicon&forcedefault=1");return s.default.createElement(l.Row,{id:"patient-details"},s.default.createElement(l.Col,{span:24},s.default.createElement("section",{className:"content-section"},s.default.createElement(f.Helmet,null,s.default.createElement("title",null,L("Patient Details"))),s.default.createElement("div",{className:"plan-avatar-detail-section"},s.default.createElement(l.Layout,{className:"patient-details-banner"},s.default.createElement(j,null,s.default.createElement(l.Avatar,{src:re,className:"patient-details-banner_avatar"})),s.default.createElement(l.Layout,null,s.default.createElement(S,null,s.default.createElement("h4",null,X," ",$.deceasedBoolean||$.deceasedDateTime?s.default.createElement(l.Tag,{color:"red"},L("Deceased")):null)),s.default.createElement(C,null,function(){var e,t,r,n=[(e={},(0,o.default)(e,L("UUID"),(0,v.default)($,"identifier.0.value")),(0,o.default)(e,L("ID"),w),(0,o.default)(e,L("Gender"),ee),e),(t={},(0,o.default)(t,L("Birth Date"),te),(0,o.default)(t,L("Phone"),(0,v.default)($,"telecom.0.value")),(0,o.default)(t,L("MRN"),"Unknown"),t),(r={},(0,o.default)(r,L("Address"),(0,v.default)($,"address.0.line.0")||"N/A"),(0,o.default)(r,L("Country"),(0,v.default)($,"address.0.country")),r)];return s.default.createElement("div",{className:"patient-details__box"},n.map((function(e,t){return s.default.createElement("div",{className:"patient-detail-section",key:t},Object.entries(e).map((function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];return s.default.createElement("div",{key:r,className:"patient-detail__key-value"},s.default.createElement("span",null,r,": "),s.default.createElement("span",null,n))})))})))}())))),s.default.createElement(l.Row,null,s.default.createElement(l.Col,{span:6},s.default.createElement(l.Menu,{mode:"vertical",style:{width:"auto"},defaultSelectedKeys:[I],selectedKeys:[I]},Object.keys(F).map((function(e){return s.default.createElement(l.Menu.Item,{key:e,id:e,onClick:function(e){N(e.key)}},e," ",s.default.createElement(l.Badge,{count:F[e].count,overflowCount:500,style:{backgroundColor:"#777",float:"right",marginTop:"10px"}}))})))),s.default.createElement(l.Col,{span:18},s.default.createElement(l.Card,{title:s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{style:{color:"#1890ff"}},s.default.createElement(d.IdcardOutlined,null)," ",I)),bordered:!1},"DocumentReference"===I?s.default.createElement(E.DocumentReferenceDetails,{fhirBaseApiUrl:T,documentResources:F[I].data}):J&&Z?s.default.createElement(P.PatientDetailsTable,{columns:J,resources:Y,parseResource:Z}):s.default.createElement(l.Alert,{message:L("Work in progress"),type:"info"})))))))};t.PatientDetails=w,w.defaultProps=A},1298:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentReferenceDetails=void 0;var a=n(r(0)),o=r(32),i=r(768),u=r(1299),c=o.Collapse.Panel;t.DocumentReferenceDetails=function(e){var t=e.documentResources,r=e.fhirBaseApiUrl,n=(0,i.processDocumentReferences)(t);return a.default.createElement("div",{className:"doc-reference"},a.default.createElement(o.Collapse,{accordion:!0},n.map((function(e){var t;return a.default.createElement(c,{header:a.default.createElement(u.DocTitle,{title:null!==(t=e.title)&&void 0!==t?t:e.id,status:e.status}),"data-test-id":e.id,key:e.id},a.default.createElement(u.DocPropertyDisplay,{parsedDoc:e,fhirBaseUrl:r}))}))),",")}},1299:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.ValueSection=t.Value=t.DownloadLink=t.DocTitle=t.DocPropertyDisplay=t.Coding=void 0;var o=n(r(52)),i=r(32),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(51),s=r(768),l=r(22),d=r(67),f=r(66),p=r(411);function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var v=function(e){var t=e.dataTestId,r=e.label,n=e.children;return u.default.createElement("div",{className:"fhir-ui__ValueSection","data-testid":t},u.default.createElement("label",{className:"fhir-ui__ValueSection-label"},r),u.default.createElement("div",{className:"fhir-ui__ValueSection-body"},n))};t.ValueSection=v;var y=function(e){var t=e.dataTestId,r=e.children,n=e.label;return u.default.createElement("div",{className:"fhir-ui__Value"},u.default.createElement("label",{className:"fhir-ui__Value-label"},n),u.default.createElement("div",{"data-testid":t},r))};t.Value=y;var g=function(e){var t=e.title,r=e.status;return u.default.createElement(u.default.Fragment,null,t,"\xa0\xa0",r?u.default.createElement(i.Tag,null,u.default.createElement("span",{title:"status"}),r):null)};t.DocTitle=g;var E=function(e){var t=e.coding,r=(0,c.get)(t,"display",""),n=(0,c.get)(t,"code",""),a=(0,c.get)(t,"system",""),o=n||a;return n||r?u.default.createElement("div",{className:"fhir-datatype__Coding"},r&&u.default.createElement(u.default.Fragment,null,u.default.createElement("span",{className:"fhir-datatype__Coding__title"},r)," \xa0"),o&&u.default.createElement("span",{className:"fhir-datatype__Coding__code",title:a},"(",n,")")):null};t.Coding=E;t.DocPropertyDisplay=function(e){var t,r,n,a=e.parsedDoc,o=e.fhirBaseUrl,i=(0,p.useTranslation)().t,c=O(o,null!==(t=null!==(r=a.title)&&void 0!==r?r:a.id)&&void 0!==t?t:"",i);return u.default.createElement("div",{className:"doc-prop-display"},a.title&&u.default.createElement("h4",{className:"doc-resource__title"},u.default.createElement(g,{title:null!==(n=a.title)&&void 0!==n?n:a.id,status:a.status})),u.default.createElement("div",null,!(0,s.itemIsEmpty)(a.documentType.codeList)&&u.default.createElement(y,{label:i("Document type")},u.default.createElement(E,{coding:a.documentType.code})),!(0,s.itemIsEmpty)(a.securityCodes.codeList)&&u.default.createElement(y,{label:i("Security label")},u.default.createElement(E,{coding:a.securityCodes.code})),a.createdAt&&u.default.createElement(y,{label:i("Created at")},u.default.createElement("span",null,a.createdAt)),!(0,s.itemIsEmpty)(a.context)&&u.default.createElement(u.default.Fragment,null,u.default.createElement(v,{label:i("Context")},!(0,s.itemIsEmpty)(a.context.eventCoding)&&u.default.createElement(y,{label:i("Event"),"data-testid":"context.event"},u.default.createElement(E,{coding:a.context.eventCoding})),!(0,s.itemIsEmpty)(a.context.facilityTypeCoding)&&u.default.createElement(y,{label:i("Facility"),"data-testid":"context.facilityType"},u.default.createElement(E,{coding:a.context.facilityTypeCoding})),!(0,s.itemIsEmpty)(a.context.practiceSettingCoding)&&u.default.createElement(y,{label:i("Practice Setting"),"data-testid":"context.practiceSetting"},u.default.createElement(E,{coding:a.context.practiceSettingCoding})),(a.context.periodStart||a.context.periodEnd)&&u.default.createElement(y,{label:i("Period"),"data-testid":"context.period"},a.context.periodStart," - ",a.context.periodEnd))),u.default.createElement(v,{label:"Content"},u.default.createElement("div",{className:"doc-resource__content_table"},u.default.createElement(l.TableLayout,{datasource:a.content,columns:c,pagination:!1})))))};var O=function(e,t,r){return[{title:r("S.no"),render:function(e,t,r){return u.default.createElement("span",null,Number(r)+1)}},{title:r("Name"),dataIndex:"formatDisplay"},{title:r("Format"),dataIndex:"formatCode"},{className:"doc-resource__content-table-action",title:r("Preview/Download"),render:function(r){var n=r.attachment,a=r.formatContentType,o=r.formatCode;if(!a)return null;var i=(0,s.splitContentType)(a).discretePart,c="data:".concat(a,";base64,"),l="".concat(t,".").concat(o),d="".concat(c," ").concat(n.data);return"image"===i?u.default.createElement("img",{alt:t,src:d}):n.binaryUrl?u.default.createElement(u.default.Fragment,null,u.default.createElement(h,{filename:l,linkToResource:null===n||void 0===n?void 0:n.binaryUrl,fhirBaseUrl:e})):void 0}}]},h=function(e){var t=e.linkToResource,r=e.fhirBaseUrl,n=e.filename,a=(0,d.useQuery)(t,(function(){return(0,s.fetchAttachmentForDownload)(r,t)}),{retry:!1}),i=a.isLoading,c=a.data,l=a.isError,p=u.default.useState(),m=(0,o.default)(p,2),v=m[0],y=m[1];return(0,u.useEffect)((function(){if(c){var e=URL.createObjectURL(c);return y(e),function(){URL.revokeObjectURL(e)}}}),[c]),u.default.createElement(u.default.Fragment,null,u.default.createElement("a",{download:n,className:i||l?"disabled-link":"",href:v},"Download"),"\xa0\xa0",i&&u.default.createElement(f.SyncOutlined,{spin:!0}))};t.DownloadLink=h},1300:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resourcesSchema=void 0;var n=r(766),a=r(1301),o=r(1302),i=r(1303),u=r(1304),c=r(1305),s=r(1306),l=r(1307),d=r(1308),f=r(1309),p=r(1310),m=r(1311),v=r(1312),y=r(1313),g=r(1314),E=r(1315),O=r(1316),h=r(1317),b={Patient:{resourceParser:n.parsePatient,columns:n.columns},Encounter:{resourceParser:a.parseEncounter,columns:a.columns},Observation:{resourceParser:o.parseObservation,columns:o.columns},CarePlan:{resourceParser:i.parseCareplan,columns:i.columns},Condition:{resourceParser:u.parseCondition,columns:u.columns},DiagnosticReport:{resourceParser:c.parseDiagnosticReport,columns:c.columns},Immunization:{resourceParser:s.parseImmunization,columns:s.columns},Location:{resourceParser:l.parseLocation,columns:l.columns},Medication:{resourceParser:d.parseMedication,columns:d.columns},MedicationRequest:{resourceParser:f.parseMedicationRequest,columns:f.columns},Procedure:{resourceParser:p.parseProcedure,columns:p.columns},Practitioner:{resourceParser:m.parsePractitioner,columns:m.columns},Organization:{resourceParser:v.parseOrganization,columns:v.columns},ServiceRequest:{resourceParser:y.parseServiceRequest,columns:y.columns},MedicationAdministration:{resourceParser:g.parseMedicationAdministration,columns:g.columns},MedicationStatement:{resourceParser:E.parseMedicationStatement,columns:E.columns},Goal:{resourceParser:O.parseGoal,columns:O.columns},ImmunizationRecommendation:{resourceParser:h.parseImmunizationRecommendation,columns:h.columns}};t.resourcesSchema=b},1301:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseEncounter=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseEncounter=function(e){return{type:(0,i.getCodeableConcepts)((0,o.get)(e,"type")),reason:(0,i.getCodeableConcepts)((0,o.get)(e,"reasonCode")),status:(0,o.get)(e,"status"),classCode:(0,i.getCodeableConcepts)((0,o.get)(e,"class")),period:(0,o.get)(e,"period"),duration:(0,o.get)(e,"duration")}};t.columns=function(e){return[{title:e("Period"),dataIndex:"period",render:function(e){return a.default.createElement(i.FhirPeriod,e)}},{title:e("Reason"),dataIndex:"reason",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Status"),dataIndex:"status"},{title:e("Class"),dataIndex:"classCode",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Type"),dataIndex:"type",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}}]}},1302:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseObservation=t.columns=void 0;var n=r(51),a=r(590),o=r(118);t.parseObservation=function(e){return{observationValue:(0,a.buildObservationValueString)(e),status:(0,n.get)(e,"status"),id:(0,n.get)(e,"id"),issued:(0,n.get)(e,"issued")}};var i=(0,o.sorterFn)("issued",!0);t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Observation value"),dataIndex:"observationValue"},{title:e("Status"),dataIndex:"status"},{title:e("Observation Issue Date"),dataIndex:"issued",render:function(t){return e("{{val, datetime}}",{val:new Date(t)})},sorter:i}]}},1303:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseCareplan=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseCareplan=function(e){return{title:(0,o.get)(e,"title"),period:(0,o.get)(e,"period"),categories:(0,i.getCodeableConcepts)((0,o.get)(e,"category")),status:(0,o.get)(e,"status"),id:(0,o.get)(e,"id")}};t.columns=function(e){return[{title:e("Title"),dataIndex:"title",sorter:(0,i.sorterFn)("title")},{title:e("Category"),dataIndex:"categories",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Period"),dataIndex:"period",render:function(e){return a.default.createElement(i.FhirPeriod,e)}},{title:e("Status"),dataIndex:"status"}]}},1304:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseCondition=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseCondition=function(e){return{condition:(0,i.getCodeableConcepts)((0,o.get)(e,"code")),severity:(0,i.getCodeableConcepts)((0,o.get)(e,"severity")),verificationStatus:(0,o.get)(e,"verificationStatus")}};t.columns=function(e){return[{title:e("Condition"),dataIndex:"condition",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Severity"),dataIndex:"severity",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Verification Status"),dataIndex:"vstatus"}]}},1305:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDiagnosticReport=t.columns=void 0;var n=r(51),a=r(118);t.parseDiagnosticReport=function(e){return{issued:(0,n.get)(e,"issued"),id:(0,n.get)(e,"id"),conclusion:(0,n.get)(e,"conclusion")}};var o=(0,a.sorterFn)("issued",!0);t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Conclusion"),dataIndex:"conclusion"},{title:e("Date issued"),dataIndex:"issued",sorter:o}]}},1306:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseImmunization=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseImmunization=function(e){return{status:(0,o.get)(e,"status"),vaccineCode:(0,o.get)(e,"vaccineCode"),occurenceDateTime:(0,o.get)(e,"occurenceDateTime"),reasonCode:(0,i.getCodeableConcepts)((0,o.get)(e,"reasonCode")),id:(0,o.get)(e,"id")}};var u=(0,i.sorterFn)("occurenceDateTime",!0);t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Status"),dataIndex:"status",sorter:i.sorterFn},{title:e("Administration Date"),dataIndex:"occurenceDateTime",sorter:u,render:function(t){return e("{{val, datetime}}",{val:new Date(t)})}},{title:e("Vaccine Admnistered"),dataIndex:"vaccineCode"},{title:e("Reason"),dataIndex:"reasonCode",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}}]}},1307:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLocation=t.nameSorterFn=t.columns=void 0;var n=r(51),a=r(118);t.parseLocation=function(e){return{name:(0,n.get)(e,"name"),alias:(0,n.get)(e,"alias"),id:(0,n.get)(e,"id"),type:(0,a.getCodeableConcepts)((0,n.get)(e,"type")),city:(0,n.get)(e,"address.city"),country:(0,n.get)(e,"address.country"),state:(0,n.get)(e,"address.state")}};var o=(0,a.sorterFn)("name");t.nameSorterFn=o;t.columns=function(e){return[{title:e("Name"),dataIndex:"name",editable:!0,sorter:o},{title:e("City"),dataIndex:"city"},{title:e("State"),dataIndex:"state"},{title:e("Country"),dataIndex:"country"}]}},1308:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseMedication=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseMedication=function(e){return{status:(0,o.get)(e,"status"),code:(0,i.getCodeableConcepts)((0,o.get)(e,"code")),manufacturer:(0,o.get)(e,"manufacturer"),id:(0,o.get)(e,"id")}};t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Medication"),dataIndex:"details",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Manufacturer"),dataIndex:"manufacturer",value:function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.display)&&void 0!==t?t:null===e||void 0===e?void 0:e.reference}}]}},1309:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseMedicationRequest=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseMedicationRequest=function(e){return{authoredOn:(0,o.get)(e,"authoredOn"),id:(0,o.get)(e,"id"),reasonCodes:(0,i.getCodeableConcepts)((0,o.get)(e,"reasonCode"))}};var u=(0,i.sorterFn)("authoredOn",!0);t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Details"),dataIndex:"reasonCodes",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Authored on"),dataIndex:"authoredOn",sorter:u,render:function(t){return e("{{val, datetime}}",{val:new Date(t)})}}]}},1310:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseProcedure=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseProcedure=function(e){return{type:(0,i.getCodeableConcepts)((0,o.get)(e,"type")),status:(0,o.get)(e,"status"),performedDateTime:(0,o.get)(e,"performedDateTime"),procedure:(0,i.getCodeableConcepts)((0,o.get)(e,"code"))}};var u=(0,i.sorterFn)("date",!0);t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Performed Date"),dataIndex:"date",sorter:u,render:function(t){return e("{{val, datetime}}",{val:new Date(t)})}},{title:e("Procedure"),dataIndex:"procedure",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Status"),dataIndex:"status"}]}},1311:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePractitioner=t.columns=void 0;var n=r(51),a=r(118),o=r(22);t.parsePractitioner=function(e){return{name:(0,o.parseFhirHumanName)((0,n.get)(e,"name.0")),gender:(0,n.get)(e,"gender"),active:(0,n.get)(e,"active")}};var i=(0,a.sorterFn)("name");t.columns=function(e){return[{title:e("Name"),dataIndex:"name",sorter:i},{title:e("Gender"),dataIndex:"gender"},{title:e("Status"),dataIndex:"active",render:function(e){return!0===e?"Active":"Inacitve"}}]}},1312:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseOrganization=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseOrganization=function(e){return{type:(0,i.getCodeableConcepts)((0,o.get)(e,"type")),name:(0,o.get)(e,"name"),active:(0,o.get)(e,"active")}};var u=(0,i.sorterFn)("name");t.columns=function(e){return[{title:e("Name"),dataIndex:"name",editable:!0,sorter:u},{title:e("Type"),dataIndex:"type",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Status"),dataIndex:"active",render:function(e){return!0===e?"Active":"Inactive"}}]}},1313:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseServiceRequest=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseServiceRequest=function(e){return{authoredOn:(0,o.get)(e,"authoredOn"),id:(0,o.get)(e,"id"),category:(0,i.getCodeableConcepts)((0,o.get)(e,"category"))}};var u=(0,i.sorterFn)("authoredOn",!0);t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Date authored"),dataIndex:"authoredOn",sorter:u},{title:e("Category"),dataIndex:"category",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}}]}},1314:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMedicationAdministration=t.columns=void 0;var n=r(51),a=r(118);t.parseMedicationAdministration=function(e){return{status:(0,n.get)(e,"status"),id:(0,n.get)(e,"id"),occurenceDateTime:(0,n.get)(e,"occurenceDateTime")}};var o=(0,a.sorterFn)("status");t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Status"),dataIndex:"status",sorter:o},{title:e("Occurence Date"),dataIndex:"occurenceDateTime",render:function(t){return e("{{val, datetime}}",{val:new Date(t)})}}]}},1315:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMedicationStatement=t.columns=void 0;var n=r(51);t.parseMedicationStatement=function(e){return{status:(0,n.get)(e,"status"),id:(0,n.get)(e,"id"),dateAsserted:(0,n.get)(e,"dateAsserted")}};t.columns=function(e){return[{title:"Id",dataIndex:"id"},{title:"Status",dataIndex:"status"},{title:e("Date asserted"),dataIndex:"dateAsserted"}]}},1316:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGoal=t.columns=void 0;var a=n(r(0)),o=r(51),i=r(118);t.parseGoal=function(e){return{category:(0,i.getCodeableConcepts)((0,o.get)(e,"category")),status:(0,o.get)(e,"lifeCycleStatus"),id:(0,o.get)(e,"id"),description:(0,o.get)(e,"description"),priority:(0,o.get)(e,"priority"),achievementStatus:(0,o.get)(e,"achievementStatus")}};t.columns=function(e){return[{title:e("Id"),dataIndex:"id"},{title:e("Category"),dataIndex:"category",render:function(e){return a.default.createElement(i.FhirCodesTooltips,{codings:e})}},{title:e("Description"),dataIndex:"description"},{title:e("Status"),dataIndex:"status"},{title:e("Achievement status"),dataIndex:"achievementStatus"},{title:e("Priority"),dataIndex:"priority"}]}},1317:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseImmunizationRecommendation=t.columns=void 0;var n=r(51),a=r(118);t.parseImmunizationRecommendation=function(e){return{created:(0,n.get)(e,"date"),dosesNum:(0,n.get)(e,"recommendation.doseNumberPositiveInt"),nextDoseDate:(0,n.get)(e,"recommendation.0.dateCriterion.0.value")}};var o=(0,a.sorterFn)("created",!0);t.columns=function(e){return[{title:e("Date Created"),dataIndex:"created",render:function(t){return e("{{val, datetime}}",{val:new Date(t)})},sorter:o},{title:e("Next Dose Date"),dataIndex:"nextDoseDate"},{title:e("Number of doses"),dataIndex:"dosesNum"}]}},1318:function(e,t,r){},1320:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCareTeam=t.CareTeamList=void 0;var a=n(r(79)),o=n(r(45)),i=n(r(26)),u=n(r(53)),c=n(r(0)),s=r(106),l=r(32),d=r(22),f=r(66),p=r(97),m=r(308),v=r(1321),y=r(62),g=r(413),E=r(91),O=["permissions"],h=function(){var e=(0,u.default)(o.default.mark((function e(t,r,n){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new d.FHIRServiceClass(t,m.FHIR_CARE_TEAM),e.abrupt("return",a.delete(r).then((function(){return(0,y.sendSuccessNotification)(n("Successfully Deleted Care Team"))})).catch((function(){return(0,y.sendErrorNotification)(n("There was a problem deleting the Care Team"))})));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();t.deleteCareTeam=h;var b=function(e){return e?(0,i.default)({},"name:contains",e):{}};t.CareTeamList=function(e){var t,r,n=e.fhirBaseURL,i=(0,g.useTranslation)().t,y=(0,p.useHistory)(),P=(0,d.useSearchParams)(),_=P.addParam,R=P.sParams,T=(0,E.useUserRole)(),S=null!==(t=R.get(d.viewDetailsQuery))&&void 0!==t?t:void 0,j=(0,d.useSimpleTabularView)(n,m.careTeamResourceType,b),C=j.queryValues,A=C.data,w=C.isFetching,L=C.isLoading,U=C.error,k=C.refetch,I=j.tablePaginationProps,N=j.searchFormProps;if(U&&!A)return c.default.createElement(d.BrokenPage,{errorMessage:U.message});var D=(null!==(r=null===A||void 0===A?void 0:A.records)&&void 0!==r?r:[]).map((function(e){return{key:e.id,id:e.id,name:e.name}})),M=function(e){return[{key:"1",permissions:["CareTeam.delete"],label:c.default.createElement(l.Popconfirm,{title:i("Are you sure you want to delete this Care Team?"),okText:i("Yes"),className:"delCareteam",cancelText:i("No"),onConfirm:(0,u.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(n,e.id,i);case 2:return t.next=4,k();case 4:case"end":return t.stop()}}),t)})))},c.default.createElement(l.Button,{danger:!0,"data-testid":"deleteBtn",type:"link",style:{color:"#"}},i("Delete")))},{key:"2",permissions:[],label:c.default.createElement(l.Button,{type:"link",onClick:function(){return _(d.viewDetailsQuery,e.id)}},"View Details")}].filter((function(e){return T.hasPermissions(e.permissions)})).map((function(e){e.permissions;return(0,a.default)(e,O)}))},x={datasource:D,columns:[{title:i("Name"),dataIndex:"name",editable:!0},{title:i("Actions"),width:"10%",render:function(e,t){return c.default.createElement("span",{className:"d-flex align-items-center"},c.default.createElement(E.RbacCheck,{permissions:["CareTeam.update"]},c.default.createElement(c.default.Fragment,null,c.default.createElement(p.Link,{to:"".concat(m.URL_EDIT_CARE_TEAM,"/").concat(t.id.toString()),className:"m-0 p-1"},i("Edit")),c.default.createElement(l.Divider,{type:"vertical"}))),c.default.createElement(l.Dropdown,{menu:{items:M(t)},placement:"bottomRight",arrow:!0,trigger:["click"]},c.default.createElement(f.MoreOutlined,{className:"more-options","data-testid":"action-dropdown"})))}}],loading:w||L,pagination:I};return c.default.createElement("div",{className:"content-section"},c.default.createElement(s.Helmet,null,c.default.createElement("title",null,i("FHIR Care Team"))),c.default.createElement(d.PageHeader,{title:i("FHIR Care Team")}),c.default.createElement(l.Row,{className:"list-view"},c.default.createElement(l.Col,{className:"main-content"},c.default.createElement("div",{className:"main-content__header"},c.default.createElement(d.SearchForm,N),c.default.createElement(E.RbacCheck,{permissions:["CareTeam.create"]},c.default.createElement(p.Link,{to:m.URL_CREATE_CARE_TEAM},c.default.createElement(l.Button,{type:"primary",onClick:function(){return y.push(m.URL_CREATE_CARE_TEAM)}},c.default.createElement(f.PlusOutlined,null),i("Create Care Team"))))),c.default.createElement(d.TableLayout,x)),S&&c.default.createElement(v.ViewDetails,{careTeamId:S,fhirBaseURL:n})))}},1321:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.ViewDetails=void 0;var o=n(r(26)),i=n(r(52)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(32),s=r(66),l=r(67),d=r(22),f=r(308),p=r(413),m=r(51);function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}t.ViewDetails=function(e){var t,r=e.careTeamId,n=e.fhirBaseURL,a=(0,p.useTranslation)().t,v=(0,d.useSearchParams)().removeParam,y=(0,l.useQuery)({queryKey:[f.careTeamResourceType,r],queryFn:function(){return new d.FHIRServiceClass(n,f.careTeamResourceType).list({_id:r,_include:"".concat(f.careTeamResourceType,":*")})},enabled:!!r,select:function(e){return function(e,t){var r,n,a,o=(0,m.keyBy)(e,(function(e){return"".concat(e.resourceType,"/").concat(e.id)})),i=o["".concat(f.careTeamResourceType,"/").concat(t)],u=null===(r=i.subject)||void 0===r?void 0:r.reference,c=u?o[u]:void 0,s=[],l=[];return null===(n=i.participant)||void 0===n||n.forEach((function(e){var t,r=null===(t=e.member)||void 0===t?void 0:t.reference,n=o[null!==r&&void 0!==r?r:""];n&&s.push(n)})),null===(a=i.managingOrganization)||void 0===a||a.forEach((function(e){var t=e.reference,r=o[null!==t&&void 0!==t?t:""];r&&l.push(r)})),{subjectResource:c,participantByResourceType:(0,m.groupBy)(s,"resourceType"),thisCareTeam:i,managingOrganizations:l}}((0,d.getResourcesFromBundle)(e),r)}}),g=y.data,E=y.isLoading,O=y.error,h=null===g||void 0===g?void 0:g.thisCareTeam,b=null===g||void 0===g?void 0:g.participantByResourceType,P=null===g||void 0===g?void 0:g.managingOrganizations,_=(0,d.getObjLike)(null===h||void 0===h?void 0:h.identifier,"use",d.IdentifierUseCodes.OFFICIAL),R=(t={},(0,o.default)(t,a("CareTeam ID"),null===h||void 0===h?void 0:h.id),(0,o.default)(t,a("Identifier"),(0,m.get)(_,"0.value")),(0,o.default)(t,a("Name"),null===h||void 0===h?void 0:h.name),(0,o.default)(t,a("status"),null===h||void 0===h?void 0:h.status),(0,o.default)(t,a("Participants"),u.default.createElement("ul",null,Object.entries(null!==b&&void 0!==b?b:{}).map((function(e,t){var r=(0,i.default)(e,2),n=r[0],a=r[1];return u.default.createElement("li",{key:t},function(){var e=(0,o.default)({},n,u.default.createElement("ul",{id:"care-team-participants"},a.map((function(e){var t=e,r=(0,d.getObjLike)(t.name,"use",d.IdentifierUseCodes.OFFICIAL)[0];return u.default.createElement("li",{key:e.id},"string"===typeof t.name?t.name:(0,d.parseFhirHumanName)(r))}))));return u.default.createElement(u.Fragment,{key:t},a.length&&(0,d.renderObjectAsKeyvalue)(e))}())})))),(0,o.default)(t,a("Managing organizations"),null!==P&&void 0!==P&&P.length?u.default.createElement("ul",{id:"managing-organizations"},P.map((function(e){return u.default.createElement("li",{key:e.id},e.name)}))):u.default.createElement(c.Alert,{description:a("No managing organizations found"),type:"warning"})),t);return u.default.createElement(c.Col,{className:"view-details-content"},u.default.createElement("div",{className:"flex-right"},u.default.createElement(c.Button,{"data-testid":"cancel",icon:u.default.createElement(s.CloseOutlined,null),shape:"circle",type:"text",onClick:function(){return v(d.viewDetailsQuery)}})),O&&!g?u.default.createElement(d.BrokenPage,{errorMessage:"".concat(O)}):u.default.createElement(u.default.Fragment,null,E?u.default.createElement(c.Alert,{description:a("Fetching Care team"),type:"info",showIcon:!0,icon:u.default.createElement(s.SyncOutlined,{spin:!0})}):h?(0,d.renderObjectAsKeyvalue)(R):u.default.createElement(c.Alert,{description:a("Care Team not found"),type:"warning"})))}},1322:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEditCareTeam=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(0)),u=r(32),c=r(67),s=r(62),l=r(97),d=r(22),f=r(308),p=r(1323),m=r(770),v=r(413);t.CreateEditCareTeam=function(e){var t,r,n=e.fhirBaseURL,y=(0,l.useParams)()[f.ROUTE_PARAM_CARE_TEAM_ID],g=(0,v.useTranslation)().t,E=(0,c.useQuery)([f.FHIR_CARE_TEAM,y],(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new d.FHIRServiceClass(n,f.FHIR_CARE_TEAM).read(y);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{onError:function(){return(0,s.sendErrorNotification)(g("There was a problem fetching the Care Team"))},select:function(e){return e},enabled:!!y,cacheTime:0,staleTime:0}),O=(0,c.useQuery)(f.organizationResourceType,(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.loadAllResources)(n,f.organizationResourceType));case 1:case"end":return e.stop()}}),e)}))),{onError:function(){return(0,s.sendErrorNotification)(g("There was a problem fetching organizations"))},select:function(e){return(0,d.getResourcesFromBundle)(e)}}),h=(0,c.useQuery)(f.FHIR_PRACTITIONERS,(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.loadAllResources)(n,f.practitionerResourceType,{active:!0}));case 1:case"end":return e.stop()}}),e)}))),{onError:function(){return(0,s.sendErrorNotification)(g("There was a problem fetching practitioners"))},select:function(e){return(0,d.getResourcesFromBundle)(e)}});if(h.isLoading||O.isLoading||!E.isIdle&&E.isLoading)return i.default.createElement(u.Spin,{size:"large",className:"custom-spinner"});if(E.error&&!E.data)return i.default.createElement(d.BrokenPage,{errorMessage:E.error.message});var b=(0,m.getCareTeamFormFields)(E.data),P={fhirBaseURL:n,initialValues:b,organizations:null!==(t=O.data)&&void 0!==t?t:[],practitioners:null!==(r=h.data)&&void 0!==r?r:[]};return i.default.createElement(u.Row,null,i.default.createElement(u.Col,{span:24},i.default.createElement(p.CareTeamForm,P)))}},1323:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.CareTeamForm=void 0;var o=n(r(70)),i=n(r(52)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(38),s=r(32),l=r(22),d=r(62),f=r(770),p=r(308),m=r(413);function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}t.CareTeamForm=function(e){var t=e.fhirBaseURL,r=e.initialValues,n=e.practitioners,a=e.organizations,v=(0,u.useState)(!1),y=(0,i.default)(v,2),g=y[0],E=y[1],O=(0,c.useHistory)(),h=(0,m.useTranslation)().t,b=s.Form.useForm(),P=(0,i.default)(b,1)[0],_=(0,f.getOrgSelectOptions)(a),R=(0,f.getPractitionerSelectOptions)(n),T=[{label:h("Active"),value:"active"},{label:h("Inactive"),value:"inactive"}];return u.default.createElement(s.Row,{className:"content-section user-group"},u.default.createElement(l.PageHeader,{title:r.id?h("Edit Care Team | {{name}}",{name:r.name}):h("Create Care Team")}),u.default.createElement(s.Col,{className:"bg-white p-3",span:24},u.default.createElement(s.Form,(0,o.default)({},l.formItemLayout,{form:P,initialValues:r,onFinish:function(e){E(!0),(0,f.submitForm)(e,r,t,a,n,h).catch((function(){r.id?(0,d.sendErrorNotification)(h("There was a problem updating the Care Team")):(0,d.sendErrorNotification)(h("There was a problem creating the Care Team"))})).finally((function(){return E(!1)}))}}),u.default.createElement(s.Form.Item,{id:"id",hidden:!0,name:p.id,label:h("ID")},u.default.createElement(s.Input,null)),u.default.createElement(s.Form.Item,{id:"uuid",hidden:!0,name:p.uuid,label:h("UUID")},u.default.createElement(s.Input,null)),u.default.createElement(s.Form.Item,{name:p.name,id:"name",label:h("Name"),rules:[{required:!0,message:h("Name is Required")}]},u.default.createElement(s.Input,null)),u.default.createElement(s.Form.Item,{id:"status",name:p.status,label:h("Status")},u.default.createElement(s.Radio.Group,{name:"status"},T.map((function(e){return u.default.createElement(s.Radio,{name:"status",key:e.label,value:e.value},e.label)})))),u.default.createElement(s.Form.Item,{"data-testid":"practitioners",name:p.practitionerParticipants,id:"practitionerParticipants",label:h("Practitioner Participant")},u.default.createElement(s.Select,{placeholder:h("Select practitioners to assign to this Care Team"),allowClear:!0,mode:"multiple",showSearch:!0,options:R,filterOption:f.selectFilterFunction})),u.default.createElement(s.Form.Item,{name:p.managingOrganizations,id:"managingOrganizations",label:h("Managing organizations"),tooltip:h("Select one or more managing organizations")},u.default.createElement(s.Select,{options:_,mode:"multiple",allowClear:!0,showSearch:!0,placeholder:h("Select a managing Organization"),filterOption:f.selectFilterFunction})),u.default.createElement(s.Form.Item,l.tailLayout,u.default.createElement(s.Button,{type:"primary",htmlType:"submit",className:"create-group"},h(g?"Saving":"Save")),u.default.createElement(s.Button,{onClick:function(){return O.push(p.URL_CARE_TEAM)},className:"cancel-care-team"},h("Cancel"))))))}},1324:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.UserList=void 0;var a=n(r(70)),o=n(r(26)),i=n(r(0)),u=r(32),c=r(22),s=r(66),l=r(94),d=r(772),f=r(1325),p=r(38),m=r(106),v=r(67),y=r(108),g=r(57),E=r(1326),O=r(114),h=r(91);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.UserList=function(e){var t,r,n=e.fhirBaseURL,o=e.keycloakBaseURL,b=(0,p.useLocation)(),_=(0,p.useHistory)(),R=(0,p.useRouteMatch)(),T=(0,g.useSelector)(y.getExtraData),S=(0,v.useQueryClient)(),j=(0,O.useTranslation)().t,C=(0,h.useUserRole)(),A=(0,c.useSearchParams)(),w=A.sParams,L=A.addParam,U=null!==(t=w.get(c.viewDetailsQuery))&&void 0!==t?t:void 0,k=(0,v.useQuery)([l.KEYCLOAK_URL_USERS],(function(){return(0,d.loadKeycloakResources)(o,l.KEYCLOAK_URL_USERS)})),I=k.isLoading,N=k.data,D=k.error,M=k.isFetching;if(D&&!N)return i.default.createElement(c.BrokenPage,{errorMessage:D.message});var x=(null!==(r=null===N||void 0===N?void 0:N.records)&&void 0!==r?r:[]).filter((function(e){var t=new URLSearchParams(b.search).get(c.searchQuery);return!t||[e.firstName,e.username,e.lastName].filter((function(e){return!!e})).map((function(e){return e.replace(" ","")})).map((function(e){return e.toLowerCase()})).some((function(e){return e.includes(t.toLowerCase().replace(" ",""))}))})).map((function(e){return P(P({},e),{},{key:e.id})})),F=(0,f.getTableColumns)(o,n,T,S,j,(function(e){return L(c.viewDetailsQuery,e)}),C,_),B={defaultValue:(0,c.getQueryParams)(b)[c.searchQuery],onChangeHandler:function(e){var t=e.target.value,r=R.url,n=new URLSearchParams(b.search);t?n.set(c.searchQuery,t):n.delete(c.searchQuery),r="".concat(r,"?").concat(n.toString()),_.push(r)}},H={datasource:x,columns:F,loading:M||I},G=j("User Management");return i.default.createElement("div",{className:"content-section"},i.default.createElement(m.Helmet,null,i.default.createElement("title",null,G)),i.default.createElement(c.PageHeader,{title:G}),i.default.createElement(u.Row,{className:"list-view"},i.default.createElement(u.Col,{className:"main-content"},i.default.createElement("div",{className:"main-content__header"},i.default.createElement(c.SearchForm,(0,a.default)({"data-testid":"search-form"},B)),i.default.createElement(h.RbacCheck,{permissions:["iam_user.create"]},i.default.createElement(u.Button,{type:"primary",onClick:function(){return _.push(l.URL_USER_CREATE)}},i.default.createElement(s.PlusOutlined,null),j("Add User")))),i.default.createElement(c.TableLayout,H)),i.default.createElement(E.ViewDetailsWrapper,{resourceId:U,fhirBaseUrl:n,keycloakBaseUrl:o})))}},1325:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.getTableColumns=void 0;var o=n(r(79)),i=n(r(45)),u=n(r(53)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),s=r(32),l=r(66),d=r(772),f=r(97),p=r(94),m=r(62),v=r(91),y=["permissions"];function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}t.getTableColumns=function(e,t,r,n,a,g,E,O){var h=r.user_id,b=[a("First name"),a("Last name"),a("Username")],P=[];["firstName","lastName","username"].forEach((function(e,t){P.push({title:b[t],dataIndex:e,key:e,sorter:function(t,r){return t[e]>r[e]?-1:t[e]<r[e]?1:0},ellipsis:!0})}));var _=function(r){return[{key:"1",permissions:[],label:c.createElement(s.Button,{onClick:function(){return g(r.id)},type:"link"},a("View Details"))},{key:"2",permissions:["iam_user.delete"],label:c.createElement(s.Popconfirm,{title:a("Are you sure you want to delete this user?"),okText:a("Yes"),cancelText:a("No"),onConfirm:(0,u.default)(i.default.mark((function o(){return i.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,d.deleteUser)(e,t,r.id,a);case 2:return o.prev=2,o.next=5,n.invalidateQueries([p.KEYCLOAK_URL_USERS]);case 5:return o.abrupt("return",o.sent);case 8:return o.prev=8,o.t0=o.catch(2),o.abrupt("return",(0,m.sendErrorNotification)(a("Failed to update data, please refresh the page to see the most recent changes")));case 11:case"end":return o.stop()}}),o,null,[[2,8]])})))},h&&(r.id===h?null:c.createElement(s.Button,{"data-testid":"delete-user",danger:!0,type:"link",style:{color:"#"}},a("Delete"))))},{key:"3",permissions:["iam_user.update"],label:c.createElement(s.Button,{type:"link","data-testid":"credentials",onClick:function(){O.push("".concat(p.URL_USER_CREDENTIALS,"/").concat(r.id,"/").concat(r.username))}},a("Credentials"))}].filter((function(e){return E.hasPermissions(e.permissions)})).map((function(e){e.permissions;return(0,o.default)(e,y)}))};return P.push({title:a("Actions"),render:function(e,t){return c.createElement(c.Fragment,null,c.createElement(v.RbacCheck,{permissions:["iam_user.update"]},c.createElement(c.Fragment,null,c.createElement(f.Link,{to:"".concat(p.URL_USER_EDIT,"/").concat(t.id),key:"actions"},a("Edit")),c.createElement(s.Divider,{type:"vertical"}))),c.createElement(s.Dropdown,{placement:"bottomRight",arrow:!0,trigger:["click"],menu:{items:_(t)}},c.createElement(l.MoreOutlined,{"data-testid":"action-dropdown",className:"more-options"})))}}),P}},1326:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ViewDetailsWrapper=t.ViewDetails=void 0;var a=n(r(26)),o=r(94),i=r(32),u=r(66),c=r(22),s=r(67),l=r(168),d=r(414),f=r(771),p=n(r(0)),m=r(114),v=r(51),y=function(e){var t,r,n,u=e.resourceId,y=e.fhirBaseUrl,g=e.keycloakBaseUrl,E=(0,m.useTranslation)().t,O=(0,s.useQuery)([o.KEYCLOAK_URL_USERS,u],(function(){return new l.KeycloakService("".concat(o.KEYCLOAK_URL_USERS),g).read(u)})),h=O.data,b=O.isLoading,P=O.error,_=(0,s.useQuery)([d.practitionerResourceType,u],(function(){return new c.FHIRServiceClass(y,d.practitionerResourceType).list({identifier:u}).then((function(e){return(0,c.getResourcesFromBundle)(e)[0]}))})),R=_.data,T=_.isLoading,S=(0,s.useQuery)([d.groupResourceType,u],(function(){return new l.KeycloakService("".concat(o.KEYCLOAK_URL_USERS,"/").concat(u).concat(o.KEYCLOAK_URL_USER_GROUPS),g).list()})),j=S.data,C=S.isLoading,A=(0,s.useQuery)([d.careTeamResourceType,u],(function(){var e={"participant:Practitioner":null===R||void 0===R?void 0:R.id};return(0,c.loadAllResources)(y,d.careTeamResourceType,e).then((function(e){return(0,c.getResourcesFromBundle)(e)}))}),{enabled:!!R}),w=A.data,L=A.isLoading,U=(0,s.useQuery)([d.practitionerRoleResourceType,u],(function(){return(0,f.getPractitionerRole)(y,u)})),k=U.data,I=U.isLoading;if(b)return p.default.createElement(i.Spin,{size:"large",className:"custom-spinner","data-testid":"custom-spinner"});if(P&&!h)return p.default.createElement(i.Alert,{type:"error",message:"".concat(P)});var N=(t={},(0,a.default)(t,E("Keycloak UUID"),h.id),(0,a.default)(t,"Username",h.username),t),D=(0,c.getObjLike)(null===R||void 0===R?void 0:R.identifier,"use",c.IdentifierUseCodes.OFFICIAL),M=(r={},(0,a.default)(r,E("Practitioner ID"),null===R||void 0===R?void 0:R.id),(0,a.default)(r,E("Practitioner UUID"),(0,v.get)(D,"0.value")),(0,a.default)(r,E("Practitioner status"),null!==R&&void 0!==R&&R.active?E("active"):E("inactive")),r),x=(0,a.default)({},E("Linked care teams"),p.default.createElement("ul",{id:"practitioner-care-teams"},(null!==w&&void 0!==w?w:[]).map((function(e){return p.default.createElement("li",{key:e.id},e.name)})))),F=(0,a.default)({},E("Keycloack User Groups"),p.default.createElement("ul",{id:"keycloak-user-groups"},(null!==j&&void 0!==j?j:[]).map((function(e){return p.default.createElement("li",{key:e.id},e.name)})))),B=(0,a.default)({},E("User Type"),p.default.createElement("ul",{id:"user-type"},(null!==(n=k?[k]:void 0)&&void 0!==n?n:[]).map((function(e){var t,r=(0,o.getUserTypeCode)(e);return r&&(t=(0,o.getUserType)(r)),p.default.createElement("li",{key:e.id,"data-testid":"user-type"},t)}))));return p.default.createElement(i.Space,{direction:"vertical"},(0,c.renderObjectAsKeyvalue)(N),C?p.default.createElement(i.Alert,{description:E("Fetching User Groups"),type:"info"}):null!==j&&void 0!==j&&j.length?(0,c.renderObjectAsKeyvalue)(F):p.default.createElement(i.Alert,{description:E("User is not assigned to any user groups"),type:"warning"}),T?p.default.createElement(i.Alert,{description:E("Fetching linked practitioner"),type:"info"}):R?(0,c.renderObjectAsKeyvalue)(M):p.default.createElement(i.Alert,{description:E("User does not have a linked practitioner"),type:"warning"}),I?p.default.createElement(i.Alert,{description:E("Fetching linked practitionerRole"),type:"info"}):k?(0,c.renderObjectAsKeyvalue)(B):p.default.createElement(i.Alert,{description:E("User has not been assigned a user type"),type:"warning"}),L?p.default.createElement(i.Alert,{description:E("Fetching linked care teams"),type:"info"}):w&&w.length>0?(0,c.renderObjectAsKeyvalue)(x):p.default.createElement(i.Alert,{description:E("Practitioner is not assigned to a care team"),type:"warning"}))};t.ViewDetails=y;t.ViewDetailsWrapper=function(e){var t=e.resourceId,r=e.fhirBaseUrl,n=e.keycloakBaseUrl,a=(0,c.useSearchParams)().removeParam;return t?p.default.createElement(i.Col,{className:"view-details-content"},p.default.createElement("div",{className:"flex-right"},p.default.createElement(i.Button,{"data-testid":"close-button",icon:p.default.createElement(u.CloseOutlined,null),shape:"circle",type:"text",onClick:function(){return a(c.viewDetailsQuery)}})),p.default.createElement(y,{resourceId:t,fhirBaseUrl:r,keycloakBaseUrl:n})):null}},1327:function(e,t,r){},133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compositionResourceType=t.UserQueryId=t.URL_USER_ROLES=t.URL_USER_GROUP_EDIT=t.URL_USER_GROUP_CREATE=t.URL_USER_GROUPS=t.URL_USER_EDIT=t.URL_USER_CREDENTIALS=t.URL_USER_CREATE=t.URL_USER=t.URL_ADMIN=t.SUPERVISOR_USER_TYPE_CODE=t.SUPERVISOR=t.SNOMED_CODEABLE_SYSTEM=t.SEARCH_QUERY_PARAM=t.ROUTE_PARAM_USER_ID=t.ROUTE_PARAM_USER_GROUP_ID=t.ROUTE_PARAM_USERNAME=t.PRACTITIONER_USER_TYPE_CODE=t.PRACTITIONER=t.ORGANIZATION_BY_PRACTITIONER=t.OPENSRP_CREATE_PRACTITIONER_ENDPOINT=t.KEYCLOAK_URL_USER_ROLES=t.KEYCLOAK_URL_USER_GROUPS=t.KEYCLOAK_URL_USERS_COUNT=t.KEYCLOAK_URL_USERS=t.KEYCLOAK_URL_RESET_PASSWORD=t.KEYCLOAK_URL_REQUIRED_USER_ACTIONS=t.KEYCLOAK_URL_EFFECTIVE_ROLES=t.KEYCLOAK_URL_AVAILABLE_ROLES=t.KEYCLOAK_URL_ASSIGNED_ROLES=t.DEVICE_SETTING_CODEABLE_CODE=t.DELETE_PRACTITIONER_ROLE=void 0;var n="/admin";t.URL_ADMIN=n;t.URL_USER_EDIT="/admin/users/edit";t.URL_USER="/admin/users";var a="".concat(n,"/users/groups");t.URL_USER_GROUPS=a;var o="".concat(n,"/users/roles");t.URL_USER_ROLES=o;var i="".concat(n,"/users/groups/edit");t.URL_USER_GROUP_EDIT=i;t.URL_USER_CREATE="/admin/users/new";var u="".concat(n,"/users/groups/new");t.URL_USER_GROUP_CREATE=u;t.URL_USER_CREDENTIALS="/admin/users/credentials";t.ORGANIZATION_BY_PRACTITIONER="organization/by-practitioner";t.ROUTE_PARAM_USER_ID="userId";t.ROUTE_PARAM_USERNAME="username";t.ROUTE_PARAM_USER_GROUP_ID="userGroupId";t.KEYCLOAK_URL_USERS="/users";t.KEYCLOAK_URL_USERS_COUNT="/users/count";t.KEYCLOAK_URL_USER_GROUPS="/groups";t.KEYCLOAK_URL_USER_ROLES="/roles";t.KEYCLOAK_URL_AVAILABLE_ROLES="/role-mappings/realm/available";t.KEYCLOAK_URL_ASSIGNED_ROLES="/role-mappings/realm";t.KEYCLOAK_URL_EFFECTIVE_ROLES="/role-mappings/realm/composite";t.KEYCLOAK_URL_RESET_PASSWORD="/reset-password";t.KEYCLOAK_URL_REQUIRED_USER_ACTIONS="/authentication/required-actions/";var c="practitioner";t.PRACTITIONER=c;t.compositionResourceType="Composition";var s="".concat(c,"/user");t.OPENSRP_CREATE_PRACTITIONER_ENDPOINT=s;t.DELETE_PRACTITIONER_ROLE="practitionerRole/delete/";t.SEARCH_QUERY_PARAM="searchQuery";t.UserQueryId="User";t.SUPERVISOR="supervisor";t.SUPERVISOR_USER_TYPE_CODE="236321002";t.PRACTITIONER_USER_TYPE_CODE="405623001";t.SNOMED_CODEABLE_SYSTEM="http://snomed.info/sct";t.DEVICE_SETTING_CODEABLE_CODE="1156600005"},138:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1280);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1281);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(1283);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(1284);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var u=r(276);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}))},141:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(917);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}))},1438:function(e,t){},1570:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-quest-form";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},1571:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundaryFallback=void 0;var a=n(r(0)),o=r(32),i=r(1572);t.ErrorBoundaryFallback=function(e){var t=e.homeUrl,r=(0,i.useTranslation)().t;return a.default.createElement(o.Result,{status:"error",title:r("An Error Occurred"),subTitle:r("There has been an error. It\u2019s been reported to the site administrators via email and should be fixed shortly. Thanks for your patience."),extra:a.default.createElement(o.Button,{id:"backHome",key:"error",onClick:function(){return window.location.href=t||"/"},type:"primary"},r("Back Home"))})}},1572:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="error-boundary-fallback";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},1573:function(e,t,r){},1574:function(e,t,r){},1578:function(e,t,r){"use strict";r.r(t);var n=r(5),a=r(11),o=r(2),i=r(141),u=function(e,t){var r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_ACTIVE:"false",REACT_APP_OPENSRP_USER_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/userinfo",REACT_APP_PROJECT_CODE:"core",REACT_APP_OPENSRP_API_V2_BASE_URL:"http://localhost:3000/opensrp/rest/",REACT_APP_WEBSITE_NAME:"Bophelo-Ka-Mosebeletsi-BKM",REACT_APP_KEYCLOAK_LOGOUT_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/logout",REACT_APP_ENABLE_FHIR_GROUP:"true",REACT_APP_LANGUAGE_CODE:"en",REACT_APP_ENABLE_FHIR_CARE_TEAM:"true",REACT_APP_ENABLE_QUEST:"true",REACT_APP_KEYCLOAK_API_BASE_URL:"http://192.168.1.8:8080/auth/admin/realms/opensrp",REACT_APP_ENABLE_CARD_SUPPORT:"true",REACT_APP_PAGINATION_SIZE:"100",REACT_APP_OPENSRP_ACCESS_TOKEN_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/token",REACT_APP_EXPRESS_OAUTH_GET_STATE_URL:"http://localhost:3000/oauth/state",REACT_APP_OPENSRP_OAUTH_SCOPES:"openid profile address email",REACT_APP_ENABLE_OPENSRP_OAUTH:"true",REACT_APP_OPENSRP_OAUTH_STATE:"nacosec",REACT_APP_ENABLE_FHIR_USER_MANAGEMENT:"true",REACT_APP_EXPRESS_OAUTH_LOGOUT_URL:"http://localhost:3000/logout",REACT_APP_OPENSRP_WEB_VERSION:"BKM-Web-v3.1.4",REACT_APP_ENABLE_FHIR_HEALTHCARE:"true",REACT_APP_ENABLE_LOCATIONS:"true",REACT_APP_ENABLE_SERVER_SETTINGS:"true",REACT_APP_ENABLE_FORM_CONFIGURATION:"true",REACT_APP_ENABLE_FHIR_LOCATIONS:"true",REACT_APP_ENABLE_TEAMS:"true",REACT_APP_FHIR_API_BASE_URL:"http://192.168.1.8:9080/fhir",REACT_APP_ENABLE_TEAMS_ASSIGNMENT_MODULE:"true",REACT_APP_OPENSRP_CLIENT_ID:"bkm-client-oid",REACT_APP_ENABLE_PLANS:"true",REACT_APP_COMMODITIES_LIST_RESOURCE_ID:"a5f1c283-b71b-41c3-a8d1-b93257d42dd4",REACT_APP_OPENSRP_AUTHORIZATION_URL:"http://192.168.1.8:8080/auth/realms/opensrp/protocol/openid-connect/auth",REACT_APP_OPENSRP_CLIENT_SECRET:"B3WOuUFy3dLsuQmEvYpKvlrSsvOdMFdG",REACT_APP_ENABLE_FHIR_PRACTITIONER_ROLE:"true",REACT_APP_ENABLE_FHIR_COMMODITY:"true",REACT_APP_DOMAIN_NAME:"http://localhost:3000",REACT_APP_ENABLE_FHIR_PATIENTS:"true",REACT_APP_DISABLE_LOGIN_PROTECTION:"true",REACT_APP_KEYCLOAK_USERS_PAGE_SIZE:"20",REACT_APP_FHIR_ROOT_LOCATION_ID:"6b79be92-24b1-405a-acc4-be66fbadcfe7",REACT_APP_FILTER_BY_PARENT_ID:"true"})[e],n="undefined"===typeof r?t:r;if("undefined"===typeof window._env_)return n;var a=window._env_[e];return void 0===a?n:a},c=u("REACT_APP_WEBSITE_NAME","OpenSRP Web"),s=(u("REACT_APP_ENABLE_FHIR_HEALTHCARE_SERVICES","false"),u("REACT_APP_OPENSRP_OAUTH_SCOPES","profile").split(",")),l=(u("REACT_APP_ENABLE_FHIR_GROUP","false"),u("REACT_APP_MAIN_LOGO_SRC","https://github.com/OpenSRP/web/raw/main/app/src/assets/images/opensrp-logo-color.png")),d=(u("REACT_APP_DATE_FORMAT","YYYY-MM-DD"),u("REACT_APP_DEFAULT_TIME","T00:00:00+00:00"),u("REACT_APP_ENABLE_FHIR_TEAMS","false"),u("REACT_APP_ENABLE_FHIR_PATIENTS","false"),"true"===u("REACT_APP_BACKEND_ACTIVE","false")),f=u("REACT_APP_OPENSRP_LOGOUT_URL",void 0),p=u("REACT_APP_OPENSRP_OAUTH_STATE","opensrp"),m="true"===u("REACT_APP_ENABLE_OPENSRP_OAUTH","false"),v=u("REACT_APP_OPENSRP_ACCESS_TOKEN_URL","https://opensrp-stage.smartregister.org/opensrp/oauth/token"),y=u("REACT_APP_OPENSRP_AUTHORIZATION_URL","https://opensrp-stage.smartregister.org/opensrp/oauth/authorize"),g=u("REACT_APP_OPENSRP_CLIENT_ID",""),E=u("REACT_APP_DOMAIN_NAME","http://localhost:3000"),O=u("REACT_APP_OPENSRP_USER_URL","https://opensrp-stage.smartregister.org/opensrp/user-details"),h=(u("REACT_APP_NAVBAR_BRAND_IMG_SRC","https://github.com/OpenSRP/opensrp-web/raw/master/clients/core/src/assets/images/logo.png"),u("REACT_APP_KEYCLOAK_LOGOUT_URL","https://keycloak-stage.smartregister.org/auth/realms/opensrp-web-stage/protocol/openid-connect/logout")),b=u("REACT_APP_OPENSRP_API_BASE_URL","https://opensrp-stage.smartregister.org/opensrp/rest/"),P=(u("REACT_APP_OPENSRP_API_V2_BASE_URL","https://opensrp-stage.smartregister.org/opensrp/rest/v2/"),u("REACT_APP_KEYCLOAK_API_BASE_URL","https://keycloak-stage.smartregister.org/auth/admin/realms/opensrp-web-stage")),_=u("REACT_APP_EXPRESS_OAUTH_GET_STATE_URL","http://localhost:3000/oauth/state"),R=u("REACT_APP_EXPRESS_OAUTH_LOGOUT_URL","http://localhost:3000/logout"),T="true"===u("REACT_APP_DISABLE_LOGIN_PROTECTION","false"),S=(u("REACT_APP_ENABLE_FHIR_CARE_TEAM","false"),u("REACT_APP_LANGUAGE_CODE","en")),j=u("REACT_APP_PROJECT_CODE","eusm"),C=u("REACT_APP_SUPPORTED_LANGUAGES","").split(","),A="true"===u("REACT_APP_ENABLE_LANGUAGE_SWITCHER","false"),w=(u("REACT_APP_ENABLE_FHIR_LOCATIONS","false"),u("REACT_APP_ENABLE_FHIR_USER_MANAGEMENT","false"),u("REACT_APP_FHIR_API_BASE_URL","https://fhir-auth.labs.smartregister.org/fhir")),L=(u("REACT_APP_ENABLE_TEAMS_ASSIGNMENT_MODULE","false"),Number(u("REACT_APP_KEYCLOAK_USERS_PAGE_SIZE",20))),U="true"===u("REACT_APP_DISABLE_TEAM_MEMBER_REASSIGNMENT","true"),k=Number(u("REACT_APP_PAGINATION_SIZE",1e3)),I=Number(u("REACT_APP_DEFAULTS_TABLE_PAGE_SIZE",5)),N=u("REACT_APP_FHIR_PATIENT_SORT_FIELDS","-_lastUpdated").split(","),D=Number(u("REACT_APP_FHIR_PATIENT_BUNDLE_SIZE",5e3)),M=u("REACT_APP_FHIR_ROOT_LOCATION_ID",""),x=u("REACT_APP_OPENSRP_WEB_VERSION",""),F=JSON.parse(u("REACT_APP_SENTRY_CONFIG_JSON","{}")),B=(u("REACT_APP_ENABLE_QUEST","false"),u("REACT_APP_ENABLE_FHIR_COMMODITY","false"),u("REACT_APP_COMMODITIES_LIST_RESOURCE_ID","")),H=u("REACT_APP_PRACTITIONER_TO_ORG_ASSIGNMENT_STRATEGY",void 0),G=u("REACT_APP_AUTHZ_STRATEGY","keycloak"),K="/admin",z="/login",V="/login",Q="/logout",Y="/",W="".concat(K,"/users"),q=("".concat(K,"/OrgAffiliation"),"".concat(W,"/groups")),Z="".concat(W,"/roles"),J="".concat(W,"/edit"),X="".concat(K,"/teams"),$=("".concat(K,"/server-settings"),"".concat(X,"/team-assignment")),ee="".concat(X,"/add"),te="".concat(X,"/edit"),re="".concat(K,"/location/unit"),ne="".concat(re,"/add"),ae="".concat(re,"/edit/:id"),oe="".concat(K,"/location/group"),ie=("".concat(oe,"/add"),"".concat(oe,"/edit/:id"),"".concat(K,"/form-config/json-validators/upload"),"".concat(K,"/form-config/json-validators"),"".concat(K,"/form-config/drafts"),"".concat(K,"/form-config/drafts/upload"),"".concat(K,"/form-config/releases"),"".concat(K,"/CareTeams")),ue=d?"/fe/login":V,ce=Object(i.getAllConfigs)(),se=Object(o.a)(Object(o.a)({},ce),{},{languageCode:S,projectCode:j,appLoginURL:ue,keycloakBaseURL:P,opensrpBaseURL:b,fhirBaseURL:w,defaultTablesPageSize:I,practToOrgAssignmentStrategy:H,rbacStrategy:G});Object(i.setAllConfigs)(se);var le=r(0),de=r.n(le),fe=r(33),pe=r.n(fe),me=r(212),ve=r(611),ye=r(57),ge=(r(931),r(106)),Ee=r(642),Oe=r(108),he=r(38),be=r(250),Pe=r(76),_e=r(882),Re=(r(932),r(884)),Te=r(22),Se=r(114),je=function(e,t){return Object(Se.useTranslation)(e||"app",t)},Ce=r(18),Ae={en:"English",fr:"Fran\xe7ais"},we=function(e){var t=e.authenticated,r=e.user,n=e.extraData.user_id,a=je(),u=a.t,c=a.i18n,s=Object(he.useHistory)(),l=function(e){return function(t){var r=Object(i.getConfig)("projectCode");if(t){var n=r?"".concat(t,"-").concat(r):t;Object(i.setConfig)("languageCode",t),e.changeLanguage(n)}}}(c),d={value:c.language,onLanguageChange:l,allLanguageOptions:Ae,supportedLanguages:C},f=[{key:"1",label:Object(Ce.jsx)(Te.ButtonLink,{name:u("Logout"),route:Q})},{key:"2",label:Object(Ce.jsx)(Te.ButtonLink,{name:u("Manage account"),route:"".concat(J,"/").concat(n)})}];return Object(Ce.jsxs)(Ee.a.Header,{className:"app-header txt-white align-items-center justify-content-end px-1 layout-header",children:[t?Object(Ce.jsx)(be.a,{menu:{items:f},placement:"bottomRight",trigger:["click","hover"],children:Object(Ce.jsx)(Pe.a,{shape:"circle",icon:Object(Ce.jsx)(_e.a,{className:"mr-1 bg-white",src:r.gravatar,children:r.username}),className:"h-auto d-flex align-items-center bg-transparent border-0 rounded-0",size:"large",type:"primary",children:r.username})}):Object(Ce.jsx)(Pe.a,{"data-index":"login-button",icon:Object(Ce.jsx)(Re.a,{}),className:"bg-transparent border-0",type:"primary",onClick:function(){return s.push(ue)},children:u("Login")}),A&&Object(Ce.jsx)(Te.LanguageSwitcher,Object(o.a)({},d))]})};we.defaultProps={authenticated:!1,user:{email:"",name:"",username:""},extraData:{}};var Le=Object(he.withRouter)(we),Ue={logOutUser:Oe.logOutUser},ke=Object(ye.connect)((function(e){return{authenticated:Object(Oe.isAuthenticated)(e),user:Object(Oe.getUser)(e),extraData:Object(Oe.getExtraData)(e)}}),Ue)(Le),Ie=r(16),Ne=r(322),De=r(97),Me=r(88),xe=r(885),Fe=r(886),Be=r(237),He=r(200),Ge=r(138),Ke=r(292);function ze(e,t,r){return Ve([{otherProps:{icon:Object(Ce.jsx)(xe.a,{})},title:t("Administration"),key:"admin",enabled:!0,permissions:[],children:[{title:t("User Management"),key:"user-management",isHomePageLink:!0,url:W,permissions:[],enabled:!0,children:[{title:t("Users"),key:"users",url:W,permissions:[]},{title:t("User Groups"),key:"user-groups",url:q,permissions:[]},{title:t("User Roles"),key:"user-roles",url:Z,permissions:[]}]},{title:t("Location Management"),key:"location-management",isHomePageLink:!0,url:re,permissions:[],enabled:!0,children:[{title:t("Location Units"),url:re,key:"location-unit",permissions:[]}]},{title:t("Care Teams Management"),key:"fhir-care-team",isHomePageLink:!0,permissions:[],enabled:!0,url:ie},{title:t("Team Management"),key:"team-management",isHomePageLink:!0,permissions:[],url:X,enabled:!0,children:[{title:t("Teams"),url:X,key:"TEAMS",permissions:[]},{permissions:[],title:t("Team Assignment"),url:$,key:"team-assignment",enabled:!0}]},{title:t("Group Management"),key:"fhir-group",url:Ge.LIST_GROUP_URL,isHomePageLink:!0,permissions:[],enabled:!0},{title:t("Commodity Management"),key:"fhir-commodity",isHomePageLink:!0,url:Ge.LIST_COMMODITY_URL,permissions:[],enabled:!0},{title:t("Questionnaire Management"),key:"fhir-quest",permissions:[],enabled:!0,url:Be.QUEST_VIEW_URL,isHomePageLink:!0},{title:t("Healthcare Services"),key:"healthcare",isHomePageLink:!0,url:He.LIST_HEALTHCARE_URL,permissions:[],enabled:!0}]},{otherProps:{icon:Object(Ce.jsx)(Fe.a,{})},title:t("Patients"),key:"fhir-patients",permissions:["Patient.read"],enabled:!0,url:Ke.LIST_PATIENTS_URL,isHomePageLink:!0}],r)}function Ve(e,t){return e.filter((function(e){return!e.hasOwnProperty("enabled")||e.hasOwnProperty("enabled")&&!0===e.enabled})).map((function(e){return e.children?Object(o.a)(Object(o.a)({},e),{},{children:Ve(e.children,t)}):e}))}function Qe(e,t){var r,n,a=[];function o(t){if(t.url&&e.includes(t.url)&&(r=t.key),e===t.url&&(r=t.key),t.children){var i,u=Object(Me.a)(t.children);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(e===c.url&&(n=t.key,r=c.key),o(c),n)break}}catch(s){u.e(s)}finally{u.f()}n&&a.push(t.key)}}var i,u=Object(Me.a)(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(void 0===r&&o(c),r)break}}catch(s){u.e(s)}finally{u.f()}return a=a.reverse(),{activeKey:r,activePaths:a}}r(1318);var Ye=r(91),We=function(e){var t=je().t,r=e.extraData.roles,a=Object(he.useLocation)(),o=Object(le.useContext)(Ye.RoleContext),i=de.a.useMemo((function(){return ze(0,t,o)}),[r,t,o]),u=de.a.useMemo((function(){return i.map((function e(t){var r,n;return t.children?Object(Ce.jsx)(Ne.a.SubMenu,{icon:null===(r=t.otherProps)||void 0===r?void 0:r.icon,title:t.title,children:t.children.map(e)},t.key):t.url?Object(Ce.jsx)(Ne.a.Item,{icon:null===(n=t.otherProps)||void 0===n?void 0:n.icon,children:Object(Ce.jsx)(De.Link,{className:"admin-link",to:t.url,children:t.title})},t.key):Object(Ce.jsx)(Ne.a.Item,{children:t.title},t.key)}))}),[i]),c=Qe(a.pathname,i),s=c.activeKey,d=c.activePaths,f=Object(le.useState)([]),p=Object(n.a)(f,2),m=p[0],v=p[1];return Object(le.useEffect)((function(){var e=Qe(a.pathname,i).activePaths;v(e.concat.apply(e,Object(Ie.a)(m)))}),[a.pathname,i]),Object(Ce.jsxs)(Ee.a.Sider,{width:"275px",className:"layout-sider",children:[Object(Ce.jsxs)("div",{className:"logo",children:[Object(Ce.jsx)(De.Link,{to:Y,children:Object(Ce.jsx)("img",{src:l,alt:"The logo"})}),x.length>0?Object(Ce.jsx)("p",{className:"sidebar-version",children:x}):null]}),Object(Ce.jsx)(Ne.a,{theme:"dark",selectedKeys:[null!==s&&void 0!==s?s:""],openKeys:m,defaultOpenKeys:d,defaultSelectedKeys:[null!==s&&void 0!==s?s:""],onOpenChange:function(e){return v(e)},mode:"inline",className:"menu-dark",children:u},"main-menu")]})};We.defaultProps={authenticated:!1};var qe=Object(he.withRouter)(We),Ze=Object(ye.connect)((function(e){return{authenticated:Object(Oe.isAuthenticated)(e),user:Object(Oe.getUser)(e),extraData:Object(Oe.getExtraData)(e)}}),{})(qe),Je=(r(769),r(220)),Xe=r(619),$e=r.n(Xe),et=r(197),tt=r(905),rt=r(168),nt=r(228),at=r(62),ot=function(){var e=je().t,t=Object(Oe.getExtraData)(nt.store.getState()).oAuth2Data,r=null===t||void 0===t?void 0:t.id_token,n=Object(rt.getFetchOptions)((new AbortController).signal,Object(Oe.getAccessToken)(nt.store.getState()),"GET"),a=d?R:E,o=Object(he.useHistory)();return Object(tt.logout)(n,h,a,f,r).catch((function(t){Object(at.sendErrorNotification)(e("There was a problem logging out. Please try again.")),o.push("/")})),Object(Ce.jsx)(et.a,{size:"large",className:"custom-spinner"})},it={};m&&(it.OpenSRP={accessTokenUri:v,authorizationUri:y,clientId:g,redirectUri:"".concat(E,"/oauth/callback/OpenSRP"),scopes:s,state:p,userUri:O});var ut=r(51),ct=r(248),st=r.n(ct),lt=function(e){var t,r=!0,n=[Q].map((function(e){return st.a.stringify({next:e})})),a=Object(Me.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(e.location.search.includes(o)){r=!1;break}}}catch(i){a.e(i)}finally{a.f()}return r},dt=Object(he.withRouter)((function(e){var t=Y;je().t;if(lt(e)){var r=Object(ut.trimStart)(e.location.search,"?"),n=st.a.parse(r).next;if(n&&(t=n),"/"===n)!function(e,t){Object(at.sendSuccessNotification)("Welcome back, ".concat(e.username))}(Object(Oe.getUser)(nt.store.getState()))}return Object(Ce.jsx)(he.Redirect,{to:t})})),ft=Object(he.withRouter)((function(e){var t="".concat(z).concat(e.location.search);return lt(e)||(t=z),window.location.href=t,Object(Ce.jsx)(Ce.Fragment,{})})),pt=function(e){var t=Object(o.a)({LoadingComponent:function(){return Object(Ce.jsx)(et.a,{size:"large",className:"custom-spinner"})},UnSuccessfulLoginComponent:ft,SuccessfulLoginComponent:dt,apiURL:_},e);return Object(Ce.jsx)(Je.ConnectedAPICallback,Object(o.a)({},t))},mt=r(94),vt=r(295),yt=r(373),gt=r(643),Et=r(641),Ot=r(883),ht=(r(1327),function(){var e=je().t,t=Object(ye.useSelector)((function(e){return Object(Oe.getExtraData)(e)})),r=Object(le.useContext)(Ye.RoleContext),n=t.roles,a=de.a.useMemo((function(){return function(e,t,r){var n=ze(0,t,r),a=[];return function e(t){var r,n=Object(Me.a)(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.isHomePageLink&&a.push(o),o.children&&e(o.children)}}catch(i){n.e(i)}finally{n.f()}}(n),a}(0,e,r)}),[n,e,r]),o=24/(a.length<5?2:a.length<7?3:4);return Object(Ce.jsxs)("div",{className:"text-center home",children:[Object(Ce.jsx)(ge.Helmet,{children:Object(Ce.jsx)("title",{children:e("BKM Web")})}),Object(Ce.jsx)(gt.a,{justify:"center",className:"weclome-box",children:Object(Ce.jsx)(Et.a,{span:6,children:Object(Ce.jsx)("h3",{children:e("Welcome to Bophelo Ka Mosebeletsi")})})}),Object(Ce.jsxs)(gt.a,{gutter:[{xs:8,sm:16,md:24,lg:32},{xs:8,sm:16,md:24,lg:32}],className:"links-box",children:[0===a.length&&Object(Ce.jsx)(Ot.a,{message:"403",description:e("Missing the required permissions to view data on this page"),type:"warning"}),a.map((function(e){return Object(Ce.jsx)(Et.a,{className:"gutter-row",xl:o,lg:8,md:8,sm:12,children:Object(Ce.jsx)(Te.ButtonLink,{route:e.url,name:e.title,className:"admin-link btn-links"})},e.title)}))]})]})}),bt=r(233),Pt=r(251),_t={baseURL:b,fhirBaseURL:w},Rt={fhirRootLocationId:M},Tt=Object(o.a)(Object(o.a)({},_t),{},{disableTeamMemberReassignment:U,paginationSize:k}),St={fhirRootLocationId:M},jt=Object(o.a)({successURLGenerator:function(){return re},cancelURLGenerator:function(){return re},hidden:["serviceType","latitude","longitude"]},St),Ct=Object(o.a)(Object(o.a)({},jt),St),At={usersPageSize:L},wt=(b.replace("/rest",""),{baseUrl:b}),Lt=Object(o.a)(Object(o.a)({},wt),{},{baseUrl:w}),Ut={sortFields:N,patientBundleSize:D},kt={listId:B},It=r(535),Nt=(r(407),function(){return Object(Ce.jsx)(et.a,{size:"large",className:"custom-spinner"})}),Dt=function(){return Object(Ce.jsx)(he.Redirect,{to:"/"})},Mt=function(e){var t=Object(o.a)({SuccessfulLoginComponent:Dt,LoadingComponent:Nt,providers:it,oAuthUserInfoGetter:Je.getOpenSRPUserInfo},e);return d?Object(Ce.jsx)(pt,Object(o.a)({},e)):Object(Ce.jsx)(Je.ConnectedOauthCallback,Object(o.a)({},t))},xt=function(){var e=d?"/fe/oauth/callback/opensrp":V,t=Je.AuthorizationGrantType.IMPLICIT,r=Je.AuthorizationGrantType.AUTHORIZATION_CODE,n=d?r:t,a=d?"/fe/oauth/callback/:id":"/oauth/callback/:id",i=Object(Je.useOAuthLogin)({providers:it,authorizationGrantType:n}).OpenSRP;return je(),Object(Ce.jsxs)(he.Switch,{children:[Object(Ce.jsx)($e.a,{redirectPath:e,disableLoginProtection:T,exact:!0,path:Y,component:ht}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:"".concat(Be.QUEST_FORM_VIEW_URL,"/:").concat(It.resourceIdParam,"/:").concat(It.resourceTypeParam),permissions:[],component:It.QuestRForm}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:"".concat(Be.QUEST_RESPONSE_VIEW_URL,"/:").concat(Be.qrListRouteKey),permissions:[],component:Be.QuestionnaireResponseList}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:Be.QUEST_VIEW_URL,permissions:[],component:Be.QuestionnaireList}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:q,permissions:[],component:mt.UserGroupsList}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:Ke.LIST_PATIENTS_URL},Ut),{},{permissions:[],component:Ke.PatientsList})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(Ke.LIST_PATIENTS_URL,"/:","id")},Ut),{},{permissions:[],component:Ke.PatientDetails})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:Z,permissions:[],component:mt.UserRolesList}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:mt.URL_USER},At),{},{permissions:[],component:yt.UserList})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:ie,permissions:[],component:vt.CareTeamList}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(vt.URL_EDIT_CARE_TEAM,"/:").concat(vt.ROUTE_PARAM_CARE_TEAM_ID),permissions:[],component:vt.CreateEditCareTeam}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:vt.URL_CREATE_CARE_TEAM,permissions:[],component:vt.CreateEditCareTeam}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(mt.URL_USER_EDIT,"/:").concat(mt.ROUTE_PARAM_USER_ID)},Lt),{},{permissions:[],component:yt.CreateEditUser})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(mt.URL_USER_GROUP_EDIT,"/:").concat(mt.ROUTE_PARAM_USER_GROUP_ID),permissions:[],component:mt.CreateEditUserGroup}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:mt.URL_USER_GROUP_CREATE,permissions:[],component:mt.CreateEditUserGroup}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:mt.URL_USER_CREATE},Lt),{},{permissions:[],component:yt.CreateEditUser})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(mt.URL_USER_CREDENTIALS,"/:").concat(mt.ROUTE_PARAM_USER_ID,"/:").concat(mt.ROUTE_PARAM_USERNAME),permissions:[],component:mt.UserCredentials}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(mt.URL_USER,"/:id")},At),{},{permissions:[],component:yt.UserList})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:X,permissions:[],component:bt.OrganizationList}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:$},Rt),{},{permissions:[],component:bt.AffiliationList})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:ee},Tt),{},{permissions:[],component:bt.AddEditOrganization})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(te,"/:id")},Tt),{},{permissions:[],component:bt.AddEditOrganization})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(X,"/:id")},Rt),{},{permissions:[],component:bt.OrganizationList})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:re},St),{},{permissions:[],component:Pt.LocationUnitList})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:ne},jt),{},{permissions:[],component:Pt.NewEditLocationUnit})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,exact:!0,path:ae},Ct),{},{permissions:[],component:Pt.NewEditLocationUnit})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:"".concat(He.ADD_EDIT_HEALTHCARE_SERVICE_URL,"/:id"),permissions:[],component:He.HealthCareAddEdit}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:He.ADD_EDIT_HEALTHCARE_SERVICE_URL,permissions:[],component:He.HealthCareAddEdit}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:"".concat(He.LIST_HEALTHCARE_URL,"/:id"),permissions:[],component:He.HealthCareList}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:He.LIST_HEALTHCARE_URL,permissions:[],component:He.HealthCareList}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,path:"".concat(Ge.ADD_EDIT_COMMODITY_URL,"/:id"),exact:!0},kt),{},{permissions:[],component:Ge.CommodityAddEdit})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,path:Ge.ADD_EDIT_COMMODITY_URL},kt),{},{exact:!0,permissions:[],component:Ge.CommodityAddEdit})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:"".concat(Ge.LIST_GROUP_URL,"/:id"),permissions:[],component:Ge.GroupList}),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,path:Ge.LIST_GROUP_URL,permissions:[],component:Ge.GroupList}),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,path:"".concat(Ge.LIST_COMMODITY_URL,"/:id")},kt),{},{permissions:[],component:Ge.CommodityList})),Object(Ce.jsx)(Te.PrivateRoute,Object(o.a)(Object(o.a)({redirectPath:e,disableLoginProtection:T,path:Ge.LIST_COMMODITY_URL},kt),{},{permissions:[],component:Ge.CommodityList})),Object(Ce.jsx)(Te.PrivateRoute,{redirectPath:e,disableLoginProtection:T,exact:!0,path:"".concat(q,"/:").concat(mt.ROUTE_PARAM_USER_GROUP_ID),component:mt.UserGroupsList,permissions:[]}),Object(Ce.jsx)(he.Route,{exact:!0,path:ue,render:function(){return window.location.href=i,Object(Ce.jsx)(Ce.Fragment,{})}}),Object(Ce.jsx)(Te.PublicComponent,{exact:!0,path:a,component:Mt}),Object(Ce.jsx)($e.a,{redirectPath:e,disableLoginProtection:T,exact:!0,path:Q,component:ot}),Object(Ce.jsx)(he.Route,{exact:!0,component:Te.Resource404})]})},Ft=Ee.a.Content,Bt=function(){return Object(Ce.jsxs)(Ee.a,{children:[Object(Ce.jsx)(ge.Helmet,{titleTemplate:"%s | ".concat(c),defaultTitle:""}),Object(Ce.jsx)(Ze,{}),Object(Ce.jsxs)("div",{className:"body-wrapper",children:[Object(Ce.jsx)(ke,{}),Object(Ce.jsx)(Ft,{children:Object(Ce.jsx)(xt,{})})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ht=r(914),Gt=r(1603),Kt=r(152),zt=r(1604),Vt=r(67),Qt=(r(1573),r(1574),new Vt.QueryClient),Yt=F.tags,Wt=Object(a.a)(F,["tags"]);Gt.a(Wt),Yt&&Kt.b((function(e){Object.entries(Yt).forEach((function(t){var r=Object(n.a)(t,2),a=r[0],o=r[1];e.setTag(a,o)}))})),pe.a.render(Object(Ce.jsx)(le.Suspense,{fallback:function(){return Object(Ce.jsx)(et.a,{className:"custom-spinner"})},children:Object(Ce.jsx)(zt.a,{fallback:function(){return Object(Ce.jsx)(Ht.ErrorBoundaryFallback,{homeUrl:Y})},children:Object(Ce.jsx)(ye.Provider,{store:nt.store,children:Object(Ce.jsx)(ve.ConnectedRouter,{history:me.history,children:Object(Ce.jsx)(Vt.QueryClientProvider,{client:Qt,children:Object(Ce.jsx)(Se.OpensrpWebI18nProvider,{children:Object(Ce.jsx)(Ye.RbacProvider,{children:Object(Ce.jsx)(Bt,{})})})})})})})}),document.getElementById("opensrp-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},168:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1246);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(754);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},195:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114);t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)};var a="keycloak-user-management";t.namespace=a},200:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1239);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1278);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(306);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},204:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.searchQuery=t.practitionerRoleResourceType=t.practitionerResourceType=t.pageSizeQuery=t.pageQuery=t.organizationTypeValueSetUrl=t.organizationResourceType=t.organizationAffiliationResourceType=t.name=t.members=t.identifier=t.id=t.alias=t.active=t.URL_EDIT_ORGANIZATION=t.URL_ADMIN=t.URL_ADD_ORGANIZATION=t.OrganizationTypeVS=t.ORGANIZATION_LIST_URL=t.HumanNameUseCodes=void 0;t.pageSizeQuery="pageSize";t.pageQuery="page";t.searchQuery="search";t.organizationAffiliationResourceType="OrganizationAffiliation";t.organizationResourceType="Organization";t.practitionerRoleResourceType="PractitionerRole";t.practitionerResourceType="Practitioner";var n="/admin";t.URL_ADMIN=n;var a="".concat(n,"/teams/add");t.URL_ADD_ORGANIZATION=a;var o="".concat(n,"/teams/edit");t.URL_EDIT_ORGANIZATION=o;var i="".concat(n,"/teams");t.ORGANIZATION_LIST_URL=i;t.id="id";t.name="name";t.active="active";t.alias="alias";t.identifier="identifier";t.type="type";var u;t.members="members",t.HumanNameUseCodes=u,function(e){e.USUAL="usual",e.OFFICIAL="official",e.TEMP="temp",e.NICKNAME="nickname",e.ANONYMOUS="anonymous",e.OLD="old",e.MAIDEN="maiden"}(u||(t.HumanNameUseCodes=u={}));var c="http://terminology.hl7.org/CodeSystem/organization-type";t.organizationTypeValueSetUrl=c;var s={system:c,codings:[{code:"prov",display:"Healthcare Provider"},{code:"team",display:"Organizational team"}]};t.OrganizationTypeVS=s},22:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(933);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1008);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(645);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(385);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var u=r(540);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=r(1197);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=r(402);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var l=r(1198);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=r(403);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=r(1199);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r(1200);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var m=r(1201);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var v=r(1202);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var y=r(744);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var g=r(1204);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var E=r(1205);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var O=r(1206);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var h=r(1207);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var b=r(581);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var P=r(1209);Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))}));var _=r(1210);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var R=r(1211);Object.keys(R).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))}));var T=r(1217);Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))}))},228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1009);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1147);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},233:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(1241);var n=r(1242);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1260);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(1263);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(204);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1219);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1238);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(584);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},251:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0});var o={Tree:!0,locationTreeStateDucks:!0};Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return i.default}}),t.locationTreeStateDucks=void 0;var i=n(r(760)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(761));t.locationTreeStateDucks=u;var c=r(1267);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=r(1276);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var l=r(762);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=r(408);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=r(588);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r(275);function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}))},267:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="react-utils";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},273:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-team-management";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},274:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-location-management";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},275:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locationResourceType=t.locationHierarchyResourceType=t.URL_LOCATION_UNIT_EDIT=t.URL_LOCATION_UNIT_ADD=t.URL_LOCATION_UNIT=t.URL_ADMIN=void 0;t.locationHierarchyResourceType="LocationHierarchy";t.locationResourceType="Location";var n="/admin";t.URL_ADMIN=n;var a="".concat(n,"/location/unit");t.URL_LOCATION_UNIT=a;var o="".concat(a,"/add");t.URL_LOCATION_UNIT_ADD=o;var i="".concat(a,"/edit");t.URL_LOCATION_UNIT_EDIT=i},276:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unitOfMeasure=t.type=t.name=t.listResourceType=t.identifier=t.id=t.groupResourceType=t.active=t.LIST_GROUP_URL=t.LIST_COMMODITY_URL=t.ADD_EDIT_GROUP_URL=t.ADD_EDIT_COMMODITY_URL=void 0;t.ADD_EDIT_GROUP_URL="/group/add-edit";t.ADD_EDIT_COMMODITY_URL="/commodity/add-edit";t.LIST_GROUP_URL="/groups/list";t.LIST_COMMODITY_URL="/commodity/list";t.groupResourceType="Group";t.listResourceType="List";t.id="id";t.identifier="identifier";t.name="name";t.active="active";t.type="type";t.unitOfMeasure="unitOfMeasure"},292:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(1285);var n=r(1286);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1297);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(354);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1320);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1322);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(308);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.providedBy=t.name=t.identifier=t.id=t.healthCareServiceResourceType=t.extraDetails=t.comment=t.active=t.LIST_HEALTHCARE_URL=t.ADD_EDIT_HEALTHCARE_SERVICE_URL=void 0;t.ADD_EDIT_HEALTHCARE_SERVICE_URL="/healthcare/add-edit";t.LIST_HEALTHCARE_URL="/healthcare/list";t.healthCareServiceResourceType="HealthcareService";t.id="id";t.identifier="identifier";t.name="name";t.active="active";t.comment="comment";t.extraDetails="extraDetails";t.providedBy="providedBy"},307:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-group-management";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},308:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.status=t.practitionerResourceType=t.practitionerParticipants=t.organizationResourceType=t.organizationParticipants=t.name=t.managingOrganizations=t.id=t.groupResourceType=t.careTeamResourceType=t.URL_EDIT_CARE_TEAM=t.URL_CREATE_CARE_TEAM=t.URL_CARE_TEAM=t.URL_ADMIN=t.SEARCH_QUERY_PARAM=t.ROUTE_PARAM_CARE_TEAM_ID=t.FHIR_PRACTITIONERS=t.FHIR_GROUPS=t.FHIR_CARE_TEAM=void 0;t.SEARCH_QUERY_PARAM="searchQuery";t.careTeamResourceType="CareTeam";t.groupResourceType="Group";t.practitionerResourceType="Practitioner";t.organizationResourceType="Organization";var n="/admin";t.URL_ADMIN=n;t.FHIR_CARE_TEAM="CareTeam";t.FHIR_GROUPS="Group";t.FHIR_PRACTITIONERS="Practitioner";var a="".concat(n,"/CareTeam/edit");t.URL_EDIT_CARE_TEAM=a;var o="".concat(n,"/CareTeam/new");t.URL_CREATE_CARE_TEAM=o;var i="".concat(n,"/CareTeams");t.URL_CARE_TEAM=i;t.ROUTE_PARAM_CARE_TEAM_ID="careTeamId";t.uuid="uuid";t.id="id";t.name="name";t.status="status";t.practitionerParticipants="practitionerParticipants";t.organizationParticipants="organizationParticipants";t.managingOrganizations="managingOrganizations"},354:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patientResourceType=t.dateFormat=t.LIST_PATIENTS_URL=void 0;t.dateFormat="yyyy-MM-dd";t.patientResourceType="Patient";t.LIST_PATIENTS_URL="/fhir/Patient"},373:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(771);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1324);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(414);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},385:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.extraLinksDefault=t.ExtraLinks=void 0;var a=r(38),o=n(r(0)),i=r(97),u=r(66),c=r(32),s=r(386),l=r(267),d={homeUrl:s.HOME_URL};t.extraLinksDefault=d;var f=function(e){var t=(0,a.useHistory)(),r=(0,l.useTranslation)().t,n=e.homeUrl;return o.default.createElement(o.default.Fragment,null,o.default.createElement(c.Button,{type:"primary",onClick:function(){t.goBack()}},o.default.createElement(u.ArrowLeftOutlined,null),r("Go back")),o.default.createElement(i.Link,{to:n},o.default.createElement(c.Button,{type:"primary"},r("Go home"))))};t.ExtraLinks=f,f.defaultProps=d},386:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_PAGE_SIZE_OPTIONS=t.TABLE_PAGE_SIZE=t.TABLE_PAGE=t.TABLE_ACTIONS_KEY=t.HOME_URL=t.EXPRESS_TOKEN_REFRESH_URL=void 0;t.HOME_URL="/";t.EXPRESS_TOKEN_REFRESH_URL="/refresh/token";t.TABLE_ACTIONS_KEY="_actions";t.TABLE_PAGE=1;t.TABLE_PAGE_SIZE=5;t.TABLE_PAGE_SIZE_OPTIONS=["5","10","20","50","100"]},402:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParams=t.createChangeHandler=t.DEBOUNCE_HANDLER_MS=void 0;var a=r(51),o=n(r(248));t.DEBOUNCE_HANDLER_MS=1e3;var i=function(e){return o.default.parse((0,a.trimStart)(e.search,"?"))};t.getQueryParams=i;t.createChangeHandler=function(e,t){return function(r){var n=r.target.value,a=i(t.location);n?a[e]=n:delete a[e],t.history.push("".concat(t.match.url,"?").concat(o.default.stringify(a)))}}},403:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileNameFromCDHHeader=t.downloadFile=void 0,t.getResourcesFromBundle=function(e){var t,r,n=null===(t=e.entry)||void 0===t?void 0:t.filter((function(e){return void 0!==e}));return null!==(r=null===n||void 0===n?void 0:n.map((function(e){return e.resource})))&&void 0!==r?r:[]};t.downloadFile=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream",n="string"===typeof e?new Blob([e],{type:r}):e;if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.setAttribute("download",t),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(a)}),200)}};t.getFileNameFromCDHHeader=function(e){return e.split("filename=")[1].split(";")[0]}},404:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchKeycloakUsers=t.REMOVE_KEYCLOAK_USERS=t.KEYCLOAK_USERS_FETCHED=void 0,t.getKeycloakUsersArray=O,t.getKeycloakUsersById=E,t.makeKeycloakUsersSelector=t.initialState=t.getUsersByUsername=t.getUsername=t.getUserIds=t.getSearchText=t.getKeycloakUsersByIds=void 0,t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return(0,c.default)(l(l({},e),{},{usersById:t.overwrite?l({},t.usersById):l(l({},e.usersById),t.usersById)}));case p:return(0,c.default)(l(l({},e),{},{usersById:t.usersById}));default:return e}},t.removeKeycloakUsers=t.reducerName=void 0;var a=n(r(26)),o=r(51),i=n(r(585)),u=r(433),c=n(r(201));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d="keycloakUsers";t.reducerName=d;var f="keycloak/reducer/users/userS_FETCHED";t.KEYCLOAK_USERS_FETCHED=f;var p="keycloak/reducer/users/REMOVE_KEYCLOAK_USERS";t.REMOVE_KEYCLOAK_USERS=p;t.fetchKeycloakUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return{overwrite:t,usersById:(0,o.keyBy)(e,(function(e){return e.id})),type:f}};t.removeKeycloakUsers=function(){return{usersById:{},type:p}};var m=(0,c.default)({usersById:{}});t.initialState=m;var v=function(e,t){return t.id};t.getUserIds=v;var y=function(e,t){return t.username};t.getUsername=y;var g=function(e,t){return t.searchText};function E(e){return e[d].usersById}function O(e){return(0,o.values)(E(e))}t.getSearchText=g;var h=function(){return(0,u.createSelector)(O,y,(function(e,t){return t?e.filter((function(e){return e.username.toLowerCase().includes(t.toLowerCase())})):e}))};t.getUsersByUsername=h;var b=function(){return(0,u.createSelector)(E,v,O,(function(e,t,r){return void 0===t?r:t.length>0?t.map((function(t){return e[t]})):[]}))};t.getKeycloakUsersByIds=b;var P=b(),_=h();t.makeKeycloakUsersSelector=function(){return(0,u.createSelector)(P,_,g,(function(e,t,r){var n=(0,i.default)([e,t],JSON.stringify);return n.filter((function(e){return function(e){var t="".concat(e.firstName," ").concat(e.lastName);return!r||t.toLowerCase().includes(r.toLowerCase())}(e)}))}))}},405:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupName=t.fetchKeycloakUserGroups=t.USER_GROUPS_FETCHED=t.REMOVE_USER_GROUPS=void 0,t.getKeycloakUserGroupsArray=O,t.getKeycloakUserGroupsById=E,t.makeKeycloakUserGroupsSelector=t.initialState=t.getUserGroupsIds=t.getUserGroupByName=t.getSearchText=t.getKeycloakUserGroupsByIds=void 0,t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return(0,c.default)(l(l({},e),{},{userGroupsById:l(l({},e.userGroupsById),t.userGroupsById)}));case p:return(0,c.default)(l(l({},e),{},{userGroupsById:t.userGroupsById}));default:return e}},t.removeKeycloakUserGroups=t.reducerName=void 0;var a=n(r(26)),o=r(51),i=n(r(585)),u=r(433),c=n(r(201));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d="keycloakUserGroups";t.reducerName=d;var f="keycloak/reducer/userGroups/USER_GROUPS_FETCHED";t.USER_GROUPS_FETCHED=f;var p="keycloak/reducer/userGroups/REMOVE_USER_GROUPS";t.REMOVE_USER_GROUPS=p;t.fetchKeycloakUserGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{userGroupsById:(0,o.keyBy)(e,(function(e){return e.id})),type:f}};t.removeKeycloakUserGroups=function(){return{userGroupsById:{},type:p}};var m=(0,c.default)({userGroupsById:{}});t.initialState=m;var v=function(e,t){return t.id};t.getUserGroupsIds=v;var y=function(e,t){return t.name};t.getGroupName=y;var g=function(e,t){return t.searchText};function E(e){return e[d].userGroupsById}function O(e){return(0,o.values)(E(e))}t.getSearchText=g;var h=function(){return(0,u.createSelector)(O,y,(function(e,t){return void 0===t?e:e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}))};t.getUserGroupByName=h;var b=function(){return(0,u.createSelector)(E,v,O,(function(e,t,r){return void 0===t?r:t.length>0?t.map((function(t){return e[t]})):[]}))};t.getKeycloakUserGroupsByIds=b;var P=b(),_=h();t.makeKeycloakUserGroupsSelector=function(){return(0,u.createSelector)(P,_,g,(function(e,t,r){var n=(0,i.default)([e,t],JSON.stringify);return n.filter((function(e){return t=e,void 0===r||t.name.toLowerCase().includes(r.toLowerCase());var t}))}))}},406:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchKeycloakUserRoles=t.USER_ROLES_FETCHED=t.REMOVE_USER_ROLES=void 0,t.getKeycloakUserRolesArray=O,t.getKeycloakUserRolesById=E,t.makeKeycloakUserRolesSelector=t.initialState=t.getUserRolesIds=t.getUserRoleByName=t.getSearchText=t.getRoleName=t.getKeycloakUserRolesByIds=void 0,t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return(0,c.default)(l(l({},e),{},{userRolesById:l(l({},e.userRolesById),t.userRolesById)}));case p:return(0,c.default)(l(l({},e),{},{userRolesById:t.userRolesById}));default:return e}},t.removeKeycloakUserRoles=t.reducerName=void 0;var a=n(r(26)),o=r(51),i=n(r(585)),u=r(433),c=n(r(201));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d="keycloakUserRoles";t.reducerName=d;var f="keycloak/reducer/userRoles/USER_ROLES_FETCHED";t.USER_ROLES_FETCHED=f;var p="keycloak/reducer/userRoles/REMOVE_USER_ROLES";t.REMOVE_USER_ROLES=p;t.fetchKeycloakUserRoles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{userRolesById:(0,o.keyBy)(e,(function(e){return e.id})),type:f}};t.removeKeycloakUserRoles=function(){return{userRolesById:{},type:p}};var m=(0,c.default)({userRolesById:{}});t.initialState=m;var v=function(e,t){return t.id};t.getUserRolesIds=v;var y=function(e,t){return t.name};t.getRoleName=y;var g=function(e,t){return t.searchText};function E(e){return e[d].userRolesById}function O(e){return(0,o.values)(E(e))}t.getSearchText=g;var h=function(){return(0,u.createSelector)(O,y,(function(e,t){return void 0===t?e:e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}))};t.getUserRoleByName=h;var b=function(){return(0,u.createSelector)(E,v,O,(function(e,t,r){return void 0===t?r:t.length>0?t.map((function(t){return e[t]})):[]}))};t.getKeycloakUserRolesByIds=b;var P=b(),_=h();t.makeKeycloakUserRolesSelector=function(){return(0,u.createSelector)(P,_,g,(function(e,t,r){var n=(0,i.default)([e,t],JSON.stringify);return n.filter((function(e){return t=e,void 0===r||t.name.toLowerCase().includes(r.toLowerCase());var t}))}))}},407:function(e,t,r){},408:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.useGetLocationHierarchy=t.useGetLocation=t.serializeTree=t.parseFHIRHierarchy=t.generateFhirLocationTree=t.convertApiResToTree=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(26)),u=r(51),c=n(r(1270)),s=n(r(1271)),l=r(67),d=r(22),f=r(275);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function e(t){return t.map((function(t){var r,n=t.treeNode;return m(m({},n),{},{children:e(null!==(r=n.children)&&void 0!==r?r:[])})}))},y=function(e){var t,r=(0,u.cloneDeep)(e).LocationHierarchyTree.locationsHierarchy.listOfNodes.treeNode[0];return m(m({},r),{},{children:v(null!==(t=r.children)&&void 0!==t?t:[])})};t.parseFHIRHierarchy=y;var g=function(e){var t=new s.default,r=y(e);return t.parse(r)};t.generateFhirLocationTree=g;var E=function(e){var t,r=null===(t=e.entry)||void 0===t?void 0:t[0].resource;if(r)return g(r)};t.convertApiResToTree=E;t.serializeTree=function(e){if(!e)return JSON.stringify(void 0);var t=Array.isArray(e)?e:[e];return JSON.stringify(t.map((function(e){return JSON.stringify(c.default.decycle(e))})))};t.useGetLocationHierarchy=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={_id:t};return(0,l.useQuery)([f.locationHierarchyResourceType,n],(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new d.FHIRServiceClass(e,f.locationHierarchyResourceType).list(n));case 1:case"end":return t.stop()}}),t)}))),m({select:function(e){return E(e)},refetchInterval:!1,staleTime:1/0},r))};t.useGetLocation=function(e,t){var r=new d.FHIRServiceClass(e,f.locationResourceType);return(0,l.useQuery)([f.locationResourceType,t],(function(){return r.read(t)}),{select:function(e){return e},enabled:!!t})}},409:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocationFormFields=t.generateLocationUnit=t.defaultFormField=void 0,t.postPutLocationUnit=function(e,t){return p.apply(this,arguments)},t.validationRulesFactory=t.treeToOptions=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(26)),u=r(181),c=r(51),s=r(22);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={id:"",name:"",parentId:void 0,status:r(588).LocationUnitStatus.ACTIVE,isJurisdiction:!0,description:void 0,alias:void 0};t.defaultFormField=f;t.getLocationFormFields=function(e,t){var r;return d(d({},null!==e&&void 0!==e?e:f),{},{isJurisdiction:!0,parentId:null!==t&&void 0!==t?t:null===e||void 0===e||null===(r=e.partOf)||void 0===r?void 0:r.reference})};t.generateLocationUnit=function(e,t,r){var n,a=e.id,o=e.name,i=e.status,s=e.description,l=e.alias,d=e.isJurisdiction,f=(0,c.get)(t,"identifier.0.value"),p=f||(0,u.v4)();r&&(n={reference:r.model.nodeId,display:r.model.node.name});var m={resourceType:"Location",status:i,name:o,alias:l,description:s,partOf:n,identifier:[{use:"official",value:p}],physicalType:{coding:[{system:"http://terminology.hl7.org/CodeSystem/location-physical-type",code:d?"jdn":"bu",display:d?"Jurisdiction":"Building"}]}};return m.id=a||(0,u.v4)(),m};t.validationRulesFactory=function(e){return{id:[{type:"string"}],parentId:[{type:"string",message:e("Parent ID can only contain letters, numbers and spaces")},{required:!1}],name:[{type:"string",message:e("Name can only contain letters, numbers and spaces")},{required:!0,message:e("Name is required")}],alias:[{type:"string",message:e("Name can only contain letters, numbers and spaces")},{required:!0,message:e("Alias is required")}],status:[{type:"string"},{required:!0,message:e("Status is required")}],isJurisdiction:[{type:"boolean"},{required:!1}],description:[{type:"string"},{required:!1}]}};function p(){return(p=(0,o.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new s.FHIRServiceClass(r,"Location"),e.abrupt("return",n.update(t).catch((function(e){throw e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.treeToOptions=function(e,t){return e.map((function e(r){var n=d({value:r.model.nodeId,title:r.model.node.name},t?{disabled:t(r)}:{});return r.hasChildren()&&(n.children=r.children.map(e)),n}))}},410:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-healthcare-service";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},411:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-client";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},413:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-care-team";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},414:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.practitionerRoleResourceType=t.practitionerResourceType=t.organizationResourceType=t.keycloakCountEndpoint=t.groupResourceType=t.careTeamResourceType=void 0;t.practitionerResourceType="Practitioner";t.careTeamResourceType="CareTeam";t.organizationResourceType="Organization";t.groupResourceType="Group";t.practitionerRoleResourceType="PractitionerRole";t.keycloakCountEndpoint="count"},535:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.resourceTypeParam=t.resourceIdParam=t.questionnaireResponseResourceType=t.questionnaireResourceType=t.QuestRForm=t.BaseQuestRForm=void 0;var a=n(r(26)),o=n(r(0)),i=n(r(1328)),u=r(1561),c=r(378),s=r(57),l=n(r(628)),d=r(38),f=r(22),p=r(62),m=r(32),v=r(67),y=r(1570),g=r(181);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=(0,c.createStore)(i.default,(0,c.applyMiddleware)(l.default)),b="QuestionnaireResponse";t.questionnaireResponseResourceType=b;var P="Questionnaire";t.questionnaireResourceType=P;var _=function(e){var t=e.resourceId,r=e.fhirBaseURL,n=e.onSubmit,a=e.onCancel,i=e.isQuestionnaire,c=(0,y.useTranslation)().t,l=(0,v.useQuery)([b,t],(function(){return new f.FHIRServiceClass(r,b).read(t)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,enabled:!i}),d=l.isLoading,p=l.data,g=l.error,E=i?"".concat(P,"/").concat(t):null===p||void 0===p?void 0:p.questionnaire,O=(0,v.useQuery)([P,E],(function(){return new f.FHIRServiceClass(r,"").read(E)}),{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,enabled:i||!(null===p||void 0===p||!p.questionnaire)}),_=O.isLoading,R=O.data,T=O.error;return _||d?o.default.createElement(m.Spin,{size:"large",className:"custom-spinner"}):T&&!R&&g&&!p?o.default.createElement(f.BrokenPage,{errorMessage:"".concat(T)}):o.default.createElement("div",{className:"content-section"},o.default.createElement(s.Provider,{store:h,key:"1"},o.default.createElement(u.SkjemautfyllerContainer,{store:h,questionnaire:R,questionnaireResponse:p,onSubmit:n,onCancel:a,resources:{formCancel:c("Cancel"),formSend:c("Submit")},authorized:!0})))};t.BaseQuestRForm=_;t.resourceIdParam="resourceId";t.resourceTypeParam="resourceType";t.QuestRForm=function(e){var t=(0,d.useParams)(),r=t.resourceId,n=t.resourceType,a=(0,d.useHistory)(),i=(0,y.useTranslation)().t,u="Questionnaire"===n,c=e.fhirBaseURL,s={resourceId:r,isQuestionnaire:u,onSubmit:function(e){var t=O(O({},e),{},{id:(0,g.v4)()});new f.FHIRServiceClass(c,b).update(t).then((function(){return(0,p.sendSuccessNotification)(i("Questionnaire Response resource submitted successfully"))})).catch((function(e){return(0,p.sendErrorNotification)(e)}))},onCancel:function(){return a.goBack()},fhirBaseURL:c};return o.default.createElement(_,s)}},540:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchProtectedImage=t.OpenSRPService=t.FHIRServiceClass=void 0,t.handleSessionOrTokenExpiry=T;var a=n(r(45)),o=n(r(53)),i=n(r(52)),u=n(r(26)),c=n(r(50)),s=n(r(49)),l=n(r(80)),d=n(r(344)),f=n(r(241)),p=r(228),m=r(712),v=r(212),y=r(220),g=r(108),E=r(386),O=r(141),h=n(r(566));function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,O.getAllConfigs)(),_=function(e){(0,l.default)(r,e);var t=b(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.OPENSRP_API_BASE_URL,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.getFetchOptions;return(0,s.default)(this,r),t.call(this,T,n,e,a)}return(0,c.default)(r)}(m.OpenSRPService);t.OpenSRPService=_;var R=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new AbortController).signal;(0,s.default)(this,e),(0,u.default)(this,"accessTokenOrCallBack",void 0),(0,u.default)(this,"baseURL",void 0),(0,u.default)(this,"resourceType",void 0),(0,u.default)(this,"signal",void 0),this.accessTokenOrCallBack=T,this.baseURL=t,this.resourceType=r,this.signal=n}return(0,c.default)(e,[{key:"buildQueryParams",value:function(e){if(e){var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var r,n=(0,i.default)(e,2),a=n[0],o=n[1];t.append(a,null!==(r=null===o||void 0===o?void 0:o.toString())&&void 0!==r?r:"")})),"".concat(this.resourceType,"/_search?").concat(t.toString())}return this.resourceType}},{key:"buildState",value:function(e){return{serverUrl:this.baseURL,tokenResponse:{access_token:e}}}},{key:"create",value:function(){var e=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.processAcessToken(this.accessTokenOrCallBack);case 2:return r=e.sent,n=h.default.client(this.buildState(r)),e.abrupt("return",n.create(t,{signal:this.signal}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.processAcessToken(this.accessTokenOrCallBack);case 2:return r=e.sent,n=h.default.client(this.buildState(r)),e.abrupt("return",n.update(t,{signal:this.signal}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=(0,o.default)(a.default.mark((function e(){var t,r,n,o,i=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:null,e.next=3,_.processAcessToken(this.accessTokenOrCallBack);case 3:return r=e.sent,n=this.buildQueryParams(t),o=h.default.client(this.buildState(r)),e.abrupt("return",o.request({url:n,headers:{"cache-control":"no-cache"}}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.processAcessToken(this.accessTokenOrCallBack);case 2:return r=e.sent,n=h.default.client(this.buildState(r)),e.abrupt("return",n.request({url:"".concat(this.resourceType,"/").concat(t),headers:{"cache-control":"no-cache"}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,o.default)(a.default.mark((function e(t){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.processAcessToken(this.accessTokenOrCallBack);case 2:return r=e.sent,n=h.default.client(this.buildState(r)),e.abrupt("return",n.delete("".concat(this.resourceType,"/").concat(t),{signal:this.signal}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function T(){return S.apply(this,arguments)}function S(){return(S=(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,g.isTokenExpired)(p.store.getState())){e.next=13;break}return e.prev=1,e.next=4,(0,y.refreshToken)("".concat(E.EXPRESS_TOKEN_REFRESH_URL),p.store.dispatch,{});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),v.history.push("".concat(P.appLoginURL)),new Error("Session Expired");case 11:e.next=14;break;case 13:return e.abrupt("return",(0,g.getAccessToken)(p.store.getState()));case 14:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}t.FHIRServiceClass=R;var j=function(){var e=(0,o.default)(a.default.mark((function e(t){var r,n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return r=e.sent,e.next=5,(0,m.customFetch)(t,{headers:{authorization:"Bearer ".concat(r)},method:"GET"});case 5:if(!(n=e.sent)){e.next=11;break}return e.next=9,n.blob();case 9:return o=e.sent,e.abrupt("return",URL.createObjectURL(o));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.fetchProtectedImage=j},581:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewDetailsQuery=t.startingPageSize=t.startingPage=t.searchQuery=t.pageSizeQuery=t.pageQuery=t.matchesOnName=t.getStringParam=t.getNumberParam=t.getNextUrlOnSearch=void 0;var n="pageSize";t.pageSizeQuery=n;var a="page";t.pageQuery=a;var o="search";t.searchQuery=o;t.viewDetailsQuery="viewDetails";t.getStringParam=function(e,t){return new URLSearchParams(e.search).get(t)};t.getNumberParam=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new URLSearchParams(e.search),a=n.get(t),o=a?Number(a):NaN;return isNaN(o)?r:o};t.startingPage=1;t.startingPageSize=20;t.getNextUrlOnSearch=function(e,t,r){var i=e.target.value,u=r.path,c=new URLSearchParams(t.search);return i?(c.set(o,i),c.set(a,1..toString()),c.set(n,20..toString())):c.delete(o),u="".concat(u,"?").concat(c.toString())};t.matchesOnName=function(e,t){var r=e.name;return void 0!==r&&r.toLowerCase().includes(t.toLowerCase())}},582:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Permit=t.IamResources=t.FhirResources=void 0,t.Permit=n,function(e){e[e.CREATE=1]="CREATE",e[e.READ=2]="READ",e[e.UPDATE=4]="UPDATE",e[e.DELETE=8]="DELETE",e[e.MANAGE=15]="MANAGE"}(n||(t.Permit=n={}));t.IamResources=["iam_user","iam_role","iam_group"];t.FhirResources=["Patient","Practitioner","PractitionerRole","Group","Organization","OrganizationAffiliation","HealthcareService","Location","Observation","QuestionnaireResponse","CareTeam","PlanDefinition","Questionnaire"]},583:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.UserRole=void 0;var a=n(r(90)),o=n(r(52)),i=n(r(49)),u=n(r(50)),c=n(r(26)),s=r(745);function l(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;(0,i.default)(this,e),(0,c.default)(this,"permissions",void 0);var n=new Map;if(r){var a,o=(0,s.makeArray)(t),u=l(o);try{for(u.s();!(a=u.n()).done;){var d=a.value;n.set(d,r)}}catch(f){u.e(f)}finally{u.f()}this.permissions=n}else this.permissions=n}return(0,u.default)(e,[{key:"getPermissionMap",value:function(){return this.permissions}},{key:"hasRoles",value:function(e){var t,r=l((0,s.makeArray)(e));try{for(r.s();!(t=r.n()).done;){var n,a=l(t.value.permissions.entries());try{for(a.s();!(n=a.n()).done;){var i=(0,o.default)(n.value,2),u=i[0],c=i[1];if(!this.permissions.has(u))return!1;if(this.permissions.get(u)&&0===c)return!1}}catch(d){a.e(d)}finally{a.f()}}}catch(d){r.e(d)}finally{r.f()}return!0}},{key:"hasPermissions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",n=(0,s.makeArray)(e),a=(0,s.parsePermissionStr)(n),i=function(e){var r,n=l(e.entries());try{for(n.s();!(r=n.n()).done;){var a=(0,o.default)(r.value,2),i=a[0],u=a[1];return!!t.permissions.has(i)&&0!==(t.permissions.get(i)&u)}}catch(c){n.e(c)}finally{n.f()}};switch(r){case"all":return a.every(i);case"any":return a.some(i);default:return!1}}}],[{key:"fromResourceMap",value:function(t){var r=(0,a.default)(t.entries());if(r.length){var n,i=r.pop(),u=new e(i[0],i[1]),c=l(r);try{for(c.s();!(n=c.n()).done;){var s=(0,o.default)(n.value,2),d=s[0],f=s[1];u.permissions.set(d,f)}}catch(p){c.e(p)}finally{c.f()}return u}}},{key:"fromPermissionStrings",value:function(e){var t=(0,s.makeArray)(e),r=(0,s.parsePermissionStr)(t),n=(0,s.combineResourcePermits)(r);return this.fromResourceMap(n)}},{key:"combineRoles",value:function(t){var r,n=new Map,a=l(t);try{for(a.s();!(r=a.n()).done;){var i,u=l(r.value.getPermissionMap().entries());try{for(u.s();!(i=u.n()).done;){var c=(0,o.default)(i.value,2),s=c[0],d=c[1];n.has(s)?n.set(s,n.get(s)|d):n.set(s,d)}}catch(f){u.e(f)}finally{u.f()}}}catch(f){a.e(f)}finally{a.f()}return e.fromResourceMap(n)}}]),e}();t.UserRole=f},584:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.questionnaireResponseResourceType=t.questionnaireResourceType=t.QUEST_VIEW_URL=t.QUEST_RESPONSE_VIEW_URL=t.QUEST_FORM_VIEW_URL=void 0;t.questionnaireResourceType="Questionnaire";t.questionnaireResponseResourceType="QuestionnaireResponse";t.QUEST_VIEW_URL="/quest";t.QUEST_RESPONSE_VIEW_URL="/questR";t.QUEST_FORM_VIEW_URL="/quest-form"},586:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupOptionsFilter=t.submitForm=t.postPutPractitioner=t.getUserTypeCode=t.getUserType=t.getUserGroupsOptions=t.getUserAndGroupsPayload=t.getFormValues=t.getCompositionOptions=t.createOrEditPractitioners=t.compositionUrlFilter=void 0;var a=n(r(45)),o=n(r(26)),i=n(r(53)),u=r(212),c=r(181),s=r(168),l=r(62),d=r(133),f=r(22),p=r(757),m=r(51);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){var t,r=null===(t=e.headers.get("location"))||void 0===t?void 0:t.split("/");return r[r.length-1]},E=function(){var e=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,c,s,p=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>2&&void 0!==p[2]&&p[2],o=p.length>3?p[3]:void 0,i=new f.OpenSRPService(d.PRACTITIONER,t),c="create",s=o("Practitioner created successfully"),n&&(c="update",s=o("Practitioner updated successfully")),e.next=8,i[c](r).catch((function(e){n?(0,l.sendErrorNotification)(o("There was a problem updating practitioner")):(0,l.sendErrorNotification)(o("There was a problem creating practitioner"))})).then((function(){return(0,l.sendSuccessNotification)(s)}));case 8:n||u.history.push("".concat(d.URL_USER_CREDENTIALS,"/").concat(r.userId,"/").concat(r.username));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.createOrEditPractitioners=E;var O=function(){var e=(0,i.default)(a.default.mark((function e(t,r,n,o,i){var u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return u=new s.KeycloakService("".concat(d.KEYCLOAK_URL_USERS,"/").concat(r.id),t),e.abrupt("return",u.update(r).then((function(){(0,l.sendSuccessNotification)(i("User edited successfully")),o(r.id).catch((function(){return(0,l.sendErrorNotification)(i("There was a problem updating groups and practitioners"))}))})).catch((function(e){throw e})));case 5:return c=new s.KeycloakService(d.KEYCLOAK_URL_USERS,t),e.abrupt("return",c.create(r).then((function(e){(0,l.sendSuccessNotification)(i("User created successfully"));var t=g(e);o(t).catch((function(){return(0,l.sendErrorNotification)(i("There was a problem creating group and practitioner"))}))})).catch((function(e){throw e})));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.default)(a.default.mark((function e(t,r,n,o,c,f){var p,m,v,y;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=_(t),m=p.isEditMode,v=p.keycloakUser,y=function(){var e=(0,i.default)(a.default.mark((function e(i){var u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(u=[]).push(c(t,i,f)),t.userGroups&&t.userGroups.forEach((function(e){var t=n.find((function(t){return t.id===e})),a=new s.KeycloakService("".concat(d.KEYCLOAK_URL_USERS,"/").concat(i).concat(d.KEYCLOAK_URL_USER_GROUPS,"/").concat(e),r).update(t);u.push(a)})),o&&o.forEach((function(e){var n;if(null===(n=t.userGroups)||void 0===n||!n.includes(e)){var a=new s.KeycloakService("".concat(d.KEYCLOAK_URL_USERS,"/").concat(i).concat(d.KEYCLOAK_URL_USER_GROUPS,"/").concat(e),r).delete();u.push(a)}})),e.next=6,Promise.allSettled(u).catch((function(e){throw e})).then((function(){(0,l.sendSuccessNotification)(f("User Group edited successfully"))}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=4,O(r,v,m,y,f).catch((function(){m?(0,l.sendErrorNotification)(f("There was a problem updating the user profile")):(0,l.sendErrorNotification)(f("There was a problem creating the user"))}));case 4:m&&u.history.push(d.URL_USER);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}();t.submitForm=h;var b=function(e){var t;return null===(t=e.code)||void 0===t?void 0:t.flatMap((function(e){var t;return null===(t=e.coding)||void 0===t?void 0:t.map((function(e){return e.code}))})).find((function(e){return e===d.SUPERVISOR_USER_TYPE_CODE||e===d.PRACTITIONER_USER_TYPE_CODE}))};t.getUserTypeCode=b;var P=function(e){switch(e){case d.PRACTITIONER_USER_TYPE_CODE:return d.PRACTITIONER;case d.SUPERVISOR_USER_TYPE_CODE:return d.SUPERVISOR}};t.getUserType=P;t.getFormValues=function(e,t,r,n){var a;if(!e)return p.defaultUserFormInitialValues;var o=e.id,i=e.username,u=e.firstName,c=e.lastName,s=e.email,l=e.enabled,d=null!==(a=e.attributes)&&void 0!==a?a:{},f=d.contact,m=d.fhir_core_app_id,v=(null!==t&&void 0!==t?t:{}).active,y="practitioner";if(n){var g=b(n);g&&(y=P(g))}return{id:o,firstName:u,lastName:c,email:s,username:i,enabled:l,contact:null===f||void 0===f?void 0:f[0],active:v,userType:y,practitioner:t,userGroups:null===r||void 0===r?void 0:r.map((function(e){return e.id})),keycloakUser:e,practitionerRole:n,fhirCoreAppId:null===m||void 0===m?void 0:m[0]}};var _=function(e){var t,r,n=!!e.id,a=e.id,o=e.username,i=e.firstName,u=e.lastName,c=e.email,s=e.enabled,l=e.contact,d=e.fhirCoreAppId,f=y(y({},l?{contact:[l]}:{}),d?{fhir_core_app_id:[d]}:{}),p=(0,m.pickBy)(f,(function(e){return void 0!==e&&null!==e}));return{isEditMode:n,keycloakUser:y(y(y({},null!==(t=e.keycloakUser)&&void 0!==t?t:{}),{},{firstName:i,id:n?a:"",lastName:u,username:o},c?{email:c}:{}),{},{enabled:s},(0,m.some)(p)?{attributes:p}:{}),userGroups:null!==(r=e.userGroups)&&void 0!==r?r:[]}};t.getUserAndGroupsPayload=_;t.getUserGroupsOptions=function(e){return e.map((function(e){return{value:e.id,label:e.name}}))};t.userGroupOptionsFilter=function(e,t){return!(null===t||void 0===t||!t.label.toLowerCase().includes(e.toLowerCase()))};t.postPutPractitioner=function(e){return function(t,r,n){var a,o=t.id,i=t.username,u=t.firstName,s=t.lastName,l=t.enabled,d=t.active,f={active:!0,identifier:(0,c.v4)(),name:"".concat(u," ").concat(s),userId:r,username:i},p=!1!==l&&(void 0!==d&&d),m=t.practitioner;null!==m&&void 0!==m&&m.identifier&&(f=y(y({},m),{},{active:p,name:"".concat(u," ").concat(s),userId:o,username:i}));var v=!(null===(a=t.practitioner)||void 0===a||!a.identifier);return E(e,f,v,n)}};t.getCompositionOptions=function(e){var t=e.title,r=e.identifier;if(r){var n=r.value;return{label:"".concat(t,"(").concat(n,")"),value:n,ref:e}}};var R={type:"".concat(d.SNOMED_CODEABLE_SYSTEM,"|").concat(d.DEVICE_SETTING_CODEABLE_CODE),_elements:"identifier,title"};t.compositionUrlFilter=R},587:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.validationRulesFactory=t.getPractitionerOptions=t.getOrgTypeSelectOptions=t.getOrgFormFields=t.getAssignedPractsOptions=t.generateOrgPayload=t.FindAssignedLocations=void 0;var a=n(r(90)),o=r(204),i=r(22),u=r(51),c=r(181),s=r(141);t.validationRulesFactory=function(e){return{id:[{type:"string"}],identifier:[{type:"string"}],name:[{type:"string",message:e("Must be a valid string")},{required:!0,message:e("Required")}],alias:[{type:"string",message:e("Must be a valid string")},{required:!1}],status:[{type:"boolean"},{required:!0,message:e("Required")}],type:[{type:"string"},{required:!1}],members:[{type:"array"},{required:!1}]}};t.getOrgFormFields=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return{type:"team",active:!0};var a=e.id,c=e.name,s=e.alias,l=e.active,d=e.identifier,f=e.type,p=(0,u.flatten)((null!==f&&void 0!==f?f:[]).map((function(e){var t;return Object.values(null!==(t=e.coding)&&void 0!==t?t:{})}))),m=(0,i.getObjLike)(p,"system",o.organizationTypeValueSetUrl,!0),v=(0,i.getObjLike)(d,"use",i.IdentifierUseCodes.OFFICIAL),y={id:a,identifier:null===(t=v[0])||void 0===t?void 0:t.value,active:l,name:c,alias:null===s||void 0===s?void 0:s[0],type:null===(r=m[0])||void 0===r?void 0:r.code,members:n.map((function(e){var t;return null===(t=e.practitioner)||void 0===t?void 0:t.reference}))};return y};t.generateOrgPayload=function(e){var t=e.id,r=e.identifier,n=e.active,a=e.name,u=e.alias,s=e.type,l={resourceType:o.organizationResourceType,active:!!n,name:a,id:t},d=r;return r||(d=(0,c.v4)()),l.identifier=[{value:d,use:i.IdentifierUseCodes.OFFICIAL}],u&&(l.alias=[u]),s&&(l.type=[{coding:[{code:s,system:o.OrganizationTypeVS.system}]}]),void 0===t&&(l.id=(0,c.v4)()),l};t.getOrgTypeSelectOptions=function(){var e=o.OrganizationTypeVS.system;return o.OrganizationTypeVS.codings.map((function(t){return{label:t.display,value:t.code,system:e}}))};t.getAssignedPractsOptions=function(e){return e.map((function(e){var t=e.practitioner;return{label:null===t||void 0===t?void 0:t.display,value:null===t||void 0===t?void 0:t.reference}}))};t.getPractitionerOptions=function(e,t,r,n){var c=e,l=r.filter((function(e){var t;return null===(t=e.organization)||void 0===t?void 0:t.reference})),d=(0,u.groupBy)(l,"practitioner.reference");n&&n===s.PractToOrgAssignmentStrategy.ONE_TO_ONE&&(c=c.filter((function(e){var t="".concat(e.resourceType,"/").concat(e.id);return!d[t]})));var f=c.map((function(e){var t=(0,i.getObjLike)(e.name,"use",o.HumanNameUseCodes.OFFICIAL)[0],r="".concat(o.practitionerResourceType,"/").concat(e.id),n=(0,i.parseFhirHumanName)(t);return{value:r,label:null!==n&&void 0!==n?n:r}})),p=t.map((function(e){var t,r,n=null===(t=e.practitioner)||void 0===t?void 0:t.reference,a=null===(r=e.practitioner)||void 0===r?void 0:r.display;return{value:n,label:null!==a&&void 0!==a?a:n}}));return[].concat((0,a.default)(f),(0,a.default)(p))};t.FindAssignedLocations=function(e,t){var r=[];return e.forEach((function(e){var n=e.organization,a=e.location,i=null===n||void 0===n?void 0:n.reference;i&&"".concat(o.organizationResourceType,"/").concat(t)===i&&(null===a||void 0===a||a.forEach((function(e){r.push(e)})))})),r}},588:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LocationUnitStatus=void 0,t.LocationUnitStatus=n,function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.SUSPENDED="suspended"}(n||(t.LocationUnitStatus=n={}))},589:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroup=t.ViewDetailsWrapper=t.ViewDetails=void 0;var a=n(r(0)),o=r(66),i=r(32),u=r(276),c=r(67),s=r(22),l=r(51),d=r(307);t.parseGroup=function(e){var t=e.name,r=e.active,n=e.quantity,a=e.member,o=e.id,i=e.type,u=e.characteristic,c=e.identifier,d=(0,s.getObjLike)(c,"use",s.IdentifierUseCodes.OFFICIAL);return{name:t,active:r,id:o,identifier:(0,l.get)(d,"0.value"),lastUpdated:(0,l.get)(e,"meta.lastUpdated"),members:a,quantity:n,type:i,characteristic:u,obj:e}};var f=function(e){var t=e.resourceId,r=e.fhirBaseURL,n=e.keyValueMapperRenderProp,o=(0,d.useTranslation)().t,l=(0,c.useQuery)([u.groupResourceType,t],(function(){return new s.FHIRServiceClass(r,u.groupResourceType).read(t)})),f=l.data,p=l.isLoading,m=l.error;return p?a.default.createElement(i.Spin,{size:"large",className:"custom-spinner"}):m&&!f?a.default.createElement(i.Alert,{type:"error",message:"".concat(m)}):n(f,o)};t.ViewDetails=f;t.ViewDetailsWrapper=function(e){var t=e.resourceId,r=e.fhirBaseURL,n=e.keyValueMapperRenderProp,u=(0,s.useSearchParams)().removeParam;return t?a.default.createElement(i.Col,{className:"view-details-content"},a.default.createElement("div",{className:"flex-right"},a.default.createElement(i.Button,{"data-testid":"close-button",icon:a.default.createElement(o.CloseOutlined,null),shape:"circle",type:"text",onClick:function(){return u(s.viewDetailsQuery)}})),a.default.createElement(f,{resourceId:t,fhirBaseURL:r,keyValueMapperRenderProp:n})):null}},590:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.buildObservationValueString=function(e){var t="";e.component&&Array.isArray(e.component)?e.component.forEach((function(e,r){t+="".concat(i(e).replace("Blood Pressure",""),": ").concat((0,a.default)(e,"valueQuantity.value")||"").concat((0,a.default)(e,"valueQuantity.unit")||"").concat(r>0?"":", ")})):t="".concat((0,a.default)(e,"valueQuantity.value")||""," ").concat((0,a.default)(e,"valueQuantity.unit")||"")||"N/A";return t},t.getObservationLabel=i,t.getPath=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.split(".").reduce((function(e,t){return e?e[t]:void 0}),e)},t.getPatientName=function(e){var t;if(!e)return"";var r=null===(t=e.name)||void 0===t?void 0:t[0];return(0,o.parseFhirHumanName)(r)};var a=n(r(767)),o=r(22);function i(e){return(0,a.default)(e,"code.coding.0.display")||(0,a.default)(e,"code.text")||(0,a.default)(e,"valueQuantity.code")}},62:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1005);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}))},645:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.useHandleUnauthorizedPage=t.UnauthorizedPage=void 0;var o=n(r(52)),i=n(r(26)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(32),s=r(62),l=r(385),d=r(267);function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var m=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l.extraLinksDefault),v=function(e){var t=e.errorMessage,r=e.title,n=(0,d.useTranslation)().t,a=null!==t&&void 0!==t?t:n("Sorry, you are not authorized to access this page"),o=null!==r&&void 0!==r?r:n("Error"),i={homeUrl:e.homeUrl};return u.default.createElement(c.Result,{status:"403",title:o,subTitle:a,extra:u.default.createElement(l.ExtraLinks,i)})};t.UnauthorizedPage=v,v.defaultProps=m;t.useHandleUnauthorizedPage=function(){var e=(0,u.useState)(!1),t=(0,o.default)(e,2),r=t[0],n=t[1],a=(0,u.useState)(),i=(0,o.default)(a,2),c=i[0],l=i[1];return{unauthorized:r,errorMessage:c,handleUnauthorizedPage:function(e){(0,s.sendWarningNotification)(e.name,e.message),l(e.message),n(!0)}}}},712:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1148);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(713);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},713:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.throwNetworkError=t.throwHTTPError=t.NetworkError=t.HTTPError=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(122)),u=n(r(26)),c=n(r(50)),s=n(r(49)),l=n(r(80)),d=n(r(344)),f=n(r(241));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var m=function(e){(0,l.default)(r,e);var t=p(r);function r(){var e;return(0,s.default)(this,r),(e=t.call(this)).name=e.constructor.name,e}return(0,c.default)(r)}((0,n(r(565)).default)(Error)),v=function(e){(0,l.default)(r,e);var t=p(r);function r(e,n,a){var o;return(0,s.default)(this,r),o=t.call(this),(0,u.default)((0,i.default)(o),"statusCode",void 0),(0,u.default)((0,i.default)(o),"statusText",void 0),(0,u.default)((0,i.default)(o),"url",void 0),(0,u.default)((0,i.default)(o),"description",void 0),o.statusCode=e.status,o.statusText=e.statusText,o.description=n,o.url=e.url,a&&(o.message=a),o}return(0,c.default)(r)}(m);t.HTTPError=v;var y=function(e){(0,l.default)(r,e);var t=p(r);function r(){return(0,s.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r)}(m);t.NetworkError=y;var g=function(){var e=(0,o.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clone(),e.next=3,n.text().then((function(e){throw new v(t,e,r)}));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.throwHTTPError=g;t.throwNetworkError=function(e){if("TypeError"===e.name)throw new y;throw e}},744:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.parseFhirHumanName=t.loadAllResources=t.getObjLike=t.IdentifierUseCodes=void 0;var a=n(r(45)),o=n(r(26)),i=n(r(53)),u=r(22),c=r(51);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d;t.getObjLike=function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=null!==e&&void 0!==e?e:[],o=[],i=0;i<a.length;i++){var u=a[i],s=u[t];if((0,c.isEqual)(s,r)&&o.push(u),o.length>0&&!n)return o}return o},t.IdentifierUseCodes=d,function(e){e.USUAL="usual",e.OFFICIAL="official",e.TEMP="temp",e.SECONDARY="secondary",e.OLD="old"}(d||(t.IdentifierUseCodes=d={}));var f=function(){var e=(0,i.default)(a.default.mark((function e(t,r){var n,o,i,c,s,d=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>2&&void 0!==d[2]?d[2]:{},o=l({_summary:"count"},n),e.next=4,new u.FHIRServiceClass(t,r).list(o);case 4:return i=e.sent,c=i.total,s=l(l({},c?{_count:c}:{}),n),e.abrupt("return",new u.FHIRServiceClass(t,r).list(s));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.loadAllResources=f;t.parseFhirHumanName=function(e){if(e){var t=e.family,r=e.given,n=e.suffix,a=function(e){return e?Array.isArray(e)?e:[e]:[]};return[a(e.prefix).join(" "),a(r).join(" "),a(t).join(" "),a(n).join(" ")].filter((function(e){return!!e})).join(" ")}}},745:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.combineResourcePermits=function(e){return e.reduce((function(e,t){var r,n=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(t.entries());try{for(n.s();!(r=n.n()).done;){var o=(0,a.default)(r.value,2),i=o[0],u=o[1],s=e.get(i);s?e.set(i,s|u):e.set(i,u)}}catch(l){n.e(l)}finally{n.f()}return e}),new Map)},t.makeArray=function(e){var t=e;Array.isArray(e)||(t=[e]);return t},t.parsePermissionStr=function(e){return e.map((function(e){var t=new Map,r=d(e);(0,u.default)(r,"Permission string: '".concat(e,"' is not internally recognized as a valid permission string."));var n=e.split("."),a=n[0],o=i.Permit[n[1].toUpperCase()];return t.set(a,o),t}))},t.permitLiteralKeys=void 0,t.validatePermissionStr=d;var a=n(r(52)),o=n(r(90)),i=r(582),u=n(r(1212));function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=[].concat((0,o.default)(i.IamResources),(0,o.default)(i.FhirResources)).map((function(e){return e})),l=Object.keys(i.Permit).map((function(e){return e.toLowerCase()}));function d(e){var t=e.split(".");if(2!==t.length)return!1;var r=(0,a.default)(t,2),n=r[0],o=r[1],i=s.includes(n),u=l.includes(o.toLowerCase());return!(!i||!u)}t.permitLiteralKeys=l},746:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1220);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1221);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},747:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-resources";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},752:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTranslation=t.namespace=void 0;var n=r(114),a="fhir-views";t.namespace=a;t.useTranslation=function(e,t){return(0,n.useTranslation)(e||a,t)}},753:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.validationRulesFactory=t.postPutHealthCareService=t.orgFilterFunction=t.getOrgSelectOptions=t.getHealthCareFormFields=t.generateHealthCarePayload=void 0;var a=n(r(26)),o=n(r(79)),i=r(181),u=r(22),c=r(51),s=r(306),l=r(233),d=["meta"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.validationRulesFactory=function(e){return{id:[{type:"string"}],identifier:[{type:"string"}],name:[{type:"string",message:e("Must be a valid string")},{required:!0,message:e("Required")}],active:[{type:"boolean"},{required:!0,message:e("Required")}],comment:[{type:"string"},{required:!1}],providedBy:[{type:"string"},{required:!1}],extraDetails:[{type:"string"},{required:!1}]}};t.getHealthCareFormFields=function(e){if(!e)return{};var t=e.id,r=e.name,n=e.active,a=e.identifier,o=e.providedBy,i=e.comment,s=e.extraDetails,l=(0,u.getObjLike)(a,"use",u.IdentifierUseCodes.OFFICIAL);return{initialObject:e,id:t,identifier:(0,c.get)(l,"0.value"),active:n,name:r,providedBy:(0,c.get)(o,"reference",void 0),comment:i,extraDetails:s}};t.generateHealthCarePayload=function(e,t,r){var n=e.id,a=e.identifier,f=e.active,m=e.name,v=e.providedBy,y=e.extraDetails,g=e.comment,E=r.initialObject,O=(0,c.keyBy)(t,(function(e){return"".concat(l.organizationResourceType,"/").concat(e.id)})),h={resourceType:s.healthCareServiceResourceType,active:!!f};if(E){E.meta;h=p(p({},(0,o.default)(E,d)),h)}m&&(h.name=m),h.id=n||(0,i.v4)();var b=a;return a||(b=(0,i.v4)()),h.identifier=[{value:b,use:u.IdentifierUseCodes.OFFICIAL}],v&&(h.providedBy={reference:v,display:(0,c.get)(O[v],"name","")}),y&&(h.extraDetails=y),g&&(h.comment=g),h};t.getOrgSelectOptions=function(e){return e.map((function(e){var t,r="".concat(l.organizationResourceType,"/").concat(e.id);return{value:r,label:null!==(t=e.name)&&void 0!==t?t:r}}))};t.orgFilterFunction=function(e,t){return!(null===t||void 0===t||!t.label.toLowerCase().includes(e.toLowerCase()))};t.postPutHealthCareService=function(e,t){return new u.FHIRServiceClass(e,s.healthCareServiceResourceType).update(t)}},754:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.throwNetworkError=t.throwHTTPError=t.NetworkError=t.HTTPError=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(122)),u=n(r(26)),c=n(r(50)),s=n(r(49)),l=n(r(80)),d=n(r(344)),f=n(r(241));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var m=function(e){(0,l.default)(r,e);var t=p(r);function r(){var e;return(0,s.default)(this,r),(e=t.call(this)).name=e.constructor.name,e}return(0,c.default)(r)}((0,n(r(565)).default)(Error)),v=function(e){(0,l.default)(r,e);var t=p(r);function r(e,n,a){var o;return(0,s.default)(this,r),o=t.call(this),(0,u.default)((0,i.default)(o),"statusCode",void 0),(0,u.default)((0,i.default)(o),"statusText",void 0),(0,u.default)((0,i.default)(o),"url",void 0),(0,u.default)((0,i.default)(o),"description",void 0),o.statusCode=e.status,o.statusText=e.statusText,o.description=n&&n.error_description,o.url=e.url,a&&(o.message=a),o}return(0,c.default)(r)}(m);t.HTTPError=v;var y=function(e){(0,l.default)(r,e);var t=p(r);function r(){var e;return(0,s.default)(this,r),(e=t.call(this)).name=e.constructor.name,e}return(0,c.default)(r)}(m);t.NetworkError=y;var g=function(){var e=(0,o.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clone(),e.next=3,n.json().then((function(e){throw new v(t,e,r)}));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.throwHTTPError=g;t.throwNetworkError=function(e){if("TypeError"===e.name)throw new y;throw e}},755:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAllRoles=void 0;var a=n(r(45)),o=n(r(53)),i=r(62),u=r(168),c=r(133),s=r(406),l=function(){var e=(0,o.default)(a.default.mark((function e(t,r,n){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new u.KeycloakService(c.KEYCLOAK_URL_USER_ROLES,t),e.next=3,o.list().then((function(e){r((0,s.fetchKeycloakUserRoles)(e))})).catch((function(e){(0,i.sendErrorNotification)(n("There was a problem fetching realm roles"))}));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();t.fetchAllRoles=l},756:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.submitForm=t.removeAssignedRoles=t.fetchSingleGroup=t.fetchRoleMappings=t.assignRoles=void 0;var a=n(r(45)),o=n(r(53)),i=r(212),u=r(168),c=r(62),s=r(133),l=r(405),d=function(){var e=(0,o.default)(a.default.mark((function e(t,r,n,o,i){var l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=new u.KeycloakService("".concat(s.KEYCLOAK_URL_USER_GROUPS,"/").concat(t).concat(n),r),e.next=3,l.list().then((function(e){o(e)})).catch((function(e){(0,c.sendErrorNotification)(i("There was a problem fetching role mappings"))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();t.fetchRoleMappings=d;var f=function(){var e=(0,o.default)(a.default.mark((function e(t,r,n,o,i){var l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],o.forEach((function(e){var t=n.find((function(t){return t.id===e}));l.push(t)})),d=new u.KeycloakService("".concat(s.KEYCLOAK_URL_USER_GROUPS,"/").concat(t).concat(s.KEYCLOAK_URL_ASSIGNED_ROLES),r),e.next=5,d.update(l,null,"DELETE").then((function(){(0,c.sendSuccessNotification)(i("Role Mappings Updated Successfully"))})).catch((function(e){(0,c.sendErrorNotification)(i("There was a problem removing assigned roles"))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();t.removeAssignedRoles=f;var p=function(){var e=(0,o.default)(a.default.mark((function e(t,r,n,o,i){var l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],o.forEach((function(e){var t=n.find((function(t){return t.id===e}));l.push(t)})),d=new u.KeycloakService("".concat(s.KEYCLOAK_URL_USER_GROUPS,"/").concat(t).concat(s.KEYCLOAK_URL_ASSIGNED_ROLES),r),e.next=5,d.create(l).then((function(){(0,c.sendSuccessNotification)(i("Role Mappings Updated Successfully"))})).catch((function(e){(0,c.sendErrorNotification)(i("There was a problem assigning roles"))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();t.assignRoles=p;var m=function(){var e=(0,o.default)(a.default.mark((function e(t,r,n,o){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new u.KeycloakService(s.KEYCLOAK_URL_USER_GROUPS,r),e.next=3,i.read(t).then((function(e){n((0,l.fetchKeycloakUserGroups)([e]))})).catch((function(e){(0,c.sendErrorNotification)(o("There was a problem fetching User Group"))}));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();t.fetchSingleGroup=m;var v=function(){var e=(0,o.default)(a.default.mark((function e(t,r,n,o){var l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id?new u.KeycloakService("".concat(s.KEYCLOAK_URL_USER_GROUPS,"/").concat(t.id),r).update(t).then((function(){return(0,c.sendSuccessNotification)(o("User Group edited successfully"))})).catch((function(e){return(0,c.sendErrorNotification)(o("There was a problem editing User Group"))})).finally((function(){i.history.push(s.URL_USER_GROUPS),n(!1)})):new u.KeycloakService(s.KEYCLOAK_URL_USER_GROUPS,r).create({name:t.name}).then((function(e){var t,r=null===(t=e.headers.get("location"))||void 0===t?void 0:t.split("/");l=r[r.length-1],(0,c.sendSuccessNotification)(o("User Group created successfully"))})).catch((function(e){return(0,c.sendErrorNotification)(o("There was a problem creating User Group"))})).finally((function(){n(!1),l&&i.history.push("".concat(s.URL_USER_GROUP_EDIT,"/").concat(l))}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();t.submitForm=v},757:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUserFormInitialValues=t.UserForm=void 0;var o=n(r(70)),i=n(r(26)),u=n(r(52)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),s=r(38),l=r(32),d=r(22),f=r(586),p=r(62);r(407);var m=r(758),v=r(195),y=r(133);function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t,r=e.initialValues,n=e.keycloakBaseURL,a=e.baseUrl,i=e.practitionerUpdaterFactory,g=e.extraData,E=e.userGroups,h=e.renderFields,b=e.hiddenFields,P=e.isFHIRInstance,_=function(e){return!(null===b||void 0===b||!b.includes(e))},R=(0,v.useTranslation)().t,T=i(a),S=l.Form.useForm(),j=(0,u.default)(S,1)[0],C=(0,c.useState)(!1),A=(0,u.default)(C,2),w=A[0],L=A[1],U=(0,s.useHistory)(),k=[{label:R("Yes"),value:!0},{label:R("No"),value:!1}];(0,c.useEffect)((function(){j.setFieldsValue(r)}),[j,r]);var I,N=(0,c.useState)(null!==(t=r.enabled)&&void 0!==t&&t),D=(0,u.default)(N,2),M=D[0],x=D[1];return(0,c.useEffect)((function(){M?j.setFields([{name:"active",value:r.active}]):j.setFields([{name:"active",value:!1}])}),[j,r,M]),c.default.createElement(l.Row,{className:"content-section"},c.default.createElement(d.PageHeader,{title:e.initialValues.id?R("Edit User | {{username}}",{username:r.username}):R("Add User")}),c.default.createElement(l.Col,{className:"bg-white p-3",span:24},c.default.createElement(l.Form,(0,o.default)({},{labelCol:{xs:{offset:0,span:16},sm:{offset:2,span:10},md:{offset:0,span:8},lg:{offset:0,span:6}},wrapperCol:{xs:{span:24},sm:{span:14},md:{span:12},lg:{span:10}}},{form:j,initialValues:r,onFinish:function(t){L(!0),(0,f.submitForm)(O(O({},r),t),n,E,r.userGroups,T,R).catch((function(t){e.initialValues.id&&(0,p.sendErrorNotification)(R("There was a problem updating user details")),(0,p.sendErrorNotification)(R("There was a problem creating User"))})).finally((function(){return L(!1)}))}}),c.default.createElement(l.Form.Item,{name:"firstName",id:"firstName",label:R("First Name"),rules:[{required:!0,message:R("First Name is required")}]},c.default.createElement(l.Input,null)),c.default.createElement(l.Form.Item,{name:"lastName",id:"lastName",label:R("Last Name"),rules:[{required:!0,message:R("Last Name is required")}]},c.default.createElement(l.Input,null)),c.default.createElement(l.Form.Item,{name:"email",id:"email",label:R("Email")},c.default.createElement(l.Input,null)),c.default.createElement(l.Form.Item,{name:"username",id:"username",label:R("Username"),rules:[{required:!0,message:R("Username is required")}]},c.default.createElement(l.Input,{disabled:!!r.id})),(I=m.CONTACT_FORM_FIELD,null!==h&&void 0!==h&&h.includes(I)?c.default.createElement(l.Form.Item,{id:m.CONTACT_FORM_FIELD,rules:[{type:"string",pattern:/^0\d{9}$/,message:R("Contact should be 10 digits and start with 0")},{required:!_(m.CONTACT_FORM_FIELD),message:R("Contact is required")}],hidden:_(m.CONTACT_FORM_FIELD),name:m.CONTACT_FORM_FIELD,label:R("Contact")},c.default.createElement(l.Input,null)):null),P?c.default.createElement(l.Form.Item,{id:"userType",name:"userType",label:R("User Type")},c.default.createElement(l.Radio.Group,{options:[{label:R("Practitioner"),value:y.PRACTITIONER},{label:R("Supervisor"),value:y.SUPERVISOR}],name:"userType"})):null,c.default.createElement(l.Form.Item,{id:"enabled",name:"enabled",label:R("Enable user")},c.default.createElement(l.Radio.Group,{options:k,name:"enabled",onChange:function(e){return x(e.target.value)}})),r.id&&r.id!==g.user_id?c.default.createElement(l.Form.Item,{id:"practitionerToggle",name:"active",label:R("Mark as Practitioner")},c.default.createElement(l.Radio.Group,{name:"active"},k.map((function(e){return c.default.createElement(l.Radio,{name:"active",key:e.label,value:e.value,disabled:!M},e.label)})))):null,c.default.createElement(l.Form.Item,{name:"userGroups",id:"userGroups",label:R("Keycloak User Group")},c.default.createElement(l.Select,{mode:"multiple",allowClear:!0,placeholder:R("Please select"),style:{width:"100%"},options:(0,f.getUserGroupsOptions)(E),filterOption:f.userGroupOptionsFilter})),P?c.default.createElement(l.Form.Item,{id:"fhirCoreAppId",name:"fhirCoreAppId",label:R("Application ID"),rules:[{required:!0,message:R("Application Id is required")}],"data-testid":"fhirCoreAppId"},c.default.createElement(d.FhirSelect,{baseUrl:a,resourceType:y.compositionResourceType,transformOption:f.getCompositionOptions,extraQueryParams:f.compositionUrlFilter,showSearch:!0})):null,c.default.createElement(l.Form.Item,{wrapperCol:{xs:{offset:0,span:16},sm:{offset:12,span:24},md:{offset:8,span:16},lg:{offset:6,span:14}}},c.default.createElement(l.Button,{type:"primary",htmlType:"submit",className:"create-user"},R(w?"SAVING":"Save")),c.default.createElement(l.Button,{onClick:function(){return U.goBack()},className:"cancel-user"},R("Cancel"))))))};t.UserForm=h;var b={firstName:"",id:"",lastName:"",username:"",active:!0,userType:"practitioner",userGroups:void 0,practitioner:void 0,contact:void 0,enabled:!0,fhirCoreAppId:void 0};t.defaultUserFormInitialValues=b,h.defaultProps={initialValues:b,practitionerUpdaterFactory:f.postPutPractitioner}},758:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTACT_FORM_FIELD=void 0;t.CONTACT_FORM_FIELD="contact"},759:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.reformatOrganizationByLocation=t.postPutAffiliations=t.orgsFilterFunction=t.keyAffiliationsByOrgLocIds=t.getOrgSelectOptions=t.getOrgOptionsFromAffiliations=void 0;var a=n(r(90)),o=n(r(26)),i=r(251),u=r(51),c=r(204),s=r(22),l=r(181);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.reformatOrganizationByLocation=function(e){var t={};return e.forEach((function(e){var r=e.organization,n=e.location;(null===r||void 0===r?void 0:r.reference)&&(null===n||void 0===n||n.forEach((function(r){var n=r.reference;n&&(t[n]||(t[n]=[]),t[n].push(e))})))})),t};t.getOrgSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{value:"".concat(c.organizationResourceType,"/").concat(e.id),label:e.name}}))};t.orgsFilterFunction=function(e,t){var r;return!(null===t||void 0===t||null===(r=t.label)||void 0===r||!r.toLowerCase().includes(e.toLowerCase()))};t.getOrgOptionsFromAffiliations=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t,r;return{value:null===(t=e.organization)||void 0===t?void 0:t.reference,label:null===(r=e.organization)||void 0===r?void 0:r.display,affiliation:e}}))};var p=function(e){return(0,u.transform)(e,(function(e,t){var r,n=null===(r=t.organization)||void 0===r?void 0:r.reference;e[n]||(e[n]={});var a=t.location;null===a||void 0===a||a.forEach((function(r){var a=r.reference;e[n][a]=t}))}),{})};t.keyAffiliationsByOrgLocIds=p;t.postPutAffiliations=function(e,t,r,n,o){var d=[],m=[],v=(0,u.keyBy)(t,"value"),y=(0,u.keyBy)(r,"value"),g=p(o);t.forEach((function(e){y[e.value]||d.push(e)})),r.forEach((function(e){v[e.value]||m.push(e)}));var E=new s.FHIRServiceClass(e,c.organizationAffiliationResourceType),O=[];m.forEach((function(e){var t=g[e.value]["".concat(i.locationResourceType,"/").concat(n.id)];if(t){var r,a=null!==(r=t.location)&&void 0!==r?r:[],o=a.filter((function(e){return e.reference!=="".concat(i.locationResourceType,"/").concat(n.id)}));0===o.length?O.push((function(){return E.delete(t.id)})):o.length!==a.length&&(t.location=o,O.push((function(){return E.update(t)})))}}));var h={};return d.forEach((function(e){var t=function(e,t,r){var n,o=e.value,u=null!==(n=t[o])&&void 0!==n?n:{},d=Object.values(u);if(d.length>0){var p,m=d[0];return f(f({},m),{},{location:[].concat((0,a.default)(null!==(p=m.location)&&void 0!==p?p:[]),[{reference:"".concat(i.locationResourceType,"/").concat(r.id),display:r.name}])})}return{resourceType:c.organizationAffiliationResourceType,id:(0,l.v4)(),identifier:[{use:s.IdentifierUseCodes.OFFICIAL,value:(0,l.v4)()}],active:!0,organization:{reference:e.value,display:e.label},location:[{reference:"".concat(i.locationResourceType,"/").concat(r.id),display:r.name}]}}(e,g,n);h[t.id]=t})),Object.values(h).forEach((function(e){return O.push((function(){return E.update(e)}))})),Promise.all(O.map((function(e){return e()})))}},760:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Tree=void 0;var o=n(r(26)),i=n(r(90)),u=n(r(52)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),s=r(32),l=r(66);r(1266);var d=r(51),f=r(274);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var v=function(e){var t=e.data,r=e.onSelect,n=e.selectedNode,a=(0,c.useState)([]),p=(0,u.default)(a,2),v=p[0],y=p[1],g=(0,c.useState)([]),E=(0,u.default)(g,2),O=E[0],h=E[1],b=(0,c.useState)(""),P=(0,u.default)(b,2),_=P[0],R=P[1],T=(0,f.useTranslation)().t;(0,c.useEffect)((function(){var e;if(n){var r=n.getPath(),a=(r=(0,d.slice)(r,1,r.length)).map((function(e){return e.model.nodeId}));e=a,y([].concat((0,i.default)(v),(0,i.default)(e)))}if(_){var o=[];t.forEach((function(e){var t=e.all((function(e){return e.model.node.name.toLowerCase().indexOf(_.toLowerCase())>-1}));o=[].concat((0,i.default)(o),(0,i.default)(t))}));var u=o.map((function(e){return e.parent.model.nodeId}));h(u)}else h([])}),[t,_,n]);var S=c.default.useCallback((function(e){return e.map((function(e){var t=e.model.node.name,r=t.toLowerCase().indexOf(_.toLowerCase()),n=t.toLowerCase().substr(0,r),a=t.toLowerCase().substr(r+_.length),i=c.default.createElement("span",{key:e.id,title:t},_.length>0&&r>-1?c.default.createElement(c.default.Fragment,null,n,c.default.createElement("span",{className:"searchValue"},_),a):t);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({data:e,key:e.model.nodeId,title:i},e.children?{children:S(e.children)}:{})}))}),[_]);return c.default.createElement("div",null,c.default.createElement(s.Input,{className:"mb-3",placeholder:T("Search"),size:"large",prefix:c.default.createElement(l.SearchOutlined,null),onChange:function(e){var t=e.target.value;R(t)}}),c.default.createElement(s.Tree,{onSelect:function(e,t){var n=t;if(n.selected)r(n.node.data);else{var a=v.filter((function(e){return e!==n.node.data.model.nodeId}));y(a),r()}},autoExpandParent:!0,selectedKeys:n?[n.model.nodeId]:void 0,onExpand:function(e,t){var r=t,n=r.node.data.model.nodeId;if(r.expanded)y([].concat((0,i.default)(v),[n]));else{var a=v.filter((function(e){return e!==n}));y(a)}},expandedKeys:[].concat((0,i.default)(v),(0,i.default)(O)),treeData:S(t)}))};t.Tree=v;var y=v;t.default=y},761:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.getSelectedNode=t.SET_LOCATION_TREE_STATE=void 0,t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;if(t.type===s)return u(u({},e),{},{selectedNode:t.selectedNode});return e},t.reducerName=void 0,t.setSelectedNode=function(e){return{selectedNode:e,type:s}};var a=n(r(26)),o=n(r(201));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c="location-tree-state";t.reducerName=c;var s="".concat(c,"/SET_LOCATION_TREE_STATE");t.SET_LOCATION_TREE_STATE=s;var l=(0,o.default)({selectedNode:void 0});t.initialState=l;t.getSelectedNode=function(e){return e[c].selectedNode}},762:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.LocationForm=void 0;var o=n(r(45)),i=n(r(70)),u=n(r(53)),c=n(r(52)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),l=r(32),d=r(38),f=r(62),p=r(409),m=r(275),v=r(1277),y=r(588),g=r(67),E=r(274),O=n(r(1586));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var b=l.Form.Item,P={initialValues:p.defaultFormField,successURLGenerator:function(){return"#"},hidden:[],disabled:[],onCancel:function(){}},_={labelCol:{xs:{span:24},sm:{span:4},md:{span:4},lg:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18},md:{span:16},lg:{span:14}}},R={wrapperCol:{xs:{offset:0,span:16},sm:{offset:12,span:24},md:{offset:8,span:16},lg:{offset:6,span:14}}},T=function(e){var t,r=e.initialValues,n=e.disabled,a=e.hidden,h=e.disabledTreeNodesCallback,P=e.fhirBaseURL,T=e.afterSubmit,S=e.successURLGenerator,j=e.onCancel,C=e.tree,A=!!r.id,w=null!==(t=C.first((function(e){return e.model.nodeId===r.parentId})))&&void 0!==t?t:C,L=(0,s.useState)(!1),U=(0,c.default)(L,2),k=U[0],I=U[1],N=(0,s.useState)(w),D=(0,c.default)(N,2),M=D[0],x=D[1],F=(0,s.useState)(!1),B=(0,c.default)(F,2),H=B[0],G=B[1],K=(0,s.useState)(),z=(0,c.default)(K,2),V=z[0],Q=z[1],Y=(0,g.useQueryClient)(),W=(0,E.useTranslation)().t,q=(0,p.validationRulesFactory)(W),Z=function(e){return a.includes(e)},J=l.Form.useForm(),X=(0,c.default)(J,1)[0];(0,O.default)((function(){X.resetFields()}),[X,r]);var $=[{label:W("Active"),value:y.LocationUnitStatus.ACTIVE},{label:W("Inactive"),value:y.LocationUnitStatus.INACTIVE}],ee=[{label:W("Jurisdiction"),value:!0},{label:W("Building"),value:!1}];return H&&V?s.default.createElement(d.Redirect,{to:V}):s.default.createElement("div",{className:"location-form form-container"},s.default.createElement(l.Form,(0,i.default)({},_,{form:X,name:"location-form",scrollToFirstError:!0,initialValues:r,onFinish:function(){var e=(0,u.default)(o.default.mark((function e(t){var n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!0),n=(0,p.generateLocationUnit)(t,r,M),a=W(A?"Location was successfully updated":"Location was successfully created"),(0,p.postPutLocationUnit)(n,P).then((function(){var e=S(n);(0,f.sendSuccessNotification)(a),null===T||void 0===T||T(n),Y.cancelQueries([m.locationHierarchyResourceType]).catch((function(e){throw e})),Y.invalidateQueries({predicate:function(e){return[m.locationResourceType,m.locationHierarchyResourceType].includes(e.queryKey[0])}}).catch((function(e){throw e})),Q(e),G(!0)})).catch((function(e){(0,f.sendErrorNotification)(e.message)})).finally((function(){I(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),s.default.createElement(b,{name:"id",label:W("Id"),rules:q.id,hidden:!0,id:"id"},s.default.createElement(l.Input,{disabled:!0})),s.default.createElement(b,{id:"parentId",hidden:Z("parentId"),label:W("Part Of"),name:"parentId",rules:q.parentId},s.default.createElement(v.CustomTreeSelect,{disabled:n.includes("parentId"),dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:W("Select the parent location"),disabledTreeNodesCallback:h,fullDataCallback:x,tree:C,allowClear:!0})),s.default.createElement(b,{id:"name",rules:q.name,hidden:Z("name"),name:"name",label:W("Name"),hasFeedback:!0},s.default.createElement(l.Input,{disabled:n.includes("name"),placeholder:W("Enter a location name")})),s.default.createElement(b,{id:"alias",hidden:Z("alias"),name:"alias",label:W("Alias"),hasFeedback:!0},s.default.createElement(l.Input,{disabled:n.includes("description"),placeholder:W("Alias")})),s.default.createElement(b,{id:"status",rules:q.status,hidden:Z("status"),label:W("Status"),name:"status"},s.default.createElement(l.Radio.Group,{name:"active"},$.map((function(e){return s.default.createElement(l.Radio,{name:"status",key:e.label,value:e.value},e.label)})))),s.default.createElement(b,{hidden:Z("isJurisdiction"),label:W("Physical type"),name:"isJurisdiction",id:"isJurisdiction",rules:q.isJurisdiction},s.default.createElement(l.Radio.Group,{disabled:n.includes("isJurisdiction"),options:ee})),s.default.createElement(b,{id:"description",rules:q.description,hidden:Z("description"),name:"description",label:W("Description"),hasFeedback:!0},s.default.createElement(l.Input.TextArea,{rows:4,disabled:n.includes("description"),placeholder:W("Description")})),s.default.createElement(b,R,s.default.createElement(l.Space,null,s.default.createElement(l.Button,{type:"primary",id:"location-form-submit-button",disabled:k,htmlType:"submit"},W(k?"Saving":"Save")),s.default.createElement(l.Button,{id:"location-form-cancel-button",onClick:j},W("Cancel"))))))};t.LocationForm=T,T.defaultProps=P},763:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseListView=void 0;var a=n(r(70)),o=n(r(26)),i=n(r(0)),u=r(106),c=r(32),s=r(22),l=r(589),d=r(66),f=r(276),p=r(97),m=r(307),v=r(91);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.BaseListView=function(e){var t,r,n=e.fhirBaseURL,y=e.extraQueryFilters,E=e.getColumns,O=e.createButtonLabel,h=e.createButtonUrl,b=e.keyValueMapperRenderProp,P=e.pageTitle,_=null!==(t=(0,s.useSearchParams)().sParams.get(s.viewDetailsQuery))&&void 0!==t?t:void 0,R=(0,m.useTranslation)().t,T=(0,p.useHistory)(),S=(0,s.useSimpleTabularView)(n,f.groupResourceType,(function(e){return g(e?(0,o.default)({},"name:contains",e):{},y)})),j=S.queryValues,C=j.data,A=j.isFetching,w=j.isLoading,L=j.error,U=S.tablePaginationProps,k=S.searchFormProps;if(L&&!C)return i.default.createElement(s.BrokenPage,{errorMessage:L.message});var I={datasource:(null!==(r=null===C||void 0===C?void 0:C.records)&&void 0!==r?r:[]).map((function(e,t){return g(g({},(0,l.parseGroup)(e)),{},{key:"".concat(t)})})),columns:E(R),loading:A||w,pagination:U};return i.default.createElement("div",{className:"content-section"},i.default.createElement(u.Helmet,null,i.default.createElement("title",null,P)),i.default.createElement(s.PageHeader,{title:P}),i.default.createElement(c.Row,{className:"list-view"},i.default.createElement(c.Col,{className:"main-content"},i.default.createElement("div",{className:"main-content__header"},i.default.createElement(s.SearchForm,(0,a.default)({"data-testid":"search-form"},k)),i.default.createElement(v.RbacCheck,{permissions:["Group.create"]},h?i.default.createElement(c.Button,{type:"primary",onClick:function(){return T.push(h)}},i.default.createElement(d.PlusOutlined,null),O):null)),i.default.createElement(s.TableLayout,I)),i.default.createElement(l.ViewDetailsWrapper,{resourceId:_,fhirBaseURL:n,keyValueMapperRenderProp:b})))}},764:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.UnitOfMeasure=t.TypeOfGroup=void 0,t.createSupplyManagementList=_,t.getGroupTypeOptions=t.getGroupFormFields=t.generateGroupPayload=t.defaultCode=t.defaultCharacteristic=void 0,t.getOrCreateList=b,t.validationRulesFactory=t.updateListReferencesFactory=t.postPutGroup=t.groupSelectfilterFunction=t.getUnitOfMeasureOptions=void 0;var a,o,i=n(r(45)),u=n(r(53)),c=n(r(90)),s=n(r(79)),l=n(r(26)),d=r(181),f=r(22),p=r(51),m=r(276),v=r(765),y=["meta"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.UnitOfMeasure=a,function(e){e.Pieces="Pieces",e.Tablets="Tablets",e.Ampoules="Ampoules",e.Strips="Strips",e.Cycles="Cycles",e.Bottles="Bottles",e.TestKits="Test kits",e.Sachets="Sachets",e.Straps="Straps"}(a||(t.UnitOfMeasure=a={})),t.TypeOfGroup=o,function(e){e.Medication="medication",e.Decive="device"}(o||(t.TypeOfGroup=o={}));var O={code:{coding:[{system:v.snomedCodeSystem,code:v.characteristicUnitMeasureCode,display:"Unit of measure"}]},valueCodeableConcept:{coding:[{system:v.snomedCodeSystem,code:"767525000",display:"Unit"}],text:void 0}};t.defaultCharacteristic=O;var h={coding:[{system:v.snomedCodeSystem,code:v.supplyMgSnomedCode,display:"Supply management"}]};t.defaultCode=h;t.validationRulesFactory=function(e){var t;return t={},(0,l.default)(t,m.id,[{type:"string"}]),(0,l.default)(t,m.identifier,[{type:"string"}]),(0,l.default)(t,m.name,[{type:"string",message:e("Must be a valid string")},{required:!0,message:e("Required")}]),(0,l.default)(t,m.active,[{type:"boolean"},{required:!0,message:e("Required")}]),(0,l.default)(t,m.type,[{type:"enum",enum:Object.values(o),required:!0}]),(0,l.default)(t,m.unitOfMeasure,[{type:"enum",enum:Object.values(a),required:!0}]),t};t.getGroupFormFields=function(e){if(!e)return{initialObject:{code:h},active:!0};var t=e.id,r=e.name,n=e.active,a=e.identifier,o=e.type,i=(0,f.getObjLike)(a,"use",f.IdentifierUseCodes.OFFICIAL),u=(0,v.getUnitMeasureCharacteristic)(e);return{initialObject:e,id:t,identifier:(0,p.get)(i,"0.value"),active:n,name:r,type:o,unitOfMeasure:(0,p.get)(u,"valueCodeableConcept.text",void 0)}};t.generateGroupPayload=function(e,t){var r=e.id,n=e.identifier,a=e.active,o=e.name,i=e.type,u=e.unitOfMeasure,l=t.initialObject,g={resourceType:m.groupResourceType,active:!!a};if(l){l.meta;g=E(E({},(0,s.default)(l,y)),g)}o&&(g.name=o),g.id=r||(0,d.v4)();var h=n;if(n||(h=(0,d.v4)()),g.identifier=[{value:h,use:f.IdentifierUseCodes.OFFICIAL}],i&&(g.type=i),u){var b=(0,v.getUnitMeasureCharacteristic)(g);if(b)(0,p.set)(b,"valueCodeableConcept.text",u);else{var P,_=(0,p.set)(O,"valueCodeableConcept.text",u);g.characteristic=[].concat((0,c.default)(null!==(P=g.characteristic)&&void 0!==P?P:[]),[_])}}return g};t.getGroupTypeOptions=function(){return(0,p.values)(o).map((function(e){return{value:e,label:(0,p.capitalize)(e)}}))};t.getUnitOfMeasureOptions=function(){return(0,p.values)(a).map((function(e){return{value:e,label:(0,p.capitalize)(e)}}))};t.groupSelectfilterFunction=function(e,t){return!(null===t||void 0===t||!t.label.toLowerCase().includes(e.toLowerCase()))};function b(e,t){return P.apply(this,arguments)}function P(){return(P=(0,u.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new f.FHIRServiceClass(t,m.listResourceType),e.abrupt("return",n.read(r).catch((function(e){if(404===e.statusCode){var t=_(r);return n.update(t)}throw e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.postPutGroup=function(e,t){return new f.FHIRServiceClass(e,m.groupResourceType).update(t)};function _(e){return{resourceType:m.listResourceType,id:e,identifier:[{use:f.IdentifierUseCodes.OFFICIAL,value:e}],status:"current",mode:"working",title:"Supply Chain commodities",code:{coding:[{system:"http://ona.io",code:"supply-chain",display:"Supply Chain Commodity"}],text:"Supply Chain Commodity"},entry:[]}}t.updateListReferencesFactory=function(e,t){return function(){var r=(0,u.default)(i.default.mark((function r(n,a){var o,u,c;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!a){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,b(e,t);case 4:return o=r.sent,(u=(0,p.cloneDeep)(o)).entry&&u.entry.push({item:{reference:"".concat(m.groupResourceType,"/").concat(n.id)}}),c=new f.FHIRServiceClass(e,m.listResourceType),r.abrupt("return",c.update(u));case 9:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}},765:function(e,t,r){"use strict";function n(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.supplyMgSnomedCode=t.snomedCodeSystem=t.getUnitMeasureCharacteristic=t.characteristicUnitMeasureCode=void 0;t.getUnitMeasureCharacteristic=function(e){var t,r,a=n(null!==(t=e.characteristic)&&void 0!==t?t:[]);try{for(a.s();!(r=a.n()).done;){var u,c,s=r.value,l=n(null!==(u=s.code.coding)&&void 0!==u?u:[]);try{for(l.s();!(c=l.n()).done;){var d,f=c.value;if((null===(d=f.system)||void 0===d?void 0:d.toLowerCase())===o.toLowerCase()&&f.code===i)return s}}catch(p){l.e(p)}finally{l.f()}}}catch(p){a.e(p)}finally{a.f()}};var o="http://snomed.info/sct";t.snomedCodeSystem=o;t.supplyMgSnomedCode="386452003";var i="767524001";t.characteristicUnitMeasureCode=i},766:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.sortMap=t.serverSideSortedColumns=t.parsePatient=t.columns=void 0;var a,o=n(r(26)),i=n(r(0)),u=r(118),c=r(590),s=r(354),l=r(32),d=r(97);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var p=l.Typography.Text,m="id",v="name",y="dob",g="gender",E="active";t.parsePatient=function(e){var t,r,n=e.birthDate,a=e.deceasedBoolean;return r={},(0,o.default)(r,m,e.id),(0,o.default)(r,v,null!==(t=(0,c.getPatientName)(e))&&void 0!==t?t:m),(0,o.default)(r,y,n),(0,o.default)(r,g,e.gender),(0,o.default)(r,"deceased",a),(0,o.default)(r,E,e.active),r};var O=(0,u.sorterFn)(y,!0),h=function(e){return[{title:e("Name"),dataIndex:v,key:v,render:function(e,t){return i.default.createElement(i.default.Fragment,null,i.default.createElement("span",null,e," ",t.deceased?i.default.createElement(l.Tag,{color:"red"},"Deceased"):null))}},{title:e("Date Of Birth"),dataIndex:y,key:y,sorter:O,render:function(t){return e("{{val, datetime}}",{val:new Date(t)})}},{title:e("Status"),dataIndex:E,key:E,render:function(t){return i.default.createElement(p,null,e(!0===t?"Active":"Inactive"))}},{title:e("Gender"),dataIndex:g,key:g},{title:e("Actions"),width:"20%",render:function(t){return i.default.createElement("span",{className:"d-flex justify-content-start align-items-center"},i.default.createElement(d.Link,{to:"".concat(s.LIST_PATIENTS_URL,"/").concat(t.id),className:"m-0 p-1"},e("View")))}}]};t.columns=h;var b=(a={},(0,o.default)(a,m,"identifier"),(0,o.default)(a,v,"name"),(0,o.default)(a,y,"birthdate"),a);t.sortMap=b;t.serverSideSortedColumns=function(e){return h(e).map((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return"function"===typeof e.sorter&&(t.sorter=!0),t}))}},768:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.splitContentType=t.processTopLevelFields=t.processDocumentReferences=t.processContextFields=t.processContentFields=t.itemIsEmpty=t.fetchAttachmentForDownload=void 0;var a=n(r(45)),o=n(r(53)),i=n(r(26)),u=r(51),c=r(1575),s=r(354),l=n(r(566));function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.itemIsEmpty=function(e){return!!(0,u.isEmpty)(e)||!(0,u.some)(e)};var p=function(e){var t=e.status,r=e.type,n=e.description,a=e.securityLabel,o=e.date;return{id:e.id,title:n,createdAt:o?(0,c.format)(new Date(o),s.dateFormat):void 0,status:t,documentType:{codeList:null===r||void 0===r?void 0:r.coding,code:(0,u.get)(r,"coding.0")},securityCodes:{codeList:a,code:(0,u.get)(a,"[0].coding[0]")}}};t.processTopLevelFields=p;var m=function(e){var t=(0,u.get)(e,"context.period.start"),r=(0,u.get)(e,"context.period.end");return{periodStart:t?(0,c.format)(new Date(t),s.dateFormat):void 0,periodEnd:r?(0,c.format)(new Date(r),s.dateFormat):void 0,eventCoding:(0,u.get)(e,"context.event[0].coding[0]"),facilityTypeCoding:(0,u.get)(e,"context.facilityType.coding[0]"),practiceSettingCoding:(0,u.get)(e,"context.practiceSetting.coding[0]")}};t.processContextFields=m;var v=function(e){return(0,u.get)(e,"content").map((function(e){var t,r,n=(0,u.get)(e,"attachment.data"),a=(0,u.get)(e,"attachment.url");a&&(t=/^(?:[a-z]+:)?\/\//.test(a),r=Array.from(a.matchAll(/Binary\/[\w-]+$/gm),(function(e){return e[0]}))[0]);return{attachment:{url:a,urlIsAbsolute:t,binaryUrl:r,data:n},size:(0,u.get)(e,"attachment.size"),formatCode:(0,u.get)(e,"format.code"),formatDisplay:(0,u.get)(e,"format.display"),formatContentType:(0,u.get)(e,"attachment.contentType")}}))};t.processContentFields=v;t.processDocumentReferences=function(e){return e.map((function(e){return f(f({},p(e)),{},{context:m(e),content:v(e)})}))};t.splitContentType=function(e){var t=e.split("/");return{discretePart:t[0],multipart:t[1]}};var y=function(){var e=(0,o.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.default.client(t).request({url:r}).then((function(e){return e.blob()})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.fetchAttachmentForDownload=y},769:function(e,t,r){},770:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getOrgSelectOptions=t.getCareTeamFormFields=t.defaultInitialValues=void 0,t.getPatientName=h,t.submitForm=t.selectFilterFunction=t.getPractitionerSelectOptions=void 0;var a,o=n(r(45)),i=n(r(79)),u=n(r(53)),c=n(r(26)),s=r(212),l=r(181),d=r(22),f=r(62),p=r(308),m=r(51),v=["meta","text","participant"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e,t){var r,n=(null!==(r=t.initialCareTeam)&&void 0!==r?r:{}).participant,a=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var r,n=null===(r=t.member)||void 0===r?void 0:r.reference;return g(g({},e),{},(0,c.default)({},n,t))}),{}),o=e[p.managingOrganizations].reduce((function(e,t){return g(g({},e),{},(0,c.default)({},t,t))}),{}),i=e[p.practitionerParticipants].reduce((function(e,t){return g(g({},e),{},(0,c.default)({},t,t))}),{}),u=function(e,t){e.forEach((function(e){t[e]||delete a[e]}))};return u(t.practitionerParticipants,i),u(t.managingOrganizations,o),a},O=function(){var e=(0,u.default)(o.default.mark((function e(t,r,n,a,u,c){var y,O,b,P,_,R,T,S,j,C,A,w,L,U,k,I;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=r.initialCareTeam,O=r.id,b=r.uuid,(P=null!==y&&void 0!==y?y:{}).meta,P.text,P.participant,_=(0,i.default)(P,v),R=(0,m.keyBy)(u,(function(e){return"".concat(p.practitionerResourceType,"/").concat(e.id)})),T={},t[p.practitionerParticipants].forEach((function(e){var t=R[e];T[e]={member:{reference:e,display:h(t)}}})),S=(0,m.keyBy)(a,(function(e){return"".concat(p.organizationResourceType,"/").concat(e.id)})),j={},t[p.managingOrganizations].forEach((function(e){var t,r=(null===(t=S[e])||void 0===t?void 0:t.name)?{display:S[e].name}:{};j[e]={role:[{coding:[{system:"http://snomed.info/sct",code:"394730007",display:"Healthcare related organization"}]}],member:g(g({},r),{},{reference:e})}})),C=E(t,r),A=g(g(g({},C),T),j),w=Object.values(j).map((function(e){return e.member})),L=b||(0,l.v4)(),U=g(g({},_),{},{resourceType:p.FHIR_CARE_TEAM,identifier:[{use:"official",value:L}],id:O||L,name:t.name,status:t.status,participant:Object.values(A),managingOrganization:w}),k=new d.FHIRServiceClass(n,p.FHIR_CARE_TEAM),I=c("Successfully added CareTeams"),O&&(I=c("Successfully updated CareTeams")),e.next=18,k.update(U).then((function(){return(0,f.sendSuccessNotification)(I)})).catch((function(){(0,f.sendErrorNotification)(c("There was a problem fetching the Care Team"))})).finally((function(){return s.history.push(p.URL_CARE_TEAM)}));case 18:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,i){return e.apply(this,arguments)}}();function h(e){if(!e)return"";var t=e.name,r=(0,d.getObjLike)(t,"use",d.IdentifierUseCodes.OFFICIAL)[0];return(0,d.parseFhirHumanName)(r)}t.submitForm=O;var b=(a={},(0,c.default)(a,p.uuid,""),(0,c.default)(a,p.id,""),(0,c.default)(a,p.name,""),(0,c.default)(a,p.status,"active"),(0,c.default)(a,"initialCareTeam",void 0),(0,c.default)(a,p.managingOrganizations,[]),(0,c.default)(a,p.organizationParticipants,[]),(0,c.default)(a,p.practitionerParticipants,[]),a);t.defaultInitialValues=b;t.getCareTeamFormFields=function(e){var t;if(!e)return b;var r=e.id,n=e.identifier,a=e.name,o=e.status,i=e.participant,u=(0,d.getObjLike)(n,"use",d.IdentifierUseCodes.OFFICIAL),c=(null!==i&&void 0!==i?i:[]).map((function(e){var t;return null===(t=e.member)||void 0===t?void 0:t.reference})).filter((function(e){return void 0!==e})),s=c.filter((function(e){return e.startsWith(p.practitionerResourceType)})),l=c.filter((function(e){return e.startsWith(p.organizationResourceType)})),f=(null!==(t=e.managingOrganization)&&void 0!==t?t:[]).map((function(e){return e.reference})).filter((function(e){return!!e}));return{uuid:(0,m.get)(u,"0.value",void 0),id:r,name:a,status:o,initialCareTeam:e,practitionerParticipants:s,organizationParticipants:l,managingOrganizations:f}};t.getOrgSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{value:"".concat(p.organizationResourceType,"/").concat(e.id),label:e.name}}))};t.getPractitionerSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{value:"".concat(p.practitionerResourceType,"/").concat(e.id),label:h(e)}}))};t.selectFilterFunction=function(e,t){var r;return!(null===t||void 0===t||null===(r=t.label)||void 0===r||!r.toLowerCase().includes(e.toLowerCase()))}},771:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEditUser=function(e){var t=y(y({},e),{},{getPractitionerFun:g,getPractitionerRoleFun:O,postPutPractitionerFactory:P});return l.default.createElement(u.ConnectedCreateEditUser,t)},t.practitionerUpdater=t.getPractitionerRole=t.getPractitioner=t.getGroup=t.createEditPractitionerRoleResource=t.createEditGroupResource=void 0;var a=n(r(45)),o=n(r(26)),i=n(r(53)),u=r(94),c=r(414),s=r(22),l=n(r(0)),d=r(181),f=r(62),p=r(212),m=r(233);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e,t){return new s.FHIRServiceClass(e,c.practitionerResourceType).list({identifier:t}).then((function(e){return(0,s.getResourcesFromBundle)(e)[0]}))};t.getPractitioner=g;var E=function(e,t){return new s.FHIRServiceClass(e,c.groupResourceType).list({identifier:t}).then((function(e){return(0,s.getResourcesFromBundle)(e)[0]}))};t.getGroup=E;var O=function(e,t){return new s.FHIRServiceClass(e,c.practitionerRoleResourceType).list({identifier:t}).then((function(e){return(0,s.getResourcesFromBundle)(e)[0]}))};t.getPractitionerRole=O;var h=function(e,t,r,n,a,o){var i=(0,d.v4)(),l={resourceType:c.groupResourceType,id:null!==o&&void 0!==o?o:i,identifier:[{use:s.IdentifierUseCodes.OFFICIAL,value:null!==o&&void 0!==o?o:i},{use:s.IdentifierUseCodes.SECONDARY,value:t}],active:e,type:"practitioner",actual:!0,code:{coding:[{system:"http://snomed.info/sct",code:u.PRACTITIONER_USER_TYPE_CODE,display:"Assigned practitioner"}]},name:r,member:[{entity:{reference:"Practitioner/".concat(n)}}]};return new s.FHIRServiceClass(a,c.groupResourceType).update(l)};t.createEditGroupResource=h;var b=function(e,t,r,n,a,o,i){var l=(0,d.v4)(),f=[{coding:[{system:"http://snomed.info/sct",code:u.PRACTITIONER_USER_TYPE_CODE,display:"Assigned practitioner"}]}];"supervisor"===e&&(f=[{coding:[{system:"http://snomed.info/sct",code:u.SUPERVISOR_USER_TYPE_CODE,display:"Supervisor (occupation)"}]}]);var p=(0,s.getObjLike)(a,"use",m.HumanNameUseCodes.OFFICIAL,!0)[0],v={resourceType:c.practitionerRoleResourceType,id:null!==i&&void 0!==i?i:l,identifier:[{use:s.IdentifierUseCodes.OFFICIAL,value:null!==i&&void 0!==i?i:l},{use:s.IdentifierUseCodes.SECONDARY,value:t}],active:r,practitioner:{reference:"Practitioner/".concat(n),display:(0,s.parseFhirHumanName)(p)},code:f};return new s.FHIRServiceClass(o,c.practitionerRoleResourceType).update(v)};t.createEditPractitionerRoleResource=b;var P=function(e){return function(){var t=(0,i.default)(a.default.mark((function t(r,n){var o,i,l,m,v,y,g,O,P,_,R,T,S,j,C,A=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=A.length>2&&void 0!==A[2]?A[2]:function(e){return e},!(l=!!r.practitioner)){t.next=6;break}return t.next=5,E(e,n);case 5:m=t.sent;case 6:return v=i(l?"Practitioner updated successfully":"Practitioner created successfully"),y=i(l?"Failed to update practitioner":"Failed to create practitioner"),g=i(m?"Group resource updated successfully":"Group resource created successfully"),O=i(m?"Failed to update group resource":"Failed to create group resource"),P=i(l?"PractitionerRole updated successfully":"PractitionerRole created successfully"),_=i(l?"Failed to update practitionerRole":"Failed to create practitionerRole"),r.practitioner&&(S=r.practitioner.identifier,R=(0,s.getObjLike)(S,"use",s.IdentifierUseCodes.OFFICIAL)[0],T=(0,s.getObjLike)(S,"use",s.IdentifierUseCodes.SECONDARY)[0]),R||(R={use:s.IdentifierUseCodes.OFFICIAL,value:(0,d.v4)()}),T||(T={use:s.IdentifierUseCodes.SECONDARY,value:n}),j={resourceType:c.practitionerResourceType,id:R.value,identifier:[R,T],active:null!==(o=r.enabled)&&void 0!==o&&o,name:[{use:s.IdentifierUseCodes.OFFICIAL,family:r.lastName,given:[r.firstName,""]}],telecom:[{system:"email",value:r.email}]},C=new s.FHIRServiceClass(e,c.practitionerResourceType),t.abrupt("return",C.update(j).then((function(e){return(0,f.sendSuccessNotification)(v),e})).then((function(t){var a,o,i,u,c,s,l,d,p=null!==(a=null===(o=t.identifier)||void 0===o||null===(i=o.find((function(e){return"official"===e.use})))||void 0===i?void 0:i.value)&&void 0!==a?a:j.id;h(null!==(u=r.enabled)&&void 0!==u&&u,n,"".concat(r.firstName," ").concat(r.lastName),null!==p&&void 0!==p?p:"",e,null===(c=m)||void 0===c?void 0:c.id).then((function(){return(0,f.sendSuccessNotification)(g)})).catch((function(){return(0,f.sendErrorNotification)(O)})),b(r.userType,n,null!==(s=r.enabled)&&void 0!==s&&s,null!==p&&void 0!==p?p:"",null!==(l=t.name)&&void 0!==l?l:[],e,null===(d=r.practitionerRole)||void 0===d?void 0:d.id).then((function(){return(0,f.sendSuccessNotification)(P)})).catch((function(){return(0,f.sendErrorNotification)(_)}))})).catch((function(){return(0,f.sendErrorNotification)(y)})).finally((function(){l||p.history.push("".concat(u.URL_USER_CREDENTIALS,"/").concat(n,"/").concat(r.username))})));case 18:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()};t.practitionerUpdater=P},772:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.loadKeycloakResources=t.deleteUser=void 0;var a=n(r(45)),o=n(r(90)),i=n(r(26)),u=n(r(53)),c=r(168),s=r(414),l=r(62),d=r(94),f=r(22);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(){var e=(0,u.default)(a.default.mark((function e(t,r,n,i){var u,p,v,y,g,E,O,h,b,P;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=new c.KeycloakService("".concat(d.KEYCLOAK_URL_USERS,"/").concat(n),t),p=new f.FHIRServiceClass(r,s.practitionerResourceType),e.next=4,p.list({identifier:n}).then((function(e){return(0,f.getResourcesFromBundle)(e)}));case 4:return v=e.sent,y=v.map((function(e){return m(m({},e),{},{active:!1})})),g=new f.FHIRServiceClass(r,"Group"),e.next=9,g.list({identifier:n}).then((function(e){return(0,f.getResourcesFromBundle)(e)}));case 9:return E=e.sent,O=E.map((function(e){return m(m({},e),{},{active:!1})})),h=new f.FHIRServiceClass(r,s.practitionerRoleResourceType),e.next=14,h.list({identifier:n}).then((function(e){return(0,f.getResourcesFromBundle)(e)}));case 14:return b=e.sent,P=b.map((function(e){return m(m({},e),{},{active:!1})})),e.abrupt("return",Promise.allSettled([u.delete()].concat((0,o.default)(y.map((function(e){return p.update(e)}))),(0,o.default)(O.map((function(e){return g.update(e)}))),(0,o.default)(P.map((function(e){return h.update(e)}))))).then((function(){(0,l.sendSuccessNotification)(i("User deleted successfully")),(0,l.sendSuccessNotification)(i("Practitioner deactivated")),(0,l.sendSuccessNotification)(i("Group deactivated")),(0,l.sendSuccessNotification)(i("Practitioner role deactivated"))})).catch((function(e){return(0,l.sendErrorNotification)(e.message)})));case 17:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();t.deleteUser=v;var y=function(){var e=(0,u.default)(a.default.mark((function e(t,r){var n,o,i,u,l,d=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=3,new c.KeycloakService("".concat(r,"/").concat(s.keycloakCountEndpoint),t).list();case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",{total:o,records:[]});case 6:return i=n.search,u={max:o},i&&(u.search=i),e.next=11,new c.KeycloakService(r,t).list(u);case 11:return l=e.sent,e.abrupt("return",{total:o,records:l});case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.loadKeycloakResources=y},905:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.defaultErrorCallback=void 0;var a=n(r(45)),o=n(r(53)),i=r(712);t.defaultErrorCallback=function(){};var u=function(){var e=(0,o.default)(a.default.mark((function e(t,r,n,u,c){var s,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},c&&(s={id_token_hint:c,post_logout_redirect_uri:n}),l=i.OpenSRPService.getURL(r,s),d=function(){var e=(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,i.customFetch)(u,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d().then((function(){window.location.href=l})).catch((function(e){throw e})),e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();t.logout=u},91:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(745);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(1213);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r(582);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(583);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},914:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1571);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}))},917:function(e,t,r){"use strict";var n=r(9);Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=t.getAllConfigs=t.PractToOrgAssignmentStrategy=void 0,t.setAllConfigs=function(e){P(e),h.setState(e)},t.setConfig=function(e,t){var r={};r[e]=t,P(r),y(e,t)},t.useGlobalConfigs=t.supportedRbacStrategies=t.supportedProjectCode=t.supportedLanguageCodes=void 0;var a=n(r(26)),o=n(r(79)),i=r(919),u=r(921);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.supportedLanguageCodes=["en","sw","fr","ar","th","vi"];t.supportedProjectCode=["eusm","core","echis"];var l;t.supportedRbacStrategies=["keycloak"],t.PractToOrgAssignmentStrategy=l,function(e){e.ONE_TO_ONE="ONE_TO_ONE",e.ONE_TO_MANY="ONE_TO_MANY"}(l||(t.PractToOrgAssignmentStrategy=l={}));var d={languageCode:"en",appLoginURL:void 0,keycloakBaseURL:void 0,opensrpBaseURL:void 0,fhirBaseURL:void 0,tablespref:void 0,defaultTablesPageSize:5,projectCode:"core",rbacStrategy:"keycloak",practToOrgAssignmentStrategy:l.ONE_TO_MANY},f=localStorage.getItem(u.USER_PREFERENCE_KEY)?JSON.parse(localStorage.getItem(u.USER_PREFERENCE_KEY)):{},p=(0,i.createGlobalState)(s(s({},d),f)),m=p.useGlobalState,v=p.getGlobalState,y=p.setGlobalState,g=(0,o.default)(p,["useGlobalState","getGlobalState","setGlobalState"]),E=m;t.useGlobalConfigs=E;var O=v;t.getConfig=O;var h=g,b=h.getState;function P(e){f={tablespref:e.tablespref},localStorage.setItem(u.USER_PREFERENCE_KEY,JSON.stringify(f))}t.getAllConfigs=b},921:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_PREFERENCE_KEY=t.SLICE_NOT_REGISTERED=void 0;t.SLICE_NOT_REGISTERED="Looks like configuration slice is being used without having been yet registered to the store";t.USER_PREFERENCE_KEY="Preference"},931:function(e,t,r){},932:function(e,t,r){},933:function(e,t,r){"use strict";var n=r(9),a=r(61);Object.defineProperty(t,"__esModule",{value:!0}),t.useHandleBrokenPage=t.defaultProps=t.BrokenPage=void 0;var o=n(r(52)),i=n(r(26)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(32),s=r(62),l=r(385),d=r(267);function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var m=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l.extraLinksDefault);t.defaultProps=m;var v=function(e){var t=e.errorMessage,r=e.title,n=(0,d.useTranslation)().t,a=null!==t&&void 0!==t?t:n("Something went wrong"),o=null!==r&&void 0!==r?r:n("Error"),i={homeUrl:e.homeUrl};return u.default.createElement(c.Result,{status:"500",title:o,subTitle:a,extra:u.default.createElement(l.ExtraLinks,i)})};t.BrokenPage=v,v.defaultProps=m;t.useHandleBrokenPage=function(){var e=(0,u.useState)(!1),t=(0,o.default)(e,2),r=t[0],n=t[1],a=(0,u.useState)(),i=(0,o.default)(a,2),c=i[0],l=i[1];return{broken:r,errorMessage:c,handleBrokenPage:function(e){(0,s.sendErrorNotification)(e.name,e.message),l(e.message),n(!0)}}}},94:function(e,t,r){"use strict";var n=r(61);Object.defineProperty(t,"__esModule",{value:!0});var a={getUserTypeCode:!0,getUserType:!0,UserGroupDucks:!0};t.UserGroupDucks=void 0,Object.defineProperty(t,"getUserType",{enumerable:!0,get:function(){return p.getUserType}}),Object.defineProperty(t,"getUserTypeCode",{enumerable:!0,get:function(){return p.getUserTypeCode}});var o=r(1245);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(1251);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var u=r(1254);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=r(1255);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=r(1258);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var l=r(1259);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=r(133);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=r(758);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=r(586),m=r(404);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(405));function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}t.UserGroupDucks=v}},[[1578,1,2]]]);